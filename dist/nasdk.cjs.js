"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(){t=function(){return n};var e,n={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,s=Object.create(o.prototype),a=new _(r||[]);return i(s,"_invoke",{value:L(e,n,a)}),s}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=h;var d="suspendedStart",p="suspendedYield",y="executing",w="completed",b={};function g(){}function m(){}function v(){}var E={};l(E,a,(function(){return this}));var x=Object.getPrototypeOf,B=x&&x(x(I([])));B&&B!==r&&o.call(B,a)&&(E=B);var A=v.prototype=g.prototype=Object.create(E);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(r,i,s,a){var c=f(e[r],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&o.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var r;i(this,"_invoke",{value:function(e,o){function i(){return new t((function(t,r){n(e,o,t,r)}))}return r=r?r.then(i,i):i()}})}function L(t,n,r){var o=d;return function(i,s){if(o===y)throw new Error("Generator is already running");if(o===w){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=T(a,r);if(c){if(c===b)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=w,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?w:p,u.arg===b)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=w,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,b;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function H(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function n(){for(;++r<t.length;)if(o.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(typeof t+" is not iterable")}return m.prototype=v,i(A,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:m,configurable:!0}),m.displayName=l(v,u,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,u,"GeneratorFunction")),e.prototype=Object.create(A),e},n.awrap=function(e){return{__await:e}},k(S.prototype),l(S.prototype,c,(function(){return this})),n.AsyncIterator=S,n.async=function(e,t,r,o,i){void 0===i&&(i=Promise);var s=new S(h(e,t,r,o),i);return n.isGeneratorFunction(t)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},k(A),l(A,u,"Generator"),l(A,a,(function(){return this})),l(A,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=I,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(H),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var c=o.call(s,"catchLoc"),u=o.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),H(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;H(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},n}function n(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function r(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var s=e.apply(t,n);function a(e){r(s,o,i,a,c,"next",e)}function c(e){r(s,o,i,a,c,"throw",e)}a(void 0)}))}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=function(){function e(t,n,r){i(this,e),this.nostrPool=t,this.config=n,this.sendTo=n.MARKET_ROBOT_ADDR,this.runCommand=r}return a(e,[{key:"listOrder",value:function(e){var t=e.side,n=e.amount,r=e.price,o=e.buyOrSellTokenName,i=e.payTokenName,s="".concat(t," ").concat(n," ").concat(o," at price ").concat(r," ").concat(i);return this.runCommand(s,this.sendTo)}},{key:"takeOrder",value:function(e){var t="take order ".concat(e);return this.runCommand(t,this.sendTo)}},{key:"cancelOrder",value:function(e){var t="cancel order ".concat(e);return this.runCommand(t,this.sendTo)}},{key:"repairOrder",value:function(e){var t="repair order ".concat(e);return this.runCommand(t,this.sendTo)}}]),e}(),l=function(){function e(t,n,r){i(this,e),this.nostrPool=t,this.config=n,this.sendTo=n.TOKEN_ROBOT_ADDR,this.runCommand=r}return a(e,[{key:"approve",value:function(e){var t=e.tokenName,n=e.amount,r=e.approveTo,o="approve ".concat(n," ").concat(t," to ").concat(r);return this.runCommand(o,this.sendTo)}},{key:"transfer",value:function(e){var t=e.tokenName,n=e.amount,r=e.to,o="transfer ".concat(n," ").concat(t," to ").concat(r);return this.runCommand(o,this.sendTo)}},{key:"addAddressBook",value:function(e){var t=e.address,n=e.name,r="add address ".concat(t," name ").concat(n);return this.runCommand(r,this.sendTo)}},{key:"queryAddressBook",value:function(e){var t="address book of ".concat(e);return this.runCommand(t,this.sendTo,!0)}},{key:"deposit",value:function(e){var t=e.amount,n=e.to,r="deposit ".concat(t," sats to ").concat(n);return this.runCommand(r,this.sendTo)}},{key:"withdraw",value:function(e){var t,n,r=e.invoice,o="undefined"==typeof window?null===(t=global)||void 0===t||null===(t=t.lightningPayReq)||void 0===t?void 0:t.decode(r).satoshis:(null===(n=window)||void 0===n||null===(n=n.lightningPayReq)||void 0===n||null===(n=n.decode(r))||void 0===n?void 0:n.satoshis)||0;if(!o)throw new Error("Invalid invoice");var i="withdraw ".concat(o," sats to ").concat(r);return this.runCommand(i,this.sendTo)}}]),e}(),h=function(){function e(){var t,n,r,o;i(this,e),window.nostrasset=window.nostrasset||{},this.supportedProviderList={alby:null===(t=window)||void 0===t||null===(t=t.alby)||void 0===t?void 0:t.nostr,okx:null===(n=window)||void 0===n||null===(n=n.okxwallet)||void 0===n?void 0:n.nostr,onekey:null===(r=window.$onekey)||void 0===r?void 0:r.nostr,tokenpocket:null===(o=window)||void 0===o||null===(o=o.tokenpocket)||void 0===o?void 0:o.nostr,injected:window.nostr}}var n;return a(e,[{key:"getProvider",value:function(){return window.nostrasset.nostr}},{key:"connect",value:(n=o(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Object.keys(this.supportedProviderList).join(",")).includes(n)){e.next=3;break}throw new Error("Provider not supported,only support ".concat(r," now"));case 3:if(this.supportedProviderList[n]){e.next=5;break}throw new Error("No ".concat(n," provider found"));case 5:return window.nostrasset.nostr=this.supportedProviderList[n],e.next=8,window.nostrasset.nostr.getPublicKey();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}]),e}();function f(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function d(e,t){return e(t={exports:{}},t.exports),t.exports}var p=d((function(e,t){function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function r(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function o(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function i(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function s(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function a(e,t){o(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(t,"__esModule",{value:!0}),t.output=t.exists=t.hash=t.bytes=t.bool=t.number=void 0,t.number=n,t.bool=r,t.bytes=o,t.hash=i,t.exists=s,t.output=a;const c={number:n,bool:r,bytes:o,hash:i,exists:s,output:a};t.default=c}));f(p),p.output,p.exists,p.hash,p.bytes,p.bool,p.number;var y=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=void 0,t.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0}));f(y),y.crypto;var w=d((function(e,t){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.checkOpts=t.Hash=t.concatBytes=t.toBytes=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.isLE=t.rotr=t.createView=t.u32=t.u8=void 0;const n=e=>e instanceof Uint8Array;t.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);t.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));t.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(t.rotr=(e,t)=>e<<32-t|e>>>t,t.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!t.isLE)throw new Error("Non little-endian hardware is not supported");const r=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));t.bytesToHex=function(e){if(!n(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=r[e[n]];return t},t.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let t=0;t<n.length;t++){const r=2*t,o=e.slice(r,r+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");n[t]=i}return n};function o(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function i(e){if("string"==typeof e&&(e=o(e)),!n(e))throw new Error("expected Uint8Array, got "+typeof e);return e}t.nextTick=async()=>{},t.asyncLoop=async function(e,n,r){let o=Date.now();for(let i=0;i<e;i++){r(i);const e=Date.now()-o;e>=0&&e<n||(await(0,t.nextTick)(),o+=e)}},t.utf8ToBytes=o,t.toBytes=i,t.concatBytes=function(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let r=0;return e.forEach((e=>{if(!n(e))throw new Error("Uint8Array expected");t.set(e,r),r+=e.length})),t};t.Hash=class{clone(){return this._cloneInto()}};t.checkOpts=function(e,t){if(void 0!==t&&("object"!=typeof t||(n=t,"[object Object]"!==Object.prototype.toString.call(n)||n.constructor!==Object)))throw new Error("Options should be object or undefined");var n;return Object.assign(e,t)},t.wrapConstructor=function(e){const t=t=>e().update(i(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t},t.wrapConstructorWithOpts=function(e){const t=(t,n)=>e(n).update(i(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},t.wrapXOFConstructorWithOpts=function(e){const t=(t,n)=>e(n).update(i(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},t.randomBytes=function(e=32){if(y.crypto&&"function"==typeof y.crypto.getRandomValues)return y.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}}));f(w);var b=w.randomBytes;w.wrapXOFConstructorWithOpts,w.wrapConstructorWithOpts,w.wrapConstructor,w.checkOpts,w.Hash;var g=w.concatBytes;w.toBytes,w.utf8ToBytes,w.asyncLoop,w.nextTick;var m=w.hexToBytes,v=w.bytesToHex;w.isLE,w.rotr,w.createView,w.u32,w.u8;var E=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SHA2=void 0;class n extends w.Hash{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,w.createView)(this.buffer)}update(e){p.default.exists(this);const{view:t,buffer:n,blockLen:r}=this,o=(e=(0,w.toBytes)(e)).length;for(let i=0;i<o;){const s=Math.min(r-this.pos,o-i);if(s!==r)n.set(e.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=(0,w.createView)(e);for(;r<=o-i;i+=r)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){p.default.exists(this),p.default.output(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:o}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(n,0),i=0);for(let e=i;e<r;e++)t[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),a=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,s,r),e.setUint32(t+u,a,r)}(n,r-8,BigInt(8*this.length),o),this.process(n,0);const s=(0,w.createView)(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)s.setUint32(4*e,u[e],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:o,destroyed:i,pos:s}=this;return e.length=r,e.pos=s,e.finished=o,e.destroyed=i,r%t&&e.buffer.set(n),e}}t.SHA2=n}));f(E),E.SHA2;var x=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.sha224=t.sha256=void 0;const n=(e,t,n)=>e&t^e&n^t&n,r=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),o=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),i=new Uint32Array(64);class s extends E.SHA2{constructor(){super(64,32,8,!1),this.A=0|o[0],this.B=0|o[1],this.C=0|o[2],this.D=0|o[3],this.E=0|o[4],this.F=0|o[5],this.G=0|o[6],this.H=0|o[7]}get(){const{A:e,B:t,C:n,D:r,E:o,F:i,G:s,H:a}=this;return[e,t,n,r,o,i,s,a]}set(e,t,n,r,o,i,s,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|o,this.F=0|i,this.G=0|s,this.H=0|a}process(e,t){for(let n=0;n<16;n++,t+=4)i[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=i[e-15],n=i[e-2],r=(0,w.rotr)(t,7)^(0,w.rotr)(t,18)^t>>>3,o=(0,w.rotr)(n,17)^(0,w.rotr)(n,19)^n>>>10;i[e]=o+i[e-7]+r+i[e-16]|0}let{A:o,B:s,C:a,D:c,E:u,F:l,G:h,H:f}=this;for(let e=0;e<64;e++){const t=f+((0,w.rotr)(u,6)^(0,w.rotr)(u,11)^(0,w.rotr)(u,25))+((d=u)&l^~d&h)+r[e]+i[e]|0,p=((0,w.rotr)(o,2)^(0,w.rotr)(o,13)^(0,w.rotr)(o,22))+n(o,s,a)|0;f=h,h=l,l=u,u=c+t|0,c=a,a=s,s=o,o=t+p|0}var d;o=o+this.A|0,s=s+this.B|0,a=a+this.C|0,c=c+this.D|0,u=u+this.E|0,l=l+this.F|0,h=h+this.G|0,f=f+this.H|0,this.set(o,s,a,c,u,l,h,f)}roundClean(){i.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class a extends s{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}t.sha256=(0,w.wrapConstructor)((()=>new s)),t.sha224=(0,w.wrapConstructor)((()=>new a))}));f(x),x.sha224;var B=x.sha256,A=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateObject=t.createHmacDrbg=t.bitMask=t.bitSet=t.bitGet=t.bitLen=t.utf8ToBytes=t.equalBytes=t.concatBytes=t.ensureBytes=t.numberToVarBytesBE=t.numberToBytesLE=t.numberToBytesBE=t.bytesToNumberLE=t.bytesToNumberBE=t.hexToBytes=t.hexToNumber=t.numberToHexUnpadded=t.bytesToHex=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const n=BigInt(0),r=BigInt(1),o=BigInt(2),i=e=>e instanceof Uint8Array,s=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function a(e){if(!i(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=s[e[n]];return t}function c(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function u(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function l(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let t=0;t<n.length;t++){const r=2*t,o=e.slice(r,r+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");n[t]=i}return n}function h(e,t){return l(e.toString(16).padStart(2*t,"0"))}function f(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let n=0;return e.forEach((e=>{if(!i(e))throw new Error("Uint8Array expected");t.set(e,n),n+=e.length})),t}t.bytesToHex=a,t.numberToHexUnpadded=c,t.hexToNumber=u,t.hexToBytes=l,t.bytesToNumberBE=function(e){return u(a(e))},t.bytesToNumberLE=function(e){if(!i(e))throw new Error("Uint8Array expected");return u(a(Uint8Array.from(e).reverse()))},t.numberToBytesBE=h,t.numberToBytesLE=function(e,t){return h(e,t).reverse()},t.numberToVarBytesBE=function(e){return l(c(e))},t.ensureBytes=function(e,t,n){let r;if("string"==typeof t)try{r=l(t)}catch(n){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${n}`)}else{if(!i(t))throw new Error(`${e} must be hex string or Uint8Array`);r=Uint8Array.from(t)}const o=r.length;if("number"==typeof n&&o!==n)throw new Error(`${e} expected ${n} bytes, got ${o}`);return r},t.concatBytes=f,t.equalBytes=function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},t.utf8ToBytes=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))},t.bitLen=function(e){let t;for(t=0;e>n;e>>=r,t+=1);return t},t.bitGet=function(e,t){return e>>BigInt(t)&r};t.bitSet=(e,t,o)=>e|(o?r:n)<<BigInt(t);t.bitMask=e=>(o<<BigInt(e-1))-r;const d=e=>new Uint8Array(e),p=e=>Uint8Array.from(e);t.createHmacDrbg=function(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=d(e),o=d(e),i=0;const s=()=>{r.fill(1),o.fill(0),i=0},a=(...e)=>n(o,r,...e),c=(e=d())=>{o=a(p([0]),e),r=a(),0!==e.length&&(o=a(p([1]),e),r=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=a();const t=r.slice();n.push(t),e+=r.length}return f(...n)};return(e,t)=>{let n;for(s(),c(e);!(n=t(u()));)c();return s(),n}};const y={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};t.validateObject=function(e,t,n={}){const r=(t,n,r)=>{const o=y[n];if("function"!=typeof o)throw new Error(`Invalid validator "${n}", expected function`);const i=e[t];if(!(r&&void 0===i||o(i,e)))throw new Error(`Invalid param ${String(t)}=${i} (${typeof i}), expected ${n}`)};for(const[e,n]of Object.entries(t))r(e,n,!1);for(const[e,t]of Object.entries(n))r(e,t,!0);return e}}));f(A),A.validateObject,A.createHmacDrbg,A.bitMask,A.bitSet,A.bitGet,A.bitLen,A.utf8ToBytes,A.equalBytes,A.concatBytes,A.ensureBytes,A.numberToVarBytesBE,A.numberToBytesLE,A.numberToBytesBE,A.bytesToNumberLE,A.bytesToNumberBE,A.hexToBytes,A.hexToNumber,A.numberToHexUnpadded,A.bytesToHex;var k=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.hashToPrivateScalar=t.FpSqrtEven=t.FpSqrtOdd=t.Field=t.nLength=t.FpIsSquare=t.FpDiv=t.FpInvertBatch=t.FpPow=t.validateField=t.isNegativeLE=t.FpSqrt=t.tonelliShanks=t.invert=t.pow2=t.pow=t.mod=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const n=BigInt(0),r=BigInt(1),o=BigInt(2),i=BigInt(3),s=BigInt(4),a=BigInt(5),c=BigInt(8);function u(e,t){const r=e%t;return r>=n?r:t+r}function l(e,t,o){if(o<=n||t<n)throw new Error("Expected power/modulo > 0");if(o===r)return n;let i=r;for(;t>n;)t&r&&(i=i*e%o),e=e*e%o,t>>=r;return i}function h(e,t){if(e===n||t<=n)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let o=u(e,t),i=t,s=n,a=r;for(;o!==n;){const e=i%o,t=s-a*(i/o);i=o,o=e,s=a,a=t}if(i!==r)throw new Error("invert: does not exist");return u(s,t)}function f(e){const t=(e-r)/o;let i,a,c;for(i=e-r,a=0;i%o===n;i/=o,a++);for(c=o;c<e&&l(c,t,e)!==e-r;c++);if(1===a){const t=(e+r)/s;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}const u=(i+r)/o;return function(e,n){if(e.pow(n,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let o=a,s=e.pow(e.mul(e.ONE,c),i),l=e.pow(n,u),h=e.pow(n,i);for(;!e.eql(h,e.ONE);){if(e.eql(h,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(h);t<o&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const n=e.pow(s,r<<BigInt(o-t-1));s=e.sqr(n),l=e.mul(l,n),h=e.mul(h,s),o=t}return l}}function d(e){if(e%s===i){const t=(e+r)/s;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%c===a){const t=(e-a)/c;return function(e,n){const r=e.mul(n,o),i=e.pow(r,t),s=e.mul(n,i),a=e.mul(e.mul(s,o),i),c=e.mul(s,e.sub(a,e.ONE));if(!e.eql(e.sqr(c),n))throw new Error("Cannot find square root");return c}}return f(e)}BigInt(9),BigInt(16),t.mod=u,t.pow=l,t.pow2=function(e,t,r){let o=e;for(;t-- >n;)o*=o,o%=r;return o},t.invert=h,t.tonelliShanks=f,t.FpSqrt=d;t.isNegativeLE=(e,t)=>(u(e,t)&r)===r;const p=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function y(e,t,o){if(o<n)throw new Error("Expected power > 0");if(o===n)return e.ONE;if(o===r)return t;let i=e.ONE,s=t;for(;o>n;)o&r&&(i=e.mul(i,s)),s=e.sqr(s),o>>=r;return i}function w(e,t){const n=new Array(t.length),r=t.reduce(((t,r,o)=>e.is0(r)?t:(n[o]=t,e.mul(t,r))),e.ONE),o=e.inv(r);return t.reduceRight(((t,r,o)=>e.is0(r)?t:(n[o]=e.mul(t,n[o]),e.mul(t,r))),o),n}function b(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}t.validateField=function(e){const t=p.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,A.validateObject)(e,t)},t.FpPow=y,t.FpInvertBatch=w,t.FpDiv=function(e,t,n){return e.mul(t,"bigint"==typeof n?h(n,e.ORDER):e.inv(n))},t.FpIsSquare=function(e){const t=(e.ORDER-r)/o;return n=>{const r=e.pow(n,t);return e.eql(r,e.ZERO)||e.eql(r,e.ONE)}},t.nLength=b,t.Field=function(e,t,o=!1,i={}){if(e<=n)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:s,nByteLength:a}=b(e,t);if(a>2048)throw new Error("Field lengths over 2048 bytes are not supported");const c=d(e),l=Object.freeze({ORDER:e,BITS:s,BYTES:a,MASK:(0,A.bitMask)(s),ZERO:n,ONE:r,create:t=>u(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return n<=t&&t<e},is0:e=>e===n,isOdd:e=>(e&r)===r,neg:t=>u(-t,e),eql:(e,t)=>e===t,sqr:t=>u(t*t,e),add:(t,n)=>u(t+n,e),sub:(t,n)=>u(t-n,e),mul:(t,n)=>u(t*n,e),pow:(e,t)=>y(l,e,t),div:(t,n)=>u(t*h(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>h(t,e),sqrt:i.sqrt||(e=>c(l,e)),invertBatch:e=>w(l,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>o?(0,A.numberToBytesLE)(e,a):(0,A.numberToBytesBE)(e,a),fromBytes:e=>{if(e.length!==a)throw new Error(`Fp.fromBytes: expected ${a}, got ${e.length}`);return o?(0,A.bytesToNumberLE)(e):(0,A.bytesToNumberBE)(e)}});return Object.freeze(l)},t.FpSqrtOdd=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const n=e.sqrt(t);return e.isOdd(n)?n:e.neg(n)},t.FpSqrtEven=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const n=e.sqrt(t);return e.isOdd(n)?e.neg(n):n},t.hashToPrivateScalar=function(e,t,n=!1){const o=(e=(0,A.ensureBytes)("privateHash",e)).length,i=b(t).nByteLength+8;if(i<24||o<i||o>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${o}`);return u(n?(0,A.bytesToNumberLE)(e):(0,A.bytesToNumberBE)(e),t-r)+r}}));f(k),k.hashToPrivateScalar,k.FpSqrtEven,k.FpSqrtOdd,k.Field,k.nLength,k.FpIsSquare,k.FpDiv,k.FpInvertBatch,k.FpPow,k.validateField,k.isNegativeLE,k.FpSqrt,k.tonelliShanks,k.invert,k.pow2,k.pow,k.mod;var S=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateBasic=t.wNAF=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const n=BigInt(0),r=BigInt(1);t.wNAF=function(e,t){const o=(e,t)=>{const n=t.negate();return e?n:t},i=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:o,unsafeLadder(t,o){let i=e.ZERO,s=t;for(;o>n;)o&r&&(i=i.add(s)),s=s.double(),o>>=r;return i},precomputeWindow(e,t){const{windows:n,windowSize:r}=i(t),o=[];let s=e,a=s;for(let e=0;e<n;e++){a=s,o.push(a);for(let e=1;e<r;e++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(t,n,s){const{windows:a,windowSize:c}=i(t);let u=e.ZERO,l=e.BASE;const h=BigInt(2**t-1),f=2**t,d=BigInt(t);for(let e=0;e<a;e++){const t=e*c;let i=Number(s&h);s>>=d,i>c&&(i-=f,s+=r);const a=t,p=t+Math.abs(i)-1,y=e%2!=0,w=i<0;0===i?l=l.add(o(y,n[a])):u=u.add(o(w,n[p]))}return{p:u,f:l}},wNAFCached(e,t,n,r){const o=e._WINDOW_SIZE||1;let i=t.get(e);return i||(i=this.precomputeWindow(e,o),1!==o&&t.set(e,r(i))),this.wNAF(o,i,n)}}},t.validateBasic=function(e){return(0,k.validateField)(e.Fp),(0,A.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,k.nLength)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}}));f(S),S.validateBasic,S.wNAF;var L=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.mapToCurveSimpleSWU=t.SWUFpSqrtRatio=t.weierstrass=t.weierstrassPoints=t.DER=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const n=A;const{bytesToNumberBE:r,hexToBytes:o}=A;t.DER={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){const{Err:n}=t.DER;if(e.length<2||2!==e[0])throw new n("Invalid signature integer tag");const o=e[1],i=e.subarray(2,o+2);if(!o||i.length!==o)throw new n("Invalid signature integer: wrong length");if(128&i[0])throw new n("Invalid signature integer: negative");if(0===i[0]&&!(128&i[1]))throw new n("Invalid signature integer: unnecessary leading zero");return{d:r(i),l:e.subarray(o+2)}},toSig(e){const{Err:n}=t.DER,r="string"==typeof e?o(e):e;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let i=r.length;if(i<2||48!=r[0])throw new n("Invalid signature tag");if(r[1]!==i-2)throw new n("Invalid signature: incorrect length");const{d:s,l:a}=t.DER._parseInt(r.subarray(2)),{d:c,l:u}=t.DER._parseInt(a);if(u.length)throw new n("Invalid signature: left bytes after parsing");return{r:s,s:c}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,n=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},r=t(n(e.s)),o=t(n(e.r)),i=r.length/2,s=o.length/2,a=n(i),c=n(s);return`30${n(s+i+4)}02${c}${o}02${a}${r}`}};const i=BigInt(0),s=BigInt(1),a=BigInt(2),c=BigInt(3),u=BigInt(4);function l(e){const t=function(e){const t=(0,S.validateBasic)(e);A.validateObject(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:o}=t;if(n){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,o=t.toBytes||((e,t,n)=>{const o=t.toAffine();return A.concatBytes(Uint8Array.from([4]),r.toBytes(o.x),r.toBytes(o.y))}),a=t.fromBytes||(e=>{const t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function u(e){const{a:n,b:o}=t,i=r.sqr(e),s=r.mul(i,e);return r.add(r.add(s,r.mul(e,n)),o)}if(!r.eql(r.sqr(t.Gy),u(t.Gx)))throw new Error("bad generator point: equation left != right");function l(e){return"bigint"==typeof e&&i<e&&e<t.n}function h(e){if(!l(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function f(e){const{allowedPrivateKeyLengths:r,nByteLength:o,wrapPrivateKey:i,n:s}=t;if(r&&"bigint"!=typeof e){if(e instanceof Uint8Array&&(e=A.bytesToHex(e)),"string"!=typeof e||!r.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*o,"0")}let a;try{a="bigint"==typeof e?e:A.bytesToNumberBE((0,n.ensureBytes)("private key",e,o))}catch(t){throw new Error(`private key must be ${o} bytes, hex or bigint, not ${typeof e}`)}return i&&(a=k.mod(a,s)),h(a),a}const d=new Map;function p(e){if(!(e instanceof y))throw new Error("ProjectivePoint expected")}class y{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required")}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof y)throw new Error("projective point not allowed");const o=e=>r.eql(e,r.ZERO);return o(t)&&o(n)?y.ZERO:new y(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(y.fromAffine)}static fromHex(e){const t=y.fromAffine(a((0,n.ensureBytes)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return y.BASE.multiply(f(e))}_setWindowSize(e){this._WINDOW_SIZE=e,d.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:e,y:n}=this.toAffine();if(!r.isValid(e)||!r.isValid(n))throw new Error("bad point: x or y not FE");const o=r.sqr(n),i=u(e);if(!r.eql(o,i))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){p(e);const{px:t,py:n,pz:o}=this,{px:i,py:s,pz:a}=e,c=r.eql(r.mul(t,a),r.mul(i,o)),u=r.eql(r.mul(n,a),r.mul(s,o));return c&&u}negate(){return new y(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,o=r.mul(n,c),{px:i,py:s,pz:a}=this;let u=r.ZERO,l=r.ZERO,h=r.ZERO,f=r.mul(i,i),d=r.mul(s,s),p=r.mul(a,a),w=r.mul(i,s);return w=r.add(w,w),h=r.mul(i,a),h=r.add(h,h),u=r.mul(e,h),l=r.mul(o,p),l=r.add(u,l),u=r.sub(d,l),l=r.add(d,l),l=r.mul(u,l),u=r.mul(w,u),h=r.mul(o,h),p=r.mul(e,p),w=r.sub(f,p),w=r.mul(e,w),w=r.add(w,h),h=r.add(f,f),f=r.add(h,f),f=r.add(f,p),f=r.mul(f,w),l=r.add(l,f),p=r.mul(s,a),p=r.add(p,p),f=r.mul(p,w),u=r.sub(u,f),h=r.mul(p,d),h=r.add(h,h),h=r.add(h,h),new y(u,l,h)}add(e){p(e);const{px:n,py:o,pz:i}=this,{px:s,py:a,pz:u}=e;let l=r.ZERO,h=r.ZERO,f=r.ZERO;const d=t.a,w=r.mul(t.b,c);let b=r.mul(n,s),g=r.mul(o,a),m=r.mul(i,u),v=r.add(n,o),E=r.add(s,a);v=r.mul(v,E),E=r.add(b,g),v=r.sub(v,E),E=r.add(n,i);let x=r.add(s,u);return E=r.mul(E,x),x=r.add(b,m),E=r.sub(E,x),x=r.add(o,i),l=r.add(a,u),x=r.mul(x,l),l=r.add(g,m),x=r.sub(x,l),f=r.mul(d,E),l=r.mul(w,m),f=r.add(l,f),l=r.sub(g,f),f=r.add(g,f),h=r.mul(l,f),g=r.add(b,b),g=r.add(g,b),m=r.mul(d,m),E=r.mul(w,E),g=r.add(g,m),m=r.sub(b,m),m=r.mul(d,m),E=r.add(E,m),b=r.mul(g,E),h=r.add(h,b),b=r.mul(x,E),l=r.mul(v,l),l=r.sub(l,b),b=r.mul(v,g),f=r.mul(x,f),f=r.add(f,b),new y(l,h,f)}subtract(e){return this.add(e.negate())}is0(){return this.equals(y.ZERO)}wNAF(e){return b.wNAFCached(this,d,e,(e=>{const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(y.fromAffine)}))}multiplyUnsafe(e){const n=y.ZERO;if(e===i)return n;if(h(e),e===s)return this;const{endo:o}=t;if(!o)return b.unsafeLadder(this,e);let{k1neg:a,k1:c,k2neg:u,k2:l}=o.splitScalar(e),f=n,d=n,p=this;for(;c>i||l>i;)c&s&&(f=f.add(p)),l&s&&(d=d.add(p)),p=p.double(),c>>=s,l>>=s;return a&&(f=f.negate()),u&&(d=d.negate()),d=new y(r.mul(d.px,o.beta),d.py,d.pz),f.add(d)}multiply(e){h(e);let n,o,i=e;const{endo:s}=t;if(s){const{k1neg:e,k1:t,k2neg:a,k2:c}=s.splitScalar(i);let{p:u,f:l}=this.wNAF(t),{p:h,f:f}=this.wNAF(c);u=b.constTimeNegate(e,u),h=b.constTimeNegate(a,h),h=new y(r.mul(h.px,s.beta),h.py,h.pz),n=u.add(h),o=l.add(f)}else{const{p:e,f:t}=this.wNAF(i);n=e,o=t}return y.normalizeZ([n,o])[0]}multiplyAndAddUnsafe(e,t,n){const r=y.BASE,o=(e,t)=>t!==i&&t!==s&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),a=o(this,t).add(o(e,n));return a.is0()?void 0:a}toAffine(e){const{px:t,py:n,pz:o}=this,i=this.is0();null==e&&(e=i?r.ONE:r.inv(o));const s=r.mul(t,e),a=r.mul(n,e),c=r.mul(o,e);if(i)return{x:r.ZERO,y:r.ZERO};if(!r.eql(c,r.ONE))throw new Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===s)return!0;if(n)return n(y,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===s?this:n?n(y,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),o(y,this,e)}toHex(e=!0){return A.bytesToHex(this.toRawBytes(e))}}y.BASE=new y(t.Gx,t.Gy,r.ONE),y.ZERO=new y(r.ZERO,r.ONE,r.ZERO);const w=t.nBitLength,b=(0,S.wNAF)(y,t.endo?Math.ceil(w/2):w);return{CURVE:t,ProjectivePoint:y,normPrivateKeyToScalar:f,weierstrassEquation:u,isWithinCurveOrder:l}}function h(e,t){const n=e.ORDER;let r=i;for(let e=n-s;e%a===i;e/=a)r+=s;const o=r,l=a<<o-s-s,h=l*a,f=(n-s)/h,d=(f-s)/a,p=h-s,y=l,w=e.pow(t,f),b=e.pow(t,(f+s)/a);let g=(t,n)=>{let r=w,i=e.pow(n,p),c=e.sqr(i);c=e.mul(c,n);let u=e.mul(t,c);u=e.pow(u,d),u=e.mul(u,i),i=e.mul(u,n),c=e.mul(u,t);let l=e.mul(c,i);u=e.pow(l,y);let h=e.eql(u,e.ONE);i=e.mul(c,b),u=e.mul(l,r),c=e.cmov(i,c,h),l=e.cmov(u,l,h);for(let t=o;t>s;t--){let n=t-a;n=a<<n-s;let o=e.pow(l,n);const u=e.eql(o,e.ONE);i=e.mul(c,r),r=e.mul(r,r),o=e.mul(l,r),c=e.cmov(i,c,u),l=e.cmov(o,l,u)}return{isValid:h,value:c}};if(e.ORDER%u===c){const n=(e.ORDER-c)/u,r=e.sqrt(e.neg(t));g=(t,o)=>{let i=e.sqr(o);const s=e.mul(t,o);i=e.mul(i,s);let a=e.pow(i,n);a=e.mul(a,s);const c=e.mul(a,r),u=e.mul(e.sqr(a),o),l=e.eql(u,t);return{isValid:l,value:e.cmov(c,a,l)}}}return g}t.weierstrassPoints=l,t.weierstrass=function(e){const r=function(e){const t=(0,S.validateBasic)(e);return A.validateObject(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:o,n:a}=r,c=o.BYTES+1,u=2*o.BYTES+1;function h(e){return k.mod(e,a)}function f(e){return k.invert(e,a)}const{ProjectivePoint:d,normPrivateKeyToScalar:p,weierstrassEquation:y,isWithinCurveOrder:w}=l({...r,toBytes(e,t,n){const r=t.toAffine(),i=o.toBytes(r.x),s=A.concatBytes;return n?s(Uint8Array.from([t.hasEvenY()?2:3]),i):s(Uint8Array.from([4]),i,o.toBytes(r.y))},fromBytes(e){const t=e.length,n=e[0],r=e.subarray(1);if(t!==c||2!==n&&3!==n){if(t===u&&4===n){return{x:o.fromBytes(r.subarray(0,o.BYTES)),y:o.fromBytes(r.subarray(o.BYTES,2*o.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${c} compressed bytes or ${u} uncompressed bytes`)}{const e=A.bytesToNumberBE(r);if(!(i<(a=e)&&a<o.ORDER))throw new Error("Point is not on curve");const t=y(e);let c=o.sqrt(t);return 1==(1&n)!==((c&s)===s)&&(c=o.neg(c)),{x:e,y:c}}var a}}),b=e=>A.bytesToHex(A.numberToBytesBE(e,r.nByteLength));function g(e){return e>a>>s}const m=(e,t,n)=>A.bytesToNumberBE(e.slice(t,n));class v{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){const t=r.nByteLength;return e=(0,n.ensureBytes)("compactSignature",e,2*t),new v(m(e,0,t),m(e,t,2*t))}static fromDER(e){const{r:r,s:o}=t.DER.toSig((0,n.ensureBytes)("DER",e));return new v(r,o)}assertValidity(){if(!w(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!w(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new v(this.r,this.s,e)}recoverPublicKey(e){const{r:t,s:i,recovery:s}=this,a=L((0,n.ensureBytes)("msgHash",e));if(null==s||![0,1,2,3].includes(s))throw new Error("recovery id invalid");const c=2===s||3===s?t+r.n:t;if(c>=o.ORDER)throw new Error("recovery id 2 or 3 invalid");const u=0==(1&s)?"02":"03",l=d.fromHex(u+b(c)),p=f(c),y=h(-a*p),w=h(i*p),g=d.BASE.multiplyAndAddUnsafe(l,y,w);if(!g)throw new Error("point at infinify");return g.assertValidity(),g}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new v(this.r,h(-this.s),this.recovery):this}toDERRawBytes(){return A.hexToBytes(this.toDERHex())}toDERHex(){return t.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return A.hexToBytes(this.toCompactHex())}toCompactHex(){return b(this.r)+b(this.s)}}const E={isValidPrivateKey(e){try{return p(e),!0}catch(e){return!1}},normPrivateKeyToScalar:p,randomPrivateKey:()=>{const e=r.randomBytes(o.BYTES+8),t=k.hashToPrivateScalar(e,a);return A.numberToBytesBE(t,r.nByteLength)},precompute:(e=8,t=d.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function x(e){const t=e instanceof Uint8Array,n="string"==typeof e,r=(t||n)&&e.length;return t?r===c||r===u:n?r===2*c||r===2*u:e instanceof d}const B=r.bits2int||function(e){const t=A.bytesToNumberBE(e),n=8*e.length-r.nBitLength;return n>0?t>>BigInt(n):t},L=r.bits2int_modN||function(e){return h(B(e))},T=A.bitMask(r.nBitLength);function O(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(!(i<=e&&e<T))throw new Error(`bigint expected < 2^${r.nBitLength}`);return A.numberToBytesBE(e,r.nByteLength)}function H(e,t,a=_){if(["recovered","canonical"].some((e=>e in a)))throw new Error("sign() legacy options not supported");const{hash:c,randomBytes:u}=r;let{lowS:l,prehash:y,extraEntropy:b}=a;null==l&&(l=!0),e=(0,n.ensureBytes)("msgHash",e),y&&(e=(0,n.ensureBytes)("prehashed msgHash",c(e)));const m=L(e),E=p(t),x=[O(E),O(m)];if(null!=b){const e=!0===b?u(o.BYTES):b;x.push((0,n.ensureBytes)("extraEntropy",e,o.BYTES))}const k=A.concatBytes(...x),S=m;return{seed:k,k2sig:function(e){const t=B(e);if(!w(t))return;const n=f(t),r=d.BASE.multiply(t).toAffine(),o=h(r.x);if(o===i)return;const a=h(n*h(S+o*E));if(a===i)return;let c=(r.x===o?0:2)|Number(r.y&s),u=a;return l&&g(a)&&(u=function(e){return g(e)?h(-e):e}(a),c^=1),new v(o,u,c)}}}const _={lowS:r.lowS,prehash:!1},I={lowS:r.lowS,prehash:!1};return d.BASE._setWindowSize(8),{CURVE:r,getPublicKey:function(e,t=!0){return d.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,n=!0){if(x(e))throw new Error("first arg must be private key");if(!x(t))throw new Error("second arg must be public key");return d.fromHex(t).multiply(p(e)).toRawBytes(n)},sign:function(e,t,n=_){const{seed:o,k2sig:i}=H(e,t,n),s=r;return A.createHmacDrbg(s.hash.outputLen,s.nByteLength,s.hmac)(o,i)},verify:function(e,o,i,s=I){const a=e;if(o=(0,n.ensureBytes)("msgHash",o),i=(0,n.ensureBytes)("publicKey",i),"strict"in s)throw new Error("options.strict was renamed to lowS");const{lowS:c,prehash:u}=s;let l,p;try{if("string"==typeof a||a instanceof Uint8Array)try{l=v.fromDER(a)}catch(e){if(!(e instanceof t.DER.Err))throw e;l=v.fromCompact(a)}else{if("object"!=typeof a||"bigint"!=typeof a.r||"bigint"!=typeof a.s)throw new Error("PARSE");{const{r:e,s:t}=a;l=new v(e,t)}}p=d.fromHex(i)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(c&&l.hasHighS())return!1;u&&(o=r.hash(o));const{r:y,s:w}=l,b=L(o),g=f(w),m=h(b*g),E=h(y*g),x=d.BASE.multiplyAndAddUnsafe(p,m,E)?.toAffine();return!!x&&h(x.x)===y},ProjectivePoint:d,Signature:v,utils:E}},t.SWUFpSqrtRatio=h,t.mapToCurveSimpleSWU=function(e,t){if(k.validateField(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=h(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let o,i,s,a,c,u,l,h;o=e.sqr(r),o=e.mul(o,t.Z),i=e.sqr(o),i=e.add(i,o),s=e.add(i,e.ONE),s=e.mul(s,t.B),a=e.cmov(t.Z,e.neg(i),!e.eql(i,e.ZERO)),a=e.mul(a,t.A),i=e.sqr(s),u=e.sqr(a),c=e.mul(u,t.A),i=e.add(i,c),i=e.mul(i,s),u=e.mul(u,a),c=e.mul(u,t.B),i=e.add(i,c),l=e.mul(o,s);const{isValid:f,value:d}=n(i,u);h=e.mul(o,r),h=e.mul(h,d),l=e.cmov(l,s,f),h=e.cmov(h,d,f);const p=e.isOdd(r)===e.isOdd(h);return h=e.cmov(e.neg(h),h,p),l=e.div(l,a),{x:l,y:h}}}}));f(L),L.mapToCurveSimpleSWU,L.SWUFpSqrtRatio,L.weierstrass,L.weierstrassPoints,L.DER;var T=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.createHasher=t.isogenyMap=t.hash_to_field=t.expand_message_xof=t.expand_message_xmd=void 0;const n=A.bytesToNumberBE;function r(e,t){if(e<0||e>=1<<8*t)throw new Error(`bad I2OSP call: value=${e} length=${t}`);const n=Array.from({length:t}).fill(0);for(let r=t-1;r>=0;r--)n[r]=255&e,e>>>=8;return new Uint8Array(n)}function o(e,t){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]^t[r];return n}function i(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected")}function s(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function a(e,t,n,a){i(e),i(t),s(n),t.length>255&&(t=a((0,A.concatBytes)((0,A.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));const{outputLen:c,blockLen:u}=a,l=Math.ceil(n/c);if(l>255)throw new Error("Invalid xmd length");const h=(0,A.concatBytes)(t,r(t.length,1)),f=r(0,u),d=r(n,2),p=new Array(l),y=a((0,A.concatBytes)(f,e,d,r(0,1),h));p[0]=a((0,A.concatBytes)(y,r(1,1),h));for(let e=1;e<=l;e++){const t=[o(y,p[e-1]),r(e+1,1),h];p[e]=a((0,A.concatBytes)(...t))}return(0,A.concatBytes)(...p).slice(0,n)}function c(e,t,n,o,a){if(i(e),i(t),s(n),t.length>255){const e=Math.ceil(2*o/8);t=a.create({dkLen:e}).update((0,A.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(n>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return a.create({dkLen:n}).update(e).update(r(n,2)).update(t).update(r(t.length,1)).digest()}function u(e,t,r){(0,A.validateObject)(r,{DST:"string",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:o,k:u,m:l,hash:h,expand:f,DST:d}=r;i(e),s(t);const p=function(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return(0,A.utf8ToBytes)(e);throw new Error("DST must be Uint8Array or string")}(d),y=o.toString(2).length,w=Math.ceil((y+u)/8),b=t*l*w;let g;if("xmd"===f)g=a(e,p,b,h);else if("xof"===f)g=c(e,p,b,u,h);else{if("_internal_pass"!==f)throw new Error('expand must be "xmd" or "xof"');g=e}const m=new Array(t);for(let e=0;e<t;e++){const t=new Array(l);for(let r=0;r<l;r++){const i=w*(r+e*l),s=g.subarray(i,i+w);t[r]=(0,k.mod)(n(s),o)}m[e]=t}return m}t.expand_message_xmd=a,t.expand_message_xof=c,t.hash_to_field=u,t.isogenyMap=function(e,t){const n=t.map((e=>Array.from(e).reverse()));return(t,r)=>{const[o,i,s,a]=n.map((n=>n.reduce(((n,r)=>e.add(e.mul(n,t),r)))));return t=e.div(o,i),r=e.mul(r,e.div(s,a)),{x:t,y:r}}},t.createHasher=function(e,t,n){if("function"!=typeof t)throw new Error("mapToCurve() must be defined");return{hashToCurve(r,o){const i=u(r,2,{...n,DST:n.DST,...o}),s=e.fromAffine(t(i[0])),a=e.fromAffine(t(i[1])),c=s.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,o){const i=u(r,1,{...n,DST:n.encodeDST,...o}),s=e.fromAffine(t(i[0])).clearCofactor();return s.assertValidity(),s}}}}));f(T),T.createHasher,T.isogenyMap,T.hash_to_field,T.expand_message_xof,T.expand_message_xmd;var O=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;class n extends w.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,p.default.hash(e);const n=(0,w.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,o=new Uint8Array(r);o.set(n.length>r?e.create().update(n).digest():n);for(let e=0;e<o.length;e++)o[e]^=54;this.iHash.update(o),this.oHash=e.create();for(let e=0;e<o.length;e++)o[e]^=106;this.oHash.update(o),o.fill(0)}update(e){return p.default.exists(this),this.iHash.update(e),this}digestInto(e){p.default.exists(this),p.default.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:o,blockLen:i,outputLen:s}=this;return e.finished=r,e.destroyed=o,e.blockLen=i,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=n;t.hmac=(e,t,r)=>new n(e,t).update(r).digest(),t.hmac.create=(e,t)=>new n(e,t)}));f(O);var H=O.hmac;O.HMAC;var _=d((function(e,t){
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
function n(e){return{hash:e,hmac:(t,...n)=>(0,O.hmac)(e,t,(0,w.concatBytes)(...n)),randomBytes:w.randomBytes}}Object.defineProperty(t,"__esModule",{value:!0}),t.createCurve=t.getHash=void 0,t.getHash=n,t.createCurve=function(e,t){const r=t=>(0,L.weierstrass)({...e,...n(t)});return Object.freeze({...r(t),create:r})}}));f(_),_.createCurve,_.getHash;var I=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.encodeToCurve=t.hashToCurve=t.schnorr=t.secp256k1=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const n=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),r=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),o=BigInt(1),i=BigInt(2),s=(e,t)=>(e+t/i)/t;function a(e){const t=n,r=BigInt(3),o=BigInt(6),s=BigInt(11),a=BigInt(22),u=BigInt(23),l=BigInt(44),h=BigInt(88),f=e*e*e%t,d=f*f*e%t,p=(0,k.pow2)(d,r,t)*d%t,y=(0,k.pow2)(p,r,t)*d%t,w=(0,k.pow2)(y,i,t)*f%t,b=(0,k.pow2)(w,s,t)*w%t,g=(0,k.pow2)(b,a,t)*b%t,m=(0,k.pow2)(g,l,t)*g%t,v=(0,k.pow2)(m,h,t)*m%t,E=(0,k.pow2)(v,l,t)*g%t,x=(0,k.pow2)(E,r,t)*d%t,B=(0,k.pow2)(x,u,t)*b%t,A=(0,k.pow2)(B,o,t)*f%t,S=(0,k.pow2)(A,i,t);if(!c.eql(c.sqr(S),e))throw new Error("Cannot find square root");return S}const c=(0,k.Field)(n,void 0,void 0,{sqrt:a});t.secp256k1=(0,_.createCurve)({a:BigInt(0),b:BigInt(7),Fp:c,n:r,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=r,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),i=-o*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),a=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),c=n,u=BigInt("0x100000000000000000000000000000000"),l=s(c*e,t),h=s(-i*e,t);let f=(0,k.mod)(e-l*n-h*a,t),d=(0,k.mod)(-l*i-h*c,t);const p=f>u,y=d>u;if(p&&(f=t-f),y&&(d=t-d),f>u||d>u)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:p,k1:f,k2neg:y,k2:d}}}},x.sha256);const u=BigInt(0),l=e=>"bigint"==typeof e&&u<e&&e<n,h=e=>"bigint"==typeof e&&u<e&&e<r,f={};function d(e,...t){let n=f[e];if(void 0===n){const t=(0,x.sha256)(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=(0,A.concatBytes)(t,t),f[e]=n}return(0,x.sha256)((0,A.concatBytes)(n,...t))}const p=e=>e.toRawBytes(!0).slice(1),y=e=>(0,A.numberToBytesBE)(e,32),b=e=>(0,k.mod)(e,n),g=e=>(0,k.mod)(e,r),m=t.secp256k1.ProjectivePoint,v=(e,t,n)=>m.BASE.multiplyAndAddUnsafe(e,t,n);function E(e){let n=t.secp256k1.utils.normPrivateKeyToScalar(e),r=m.fromPrivateKey(n);return{scalar:r.hasEvenY()?n:g(-n),bytes:p(r)}}function B(e){if(!l(e))throw new Error("bad x: need 0 < x < p");const t=b(e*e);let n=a(b(t*e+BigInt(7)));n%i!==u&&(n=b(-n));const r=new m(e,n,o);return r.assertValidity(),r}function S(...e){return g((0,A.bytesToNumberBE)(d("BIP0340/challenge",...e)))}function O(e){return E(e).bytes}function H(e,t,n=(0,w.randomBytes)(32)){const r=(0,A.ensureBytes)("message",e),{bytes:o,scalar:i}=E(t),s=(0,A.ensureBytes)("auxRand",n,32),a=y(i^(0,A.bytesToNumberBE)(d("BIP0340/aux",s))),c=d("BIP0340/nonce",a,o,r),l=g((0,A.bytesToNumberBE)(c));if(l===u)throw new Error("sign failed: k is zero");const{bytes:h,scalar:f}=E(l),p=S(h,o,r),b=new Uint8Array(64);if(b.set(h,0),b.set(y(g(f+p*i)),32),!I(b,r,o))throw new Error("sign: Invalid signature produced");return b}function I(e,t,n){const r=(0,A.ensureBytes)("signature",e,64),o=(0,A.ensureBytes)("message",t),i=(0,A.ensureBytes)("publicKey",n,32);try{const e=B((0,A.bytesToNumberBE)(i)),t=(0,A.bytesToNumberBE)(r.subarray(0,32));if(!l(t))return!1;const n=(0,A.bytesToNumberBE)(r.subarray(32,64));if(!h(n))return!1;const s=S(y(t),p(e),o),a=v(e,n,g(-s));return!(!a||!a.hasEvenY()||a.toAffine().x!==t)}catch(e){return!1}}t.schnorr={getPublicKey:O,sign:H,verify:I,utils:{randomPrivateKey:t.secp256k1.utils.randomPrivateKey,lift_x:B,pointToBytes:p,numberToBytesBE:A.numberToBytesBE,bytesToNumberBE:A.bytesToNumberBE,taggedHash:d,mod:k.mod}};const U=(()=>(0,T.isogenyMap)(c,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map((e=>e.map((e=>BigInt(e)))))))(),C=(()=>(0,L.mapToCurveSimpleSWU)(c,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:c.create(BigInt("-11"))}))(),N=(()=>(0,T.createHasher)(t.secp256k1.ProjectivePoint,(e=>{const{x:t,y:n}=C(c.create(e[0]));return U(t,n)}),{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:c.ORDER,m:1,k:128,expand:"xmd",hash:x.sha256}))();t.hashToCurve=N.hashToCurve,t.encodeToCurve=N.encodeToCurve}));f(I),I.encodeToCurve,I.hashToCurve;var U=I.schnorr,C=I.secp256k1;
/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */
function N(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function R(...e){const t=(e,t)=>n=>e(t(n));return{encode:Array.from(e).reverse().reduce(((e,n)=>e?t(e,n.encode):n.encode),void 0),decode:e.reduce(((e,n)=>e?t(e,n.decode):n.decode),void 0)}}function P(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(N(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const n=e.indexOf(t);if(-1===n)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n}))}}}function j(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function F(e,t="="){if(N(e),"string"!=typeof t)throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!=typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!=typeof e)throw new Error(`padding.decode: non-string input=${e}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function q(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function D(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const o=[],i=Array.from(e);for(i.forEach((e=>{if(N(e),e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,s=!0;for(let o=r;o<i.length;o++){const a=i[o],c=t*e+a;if(!Number.isSafeInteger(c)||t*e/t!==e||c-a!=t*e)throw new Error("convertRadix: carry overflow");if(e=c%n,i[o]=Math.floor(c/n),!Number.isSafeInteger(i[o])||i[o]*n+e!==c)throw new Error("convertRadix: carry overflow");s&&(i[o]?s=!1:r=o)}if(o.push(e),s)break}for(let t=0;t<e.length-1&&0===e[t];t++)o.push(0);return o.reverse()}const $=(e,t)=>t?$(t,e%t):e,M=(e,t)=>e+(t-$(e,t));function K(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(M(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${M(t,n)}`);let o=0,i=0;const s=2**n-1,a=[];for(const r of e){if(N(r),r>=2**t)throw new Error(`convertRadix2: invalid data word=${r} from=${t}`);if(o=o<<t|r,i+t>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${t}`);for(i+=t;i>=n;i-=n)a.push((o>>i-n&s)>>>0);o&=2**i-1}if(o=o<<n-i&s,!r&&i>=t)throw new Error("Excess padding");if(!r&&o)throw new Error(`Non-zero padding: ${o}`);return r&&i>0&&a.push(o>>>0),a}function V(e,t=!1){if(N(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(M(8,e)>32||M(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return K(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(K(n,e,8,t))}}}function z(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(e){}}}const W=R(V(4),P("0123456789ABCDEF"),j("")),G=R(V(5),P("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),F(5),j(""));R(V(5),P("0123456789ABCDEFGHIJKLMNOPQRSTUV"),F(5),j("")),R(V(5),P("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),j(""),q((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))));const Z=R(V(6),P("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),F(6),j("")),Y=R(V(6),P("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),F(6),j("")),J=e=>{return R((N(t=58),{encode:e=>{if(!(e instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return D(Array.from(e),256,t)},decode:e=>{if(!Array.isArray(e)||e.length&&"number"!=typeof e[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(D(e,t,256))}}),P(e),j(""));var t},X=J("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");J("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),J("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const Q=[0,2,3,5,6,7,9,10,11],ee={encode(e){let t="";for(let n=0;n<e.length;n+=8){const r=e.subarray(n,n+8);t+=X.encode(r).padStart(Q[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const r=e.slice(n,n+11),o=Q.indexOf(r.length),i=X.decode(r);for(let e=0;e<i.length-o;e++)if(0!==i[e])throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(i.slice(i.length-o)))}return Uint8Array.from(t)}},te=R(P("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),j("")),ne=[996825010,642813549,513874426,1027748829,705979059];function re(e){const t=e>>25;let n=(33554431&e)<<5;for(let e=0;e<ne.length;e++)1==(t>>e&1)&&(n^=ne[e]);return n}function oe(e,t,n=1){const r=e.length;let o=1;for(let t=0;t<r;t++){const n=e.charCodeAt(t);if(n<33||n>126)throw new Error(`Invalid prefix (${e})`);o=re(o)^n>>5}o=re(o);for(let t=0;t<r;t++)o=re(o)^31&e.charCodeAt(t);for(let e of t)o=re(o)^e;for(let e=0;e<6;e++)o=re(o);return o^=n,te.encode(K([o%2**30],30,5,!1))}function ie(e){const t="bech32"===e?1:734539939,n=V(5),r=n.decode,o=n.encode,i=z(r);function s(e,n=90){if("string"!=typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==n&&e.length>n)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${n})`);const r=e.toLowerCase();if(e!==r&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const o=(e=r).lastIndexOf("1");if(0===o||-1===o)throw new Error('Letter "1" must be present between prefix and data only');const i=e.slice(0,o),s=e.slice(o+1);if(s.length<6)throw new Error("Data must be at least 6 characters long");const a=te.decode(s).slice(0,-6),c=oe(i,a,t);if(!s.endsWith(c))throw new Error(`Invalid checksum in ${e}: expected "${c}"`);return{prefix:i,words:a}}return{encode:function(e,n,r=90){if("string"!=typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof n);const o=e.length+7+n.length;if(!1!==r&&o>r)throw new TypeError(`Length ${o} exceeds limit ${r}`);return`${e=e.toLowerCase()}1${te.encode(n)}${oe(e,n,t)}`},decode:s,decodeToBytes:function(e){const{prefix:t,words:n}=s(e,!1);return{prefix:t,words:n,bytes:r(n)}},decodeUnsafe:z(s),fromWords:r,fromWordsUnsafe:i,toWords:o}}const se=ie("bech32");ie("bech32m");const ae={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)},ce={utf8:ae,hex:R(V(4),P("0123456789abcdef"),j(""),q((e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}))),base16:W,base32:G,base64:Z,base64url:Y,base58:X,base58xmr:ee};Object.keys(ce).join(", ");var ue=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.wordlist=void 0,t.wordlist="abandon\nability\nable\nabout\nabove\nabsent\nabsorb\nabstract\nabsurd\nabuse\naccess\naccident\naccount\naccuse\nachieve\nacid\nacoustic\nacquire\nacross\nact\naction\nactor\nactress\nactual\nadapt\nadd\naddict\naddress\nadjust\nadmit\nadult\nadvance\nadvice\naerobic\naffair\nafford\nafraid\nagain\nage\nagent\nagree\nahead\naim\nair\nairport\naisle\nalarm\nalbum\nalcohol\nalert\nalien\nall\nalley\nallow\nalmost\nalone\nalpha\nalready\nalso\nalter\nalways\namateur\namazing\namong\namount\namused\nanalyst\nanchor\nancient\nanger\nangle\nangry\nanimal\nankle\nannounce\nannual\nanother\nanswer\nantenna\nantique\nanxiety\nany\napart\napology\nappear\napple\napprove\napril\narch\narctic\narea\narena\nargue\narm\narmed\narmor\narmy\naround\narrange\narrest\narrive\narrow\nart\nartefact\nartist\nartwork\nask\naspect\nassault\nasset\nassist\nassume\nasthma\nathlete\natom\nattack\nattend\nattitude\nattract\nauction\naudit\naugust\naunt\nauthor\nauto\nautumn\naverage\navocado\navoid\nawake\naware\naway\nawesome\nawful\nawkward\naxis\nbaby\nbachelor\nbacon\nbadge\nbag\nbalance\nbalcony\nball\nbamboo\nbanana\nbanner\nbar\nbarely\nbargain\nbarrel\nbase\nbasic\nbasket\nbattle\nbeach\nbean\nbeauty\nbecause\nbecome\nbeef\nbefore\nbegin\nbehave\nbehind\nbelieve\nbelow\nbelt\nbench\nbenefit\nbest\nbetray\nbetter\nbetween\nbeyond\nbicycle\nbid\nbike\nbind\nbiology\nbird\nbirth\nbitter\nblack\nblade\nblame\nblanket\nblast\nbleak\nbless\nblind\nblood\nblossom\nblouse\nblue\nblur\nblush\nboard\nboat\nbody\nboil\nbomb\nbone\nbonus\nbook\nboost\nborder\nboring\nborrow\nboss\nbottom\nbounce\nbox\nboy\nbracket\nbrain\nbrand\nbrass\nbrave\nbread\nbreeze\nbrick\nbridge\nbrief\nbright\nbring\nbrisk\nbroccoli\nbroken\nbronze\nbroom\nbrother\nbrown\nbrush\nbubble\nbuddy\nbudget\nbuffalo\nbuild\nbulb\nbulk\nbullet\nbundle\nbunker\nburden\nburger\nburst\nbus\nbusiness\nbusy\nbutter\nbuyer\nbuzz\ncabbage\ncabin\ncable\ncactus\ncage\ncake\ncall\ncalm\ncamera\ncamp\ncan\ncanal\ncancel\ncandy\ncannon\ncanoe\ncanvas\ncanyon\ncapable\ncapital\ncaptain\ncar\ncarbon\ncard\ncargo\ncarpet\ncarry\ncart\ncase\ncash\ncasino\ncastle\ncasual\ncat\ncatalog\ncatch\ncategory\ncattle\ncaught\ncause\ncaution\ncave\nceiling\ncelery\ncement\ncensus\ncentury\ncereal\ncertain\nchair\nchalk\nchampion\nchange\nchaos\nchapter\ncharge\nchase\nchat\ncheap\ncheck\ncheese\nchef\ncherry\nchest\nchicken\nchief\nchild\nchimney\nchoice\nchoose\nchronic\nchuckle\nchunk\nchurn\ncigar\ncinnamon\ncircle\ncitizen\ncity\ncivil\nclaim\nclap\nclarify\nclaw\nclay\nclean\nclerk\nclever\nclick\nclient\ncliff\nclimb\nclinic\nclip\nclock\nclog\nclose\ncloth\ncloud\nclown\nclub\nclump\ncluster\nclutch\ncoach\ncoast\ncoconut\ncode\ncoffee\ncoil\ncoin\ncollect\ncolor\ncolumn\ncombine\ncome\ncomfort\ncomic\ncommon\ncompany\nconcert\nconduct\nconfirm\ncongress\nconnect\nconsider\ncontrol\nconvince\ncook\ncool\ncopper\ncopy\ncoral\ncore\ncorn\ncorrect\ncost\ncotton\ncouch\ncountry\ncouple\ncourse\ncousin\ncover\ncoyote\ncrack\ncradle\ncraft\ncram\ncrane\ncrash\ncrater\ncrawl\ncrazy\ncream\ncredit\ncreek\ncrew\ncricket\ncrime\ncrisp\ncritic\ncrop\ncross\ncrouch\ncrowd\ncrucial\ncruel\ncruise\ncrumble\ncrunch\ncrush\ncry\ncrystal\ncube\nculture\ncup\ncupboard\ncurious\ncurrent\ncurtain\ncurve\ncushion\ncustom\ncute\ncycle\ndad\ndamage\ndamp\ndance\ndanger\ndaring\ndash\ndaughter\ndawn\nday\ndeal\ndebate\ndebris\ndecade\ndecember\ndecide\ndecline\ndecorate\ndecrease\ndeer\ndefense\ndefine\ndefy\ndegree\ndelay\ndeliver\ndemand\ndemise\ndenial\ndentist\ndeny\ndepart\ndepend\ndeposit\ndepth\ndeputy\nderive\ndescribe\ndesert\ndesign\ndesk\ndespair\ndestroy\ndetail\ndetect\ndevelop\ndevice\ndevote\ndiagram\ndial\ndiamond\ndiary\ndice\ndiesel\ndiet\ndiffer\ndigital\ndignity\ndilemma\ndinner\ndinosaur\ndirect\ndirt\ndisagree\ndiscover\ndisease\ndish\ndismiss\ndisorder\ndisplay\ndistance\ndivert\ndivide\ndivorce\ndizzy\ndoctor\ndocument\ndog\ndoll\ndolphin\ndomain\ndonate\ndonkey\ndonor\ndoor\ndose\ndouble\ndove\ndraft\ndragon\ndrama\ndrastic\ndraw\ndream\ndress\ndrift\ndrill\ndrink\ndrip\ndrive\ndrop\ndrum\ndry\nduck\ndumb\ndune\nduring\ndust\ndutch\nduty\ndwarf\ndynamic\neager\neagle\nearly\nearn\nearth\neasily\neast\neasy\necho\necology\neconomy\nedge\nedit\neducate\neffort\negg\neight\neither\nelbow\nelder\nelectric\nelegant\nelement\nelephant\nelevator\nelite\nelse\nembark\nembody\nembrace\nemerge\nemotion\nemploy\nempower\nempty\nenable\nenact\nend\nendless\nendorse\nenemy\nenergy\nenforce\nengage\nengine\nenhance\nenjoy\nenlist\nenough\nenrich\nenroll\nensure\nenter\nentire\nentry\nenvelope\nepisode\nequal\nequip\nera\nerase\nerode\nerosion\nerror\nerupt\nescape\nessay\nessence\nestate\neternal\nethics\nevidence\nevil\nevoke\nevolve\nexact\nexample\nexcess\nexchange\nexcite\nexclude\nexcuse\nexecute\nexercise\nexhaust\nexhibit\nexile\nexist\nexit\nexotic\nexpand\nexpect\nexpire\nexplain\nexpose\nexpress\nextend\nextra\neye\neyebrow\nfabric\nface\nfaculty\nfade\nfaint\nfaith\nfall\nfalse\nfame\nfamily\nfamous\nfan\nfancy\nfantasy\nfarm\nfashion\nfat\nfatal\nfather\nfatigue\nfault\nfavorite\nfeature\nfebruary\nfederal\nfee\nfeed\nfeel\nfemale\nfence\nfestival\nfetch\nfever\nfew\nfiber\nfiction\nfield\nfigure\nfile\nfilm\nfilter\nfinal\nfind\nfine\nfinger\nfinish\nfire\nfirm\nfirst\nfiscal\nfish\nfit\nfitness\nfix\nflag\nflame\nflash\nflat\nflavor\nflee\nflight\nflip\nfloat\nflock\nfloor\nflower\nfluid\nflush\nfly\nfoam\nfocus\nfog\nfoil\nfold\nfollow\nfood\nfoot\nforce\nforest\nforget\nfork\nfortune\nforum\nforward\nfossil\nfoster\nfound\nfox\nfragile\nframe\nfrequent\nfresh\nfriend\nfringe\nfrog\nfront\nfrost\nfrown\nfrozen\nfruit\nfuel\nfun\nfunny\nfurnace\nfury\nfuture\ngadget\ngain\ngalaxy\ngallery\ngame\ngap\ngarage\ngarbage\ngarden\ngarlic\ngarment\ngas\ngasp\ngate\ngather\ngauge\ngaze\ngeneral\ngenius\ngenre\ngentle\ngenuine\ngesture\nghost\ngiant\ngift\ngiggle\nginger\ngiraffe\ngirl\ngive\nglad\nglance\nglare\nglass\nglide\nglimpse\nglobe\ngloom\nglory\nglove\nglow\nglue\ngoat\ngoddess\ngold\ngood\ngoose\ngorilla\ngospel\ngossip\ngovern\ngown\ngrab\ngrace\ngrain\ngrant\ngrape\ngrass\ngravity\ngreat\ngreen\ngrid\ngrief\ngrit\ngrocery\ngroup\ngrow\ngrunt\nguard\nguess\nguide\nguilt\nguitar\ngun\ngym\nhabit\nhair\nhalf\nhammer\nhamster\nhand\nhappy\nharbor\nhard\nharsh\nharvest\nhat\nhave\nhawk\nhazard\nhead\nhealth\nheart\nheavy\nhedgehog\nheight\nhello\nhelmet\nhelp\nhen\nhero\nhidden\nhigh\nhill\nhint\nhip\nhire\nhistory\nhobby\nhockey\nhold\nhole\nholiday\nhollow\nhome\nhoney\nhood\nhope\nhorn\nhorror\nhorse\nhospital\nhost\nhotel\nhour\nhover\nhub\nhuge\nhuman\nhumble\nhumor\nhundred\nhungry\nhunt\nhurdle\nhurry\nhurt\nhusband\nhybrid\nice\nicon\nidea\nidentify\nidle\nignore\nill\nillegal\nillness\nimage\nimitate\nimmense\nimmune\nimpact\nimpose\nimprove\nimpulse\ninch\ninclude\nincome\nincrease\nindex\nindicate\nindoor\nindustry\ninfant\ninflict\ninform\ninhale\ninherit\ninitial\ninject\ninjury\ninmate\ninner\ninnocent\ninput\ninquiry\ninsane\ninsect\ninside\ninspire\ninstall\nintact\ninterest\ninto\ninvest\ninvite\ninvolve\niron\nisland\nisolate\nissue\nitem\nivory\njacket\njaguar\njar\njazz\njealous\njeans\njelly\njewel\njob\njoin\njoke\njourney\njoy\njudge\njuice\njump\njungle\njunior\njunk\njust\nkangaroo\nkeen\nkeep\nketchup\nkey\nkick\nkid\nkidney\nkind\nkingdom\nkiss\nkit\nkitchen\nkite\nkitten\nkiwi\nknee\nknife\nknock\nknow\nlab\nlabel\nlabor\nladder\nlady\nlake\nlamp\nlanguage\nlaptop\nlarge\nlater\nlatin\nlaugh\nlaundry\nlava\nlaw\nlawn\nlawsuit\nlayer\nlazy\nleader\nleaf\nlearn\nleave\nlecture\nleft\nleg\nlegal\nlegend\nleisure\nlemon\nlend\nlength\nlens\nleopard\nlesson\nletter\nlevel\nliar\nliberty\nlibrary\nlicense\nlife\nlift\nlight\nlike\nlimb\nlimit\nlink\nlion\nliquid\nlist\nlittle\nlive\nlizard\nload\nloan\nlobster\nlocal\nlock\nlogic\nlonely\nlong\nloop\nlottery\nloud\nlounge\nlove\nloyal\nlucky\nluggage\nlumber\nlunar\nlunch\nluxury\nlyrics\nmachine\nmad\nmagic\nmagnet\nmaid\nmail\nmain\nmajor\nmake\nmammal\nman\nmanage\nmandate\nmango\nmansion\nmanual\nmaple\nmarble\nmarch\nmargin\nmarine\nmarket\nmarriage\nmask\nmass\nmaster\nmatch\nmaterial\nmath\nmatrix\nmatter\nmaximum\nmaze\nmeadow\nmean\nmeasure\nmeat\nmechanic\nmedal\nmedia\nmelody\nmelt\nmember\nmemory\nmention\nmenu\nmercy\nmerge\nmerit\nmerry\nmesh\nmessage\nmetal\nmethod\nmiddle\nmidnight\nmilk\nmillion\nmimic\nmind\nminimum\nminor\nminute\nmiracle\nmirror\nmisery\nmiss\nmistake\nmix\nmixed\nmixture\nmobile\nmodel\nmodify\nmom\nmoment\nmonitor\nmonkey\nmonster\nmonth\nmoon\nmoral\nmore\nmorning\nmosquito\nmother\nmotion\nmotor\nmountain\nmouse\nmove\nmovie\nmuch\nmuffin\nmule\nmultiply\nmuscle\nmuseum\nmushroom\nmusic\nmust\nmutual\nmyself\nmystery\nmyth\nnaive\nname\nnapkin\nnarrow\nnasty\nnation\nnature\nnear\nneck\nneed\nnegative\nneglect\nneither\nnephew\nnerve\nnest\nnet\nnetwork\nneutral\nnever\nnews\nnext\nnice\nnight\nnoble\nnoise\nnominee\nnoodle\nnormal\nnorth\nnose\nnotable\nnote\nnothing\nnotice\nnovel\nnow\nnuclear\nnumber\nnurse\nnut\noak\nobey\nobject\noblige\nobscure\nobserve\nobtain\nobvious\noccur\nocean\noctober\nodor\noff\noffer\noffice\noften\noil\nokay\nold\nolive\nolympic\nomit\nonce\none\nonion\nonline\nonly\nopen\nopera\nopinion\noppose\noption\norange\norbit\norchard\norder\nordinary\norgan\norient\noriginal\norphan\nostrich\nother\noutdoor\nouter\noutput\noutside\noval\noven\nover\nown\nowner\noxygen\noyster\nozone\npact\npaddle\npage\npair\npalace\npalm\npanda\npanel\npanic\npanther\npaper\nparade\nparent\npark\nparrot\nparty\npass\npatch\npath\npatient\npatrol\npattern\npause\npave\npayment\npeace\npeanut\npear\npeasant\npelican\npen\npenalty\npencil\npeople\npepper\nperfect\npermit\nperson\npet\nphone\nphoto\nphrase\nphysical\npiano\npicnic\npicture\npiece\npig\npigeon\npill\npilot\npink\npioneer\npipe\npistol\npitch\npizza\nplace\nplanet\nplastic\nplate\nplay\nplease\npledge\npluck\nplug\nplunge\npoem\npoet\npoint\npolar\npole\npolice\npond\npony\npool\npopular\nportion\nposition\npossible\npost\npotato\npottery\npoverty\npowder\npower\npractice\npraise\npredict\nprefer\nprepare\npresent\npretty\nprevent\nprice\npride\nprimary\nprint\npriority\nprison\nprivate\nprize\nproblem\nprocess\nproduce\nprofit\nprogram\nproject\npromote\nproof\nproperty\nprosper\nprotect\nproud\nprovide\npublic\npudding\npull\npulp\npulse\npumpkin\npunch\npupil\npuppy\npurchase\npurity\npurpose\npurse\npush\nput\npuzzle\npyramid\nquality\nquantum\nquarter\nquestion\nquick\nquit\nquiz\nquote\nrabbit\nraccoon\nrace\nrack\nradar\nradio\nrail\nrain\nraise\nrally\nramp\nranch\nrandom\nrange\nrapid\nrare\nrate\nrather\nraven\nraw\nrazor\nready\nreal\nreason\nrebel\nrebuild\nrecall\nreceive\nrecipe\nrecord\nrecycle\nreduce\nreflect\nreform\nrefuse\nregion\nregret\nregular\nreject\nrelax\nrelease\nrelief\nrely\nremain\nremember\nremind\nremove\nrender\nrenew\nrent\nreopen\nrepair\nrepeat\nreplace\nreport\nrequire\nrescue\nresemble\nresist\nresource\nresponse\nresult\nretire\nretreat\nreturn\nreunion\nreveal\nreview\nreward\nrhythm\nrib\nribbon\nrice\nrich\nride\nridge\nrifle\nright\nrigid\nring\nriot\nripple\nrisk\nritual\nrival\nriver\nroad\nroast\nrobot\nrobust\nrocket\nromance\nroof\nrookie\nroom\nrose\nrotate\nrough\nround\nroute\nroyal\nrubber\nrude\nrug\nrule\nrun\nrunway\nrural\nsad\nsaddle\nsadness\nsafe\nsail\nsalad\nsalmon\nsalon\nsalt\nsalute\nsame\nsample\nsand\nsatisfy\nsatoshi\nsauce\nsausage\nsave\nsay\nscale\nscan\nscare\nscatter\nscene\nscheme\nschool\nscience\nscissors\nscorpion\nscout\nscrap\nscreen\nscript\nscrub\nsea\nsearch\nseason\nseat\nsecond\nsecret\nsection\nsecurity\nseed\nseek\nsegment\nselect\nsell\nseminar\nsenior\nsense\nsentence\nseries\nservice\nsession\nsettle\nsetup\nseven\nshadow\nshaft\nshallow\nshare\nshed\nshell\nsheriff\nshield\nshift\nshine\nship\nshiver\nshock\nshoe\nshoot\nshop\nshort\nshoulder\nshove\nshrimp\nshrug\nshuffle\nshy\nsibling\nsick\nside\nsiege\nsight\nsign\nsilent\nsilk\nsilly\nsilver\nsimilar\nsimple\nsince\nsing\nsiren\nsister\nsituate\nsix\nsize\nskate\nsketch\nski\nskill\nskin\nskirt\nskull\nslab\nslam\nsleep\nslender\nslice\nslide\nslight\nslim\nslogan\nslot\nslow\nslush\nsmall\nsmart\nsmile\nsmoke\nsmooth\nsnack\nsnake\nsnap\nsniff\nsnow\nsoap\nsoccer\nsocial\nsock\nsoda\nsoft\nsolar\nsoldier\nsolid\nsolution\nsolve\nsomeone\nsong\nsoon\nsorry\nsort\nsoul\nsound\nsoup\nsource\nsouth\nspace\nspare\nspatial\nspawn\nspeak\nspecial\nspeed\nspell\nspend\nsphere\nspice\nspider\nspike\nspin\nspirit\nsplit\nspoil\nsponsor\nspoon\nsport\nspot\nspray\nspread\nspring\nspy\nsquare\nsqueeze\nsquirrel\nstable\nstadium\nstaff\nstage\nstairs\nstamp\nstand\nstart\nstate\nstay\nsteak\nsteel\nstem\nstep\nstereo\nstick\nstill\nsting\nstock\nstomach\nstone\nstool\nstory\nstove\nstrategy\nstreet\nstrike\nstrong\nstruggle\nstudent\nstuff\nstumble\nstyle\nsubject\nsubmit\nsubway\nsuccess\nsuch\nsudden\nsuffer\nsugar\nsuggest\nsuit\nsummer\nsun\nsunny\nsunset\nsuper\nsupply\nsupreme\nsure\nsurface\nsurge\nsurprise\nsurround\nsurvey\nsuspect\nsustain\nswallow\nswamp\nswap\nswarm\nswear\nsweet\nswift\nswim\nswing\nswitch\nsword\nsymbol\nsymptom\nsyrup\nsystem\ntable\ntackle\ntag\ntail\ntalent\ntalk\ntank\ntape\ntarget\ntask\ntaste\ntattoo\ntaxi\nteach\nteam\ntell\nten\ntenant\ntennis\ntent\nterm\ntest\ntext\nthank\nthat\ntheme\nthen\ntheory\nthere\nthey\nthing\nthis\nthought\nthree\nthrive\nthrow\nthumb\nthunder\nticket\ntide\ntiger\ntilt\ntimber\ntime\ntiny\ntip\ntired\ntissue\ntitle\ntoast\ntobacco\ntoday\ntoddler\ntoe\ntogether\ntoilet\ntoken\ntomato\ntomorrow\ntone\ntongue\ntonight\ntool\ntooth\ntop\ntopic\ntopple\ntorch\ntornado\ntortoise\ntoss\ntotal\ntourist\ntoward\ntower\ntown\ntoy\ntrack\ntrade\ntraffic\ntragic\ntrain\ntransfer\ntrap\ntrash\ntravel\ntray\ntreat\ntree\ntrend\ntrial\ntribe\ntrick\ntrigger\ntrim\ntrip\ntrophy\ntrouble\ntruck\ntrue\ntruly\ntrumpet\ntrust\ntruth\ntry\ntube\ntuition\ntumble\ntuna\ntunnel\nturkey\nturn\nturtle\ntwelve\ntwenty\ntwice\ntwin\ntwist\ntwo\ntype\ntypical\nugly\numbrella\nunable\nunaware\nuncle\nuncover\nunder\nundo\nunfair\nunfold\nunhappy\nuniform\nunique\nunit\nuniverse\nunknown\nunlock\nuntil\nunusual\nunveil\nupdate\nupgrade\nuphold\nupon\nupper\nupset\nurban\nurge\nusage\nuse\nused\nuseful\nuseless\nusual\nutility\nvacant\nvacuum\nvague\nvalid\nvalley\nvalve\nvan\nvanish\nvapor\nvarious\nvast\nvault\nvehicle\nvelvet\nvendor\nventure\nvenue\nverb\nverify\nversion\nvery\nvessel\nveteran\nviable\nvibrant\nvicious\nvictory\nvideo\nview\nvillage\nvintage\nviolin\nvirtual\nvirus\nvisa\nvisit\nvisual\nvital\nvivid\nvocal\nvoice\nvoid\nvolcano\nvolume\nvote\nvoyage\nwage\nwagon\nwait\nwalk\nwall\nwalnut\nwant\nwarfare\nwarm\nwarrior\nwash\nwasp\nwaste\nwater\nwave\nway\nwealth\nweapon\nwear\nweasel\nweather\nweb\nwedding\nweekend\nweird\nwelcome\nwest\nwet\nwhale\nwhat\nwheat\nwheel\nwhen\nwhere\nwhip\nwhisper\nwide\nwidth\nwife\nwild\nwill\nwin\nwindow\nwine\nwing\nwink\nwinner\nwinter\nwire\nwisdom\nwise\nwish\nwitness\nwolf\nwoman\nwonder\nwood\nwool\nword\nwork\nworld\nworry\nworth\nwrap\nwreck\nwrestle\nwrist\nwrite\nwrong\nyard\nyear\nyellow\nyou\nyoung\nyouth\nzebra\nzero\nzone\nzoo".split("\n")}));f(ue);var le=ue.wordlist,he=d((function(e,t){function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function r(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function o(e,...t){if(!((n=e)instanceof Uint8Array||null!=n&&"object"==typeof n&&"Uint8Array"===n.constructor.name))throw new Error("Expected Uint8Array");var n;if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function i(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function s(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function a(e,t){o(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(t,"__esModule",{value:!0}),t.output=t.exists=t.hash=t.bytes=t.bool=t.number=void 0,t.number=n,t.bool=r,t.bytes=o,t.hash=i,t.exists=s,t.output=a;const c={number:n,bool:r,bytes:o,hash:i,exists:s,output:a};t.default=c}));f(he),he.output,he.exists,he.hash,he.bytes,he.bool,he.number;var fe=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=void 0,t.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0}));f(fe),fe.crypto;var de=d((function(e,t){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.checkOpts=t.Hash=t.concatBytes=t.toBytes=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.isLE=t.rotr=t.createView=t.u32=t.u8=void 0;t.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);function n(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}t.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));t.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(t.rotr=(e,t)=>e<<32-t|e>>>t,t.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!t.isLE)throw new Error("Non little-endian hardware is not supported");const r=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));t.bytesToHex=function(e){if(!n(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=r[e[n]];return t};const o={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function i(e){return e>=o._0&&e<=o._9?e-o._0:e>=o._A&&e<=o._F?e-(o._A-10):e>=o._a&&e<=o._f?e-(o._a-10):void 0}t.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let t=0,o=0;t<n;t++,o+=2){const n=i(e.charCodeAt(o)),s=i(e.charCodeAt(o+1));if(void 0===n||void 0===s){const t=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+o)}r[t]=16*n+s}return r};function s(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function a(e){if("string"==typeof e&&(e=s(e)),!n(e))throw new Error("expected Uint8Array, got "+typeof e);return e}t.nextTick=async()=>{},t.asyncLoop=async function(e,n,r){let o=Date.now();for(let i=0;i<e;i++){r(i);const e=Date.now()-o;e>=0&&e<n||(await(0,t.nextTick)(),o+=e)}},t.utf8ToBytes=s,t.toBytes=a,t.concatBytes=function(...e){let t=0;for(let r=0;r<e.length;r++){const o=e[r];if(!n(o))throw new Error("Uint8Array expected");t+=o.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const o=e[t];r.set(o,n),n+=o.length}return r};t.Hash=class{clone(){return this._cloneInto()}};const c={}.toString;t.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==c.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)},t.wrapConstructor=function(e){const t=t=>e().update(a(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t},t.wrapConstructorWithOpts=function(e){const t=(t,n)=>e(n).update(a(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},t.wrapXOFConstructorWithOpts=function(e){const t=(t,n)=>e(n).update(a(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},t.randomBytes=function(e=32){if(fe.crypto&&"function"==typeof fe.crypto.getRandomValues)return fe.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}}));f(de),de.randomBytes,de.wrapXOFConstructorWithOpts,de.wrapConstructorWithOpts,de.wrapConstructor,de.checkOpts,de.Hash,de.concatBytes,de.toBytes,de.utf8ToBytes,de.asyncLoop,de.nextTick,de.hexToBytes,de.bytesToHex,de.isLE,de.rotr,de.createView,de.u32,de.u8;var pe=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;class n extends de.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,he.hash)(e);const n=(0,de.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,o=new Uint8Array(r);o.set(n.length>r?e.create().update(n).digest():n);for(let e=0;e<o.length;e++)o[e]^=54;this.iHash.update(o),this.oHash=e.create();for(let e=0;e<o.length;e++)o[e]^=106;this.oHash.update(o),o.fill(0)}update(e){return(0,he.exists)(this),this.iHash.update(e),this}digestInto(e){(0,he.exists)(this),(0,he.bytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:o,blockLen:i,outputLen:s}=this;return e.finished=r,e.destroyed=o,e.blockLen=i,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=n;t.hmac=(e,t,r)=>new n(e,t).update(r).digest(),t.hmac.create=(e,t)=>new n(e,t)}));f(pe),pe.hmac,pe.HMAC;var ye=d((function(e,t){function n(e,t,n,r){(0,he.hash)(e);const o=(0,de.checkOpts)({dkLen:32,asyncTick:10},r),{c:i,dkLen:s,asyncTick:a}=o;if((0,he.number)(i),(0,he.number)(s),(0,he.number)(a),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=(0,de.toBytes)(t),u=(0,de.toBytes)(n),l=new Uint8Array(s),h=pe.hmac.create(e,c),f=h._cloneInto().update(u);return{c:i,dkLen:s,asyncTick:a,DK:l,PRF:h,PRFSalt:f}}function r(e,t,n,r,o){return e.destroy(),t.destroy(),r&&r.destroy(),o.fill(0),n}Object.defineProperty(t,"__esModule",{value:!0}),t.pbkdf2Async=t.pbkdf2=void 0,t.pbkdf2=function(e,t,o,i){const{c:s,dkLen:a,DK:c,PRF:u,PRFSalt:l}=n(e,t,o,i);let h;const f=new Uint8Array(4),d=(0,de.createView)(f),p=new Uint8Array(u.outputLen);for(let e=1,t=0;t<a;e++,t+=u.outputLen){const n=c.subarray(t,t+u.outputLen);d.setInt32(0,e,!1),(h=l._cloneInto(h)).update(f).digestInto(p),n.set(p.subarray(0,n.length));for(let e=1;e<s;e++){u._cloneInto(h).update(p).digestInto(p);for(let e=0;e<n.length;e++)n[e]^=p[e]}}return r(u,l,c,h,p)},t.pbkdf2Async=async function(e,t,o,i){const{c:s,dkLen:a,asyncTick:c,DK:u,PRF:l,PRFSalt:h}=n(e,t,o,i);let f;const d=new Uint8Array(4),p=(0,de.createView)(d),y=new Uint8Array(l.outputLen);for(let e=1,t=0;t<a;e++,t+=l.outputLen){const n=u.subarray(t,t+l.outputLen);p.setInt32(0,e,!1),(f=h._cloneInto(f)).update(d).digestInto(y),n.set(y.subarray(0,n.length)),await(0,de.asyncLoop)(s-1,c,(()=>{l._cloneInto(f).update(y).digestInto(y);for(let e=0;e<n.length;e++)n[e]^=y[e]}))}return r(l,h,u,f,y)}}));f(ye),ye.pbkdf2Async,ye.pbkdf2;var we=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SHA2=void 0;class n extends de.Hash{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,de.createView)(this.buffer)}update(e){(0,he.exists)(this);const{view:t,buffer:n,blockLen:r}=this,o=(e=(0,de.toBytes)(e)).length;for(let i=0;i<o;){const s=Math.min(r-this.pos,o-i);if(s!==r)n.set(e.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=(0,de.createView)(e);for(;r<=o-i;i+=r)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,he.exists)(this),(0,he.output)(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:o}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(n,0),i=0);for(let e=i;e<r;e++)t[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),a=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,s,r),e.setUint32(t+u,a,r)}(n,r-8,BigInt(8*this.length),o),this.process(n,0);const s=(0,de.createView)(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)s.setUint32(4*e,u[e],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:o,destroyed:i,pos:s}=this;return e.length=r,e.pos=s,e.finished=o,e.destroyed=i,r%t&&e.buffer.set(n),e}}t.SHA2=n}));f(we),we.SHA2;var be=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.sha224=t.sha256=void 0;const n=(e,t,n)=>e&t^e&n^t&n,r=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),o=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),i=new Uint32Array(64);class s extends we.SHA2{constructor(){super(64,32,8,!1),this.A=0|o[0],this.B=0|o[1],this.C=0|o[2],this.D=0|o[3],this.E=0|o[4],this.F=0|o[5],this.G=0|o[6],this.H=0|o[7]}get(){const{A:e,B:t,C:n,D:r,E:o,F:i,G:s,H:a}=this;return[e,t,n,r,o,i,s,a]}set(e,t,n,r,o,i,s,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|o,this.F=0|i,this.G=0|s,this.H=0|a}process(e,t){for(let n=0;n<16;n++,t+=4)i[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=i[e-15],n=i[e-2],r=(0,de.rotr)(t,7)^(0,de.rotr)(t,18)^t>>>3,o=(0,de.rotr)(n,17)^(0,de.rotr)(n,19)^n>>>10;i[e]=o+i[e-7]+r+i[e-16]|0}let{A:o,B:s,C:a,D:c,E:u,F:l,G:h,H:f}=this;for(let e=0;e<64;e++){const t=f+((0,de.rotr)(u,6)^(0,de.rotr)(u,11)^(0,de.rotr)(u,25))+((d=u)&l^~d&h)+r[e]+i[e]|0,p=((0,de.rotr)(o,2)^(0,de.rotr)(o,13)^(0,de.rotr)(o,22))+n(o,s,a)|0;f=h,h=l,l=u,u=c+t|0,c=a,a=s,s=o,o=t+p|0}var d;o=o+this.A|0,s=s+this.B|0,a=a+this.C|0,c=c+this.D|0,u=u+this.E|0,l=l+this.F|0,h=h+this.G|0,f=f+this.H|0,this.set(o,s,a,c,u,l,h,f)}roundClean(){i.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class a extends s{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}t.sha256=(0,de.wrapConstructor)((()=>new s)),t.sha224=(0,de.wrapConstructor)((()=>new a))}));f(be),be.sha224,be.sha256;var ge=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.add5L=t.add5H=t.add4H=t.add4L=t.add3H=t.add3L=t.add=t.rotlBL=t.rotlBH=t.rotlSL=t.rotlSH=t.rotr32L=t.rotr32H=t.rotrBL=t.rotrBH=t.rotrSL=t.rotrSH=t.shrSL=t.shrSH=t.toBig=t.split=t.fromBig=void 0;const n=BigInt(2**32-1),r=BigInt(32);function o(e,t=!1){return t?{h:Number(e&n),l:Number(e>>r&n)}:{h:0|Number(e>>r&n),l:0|Number(e&n)}}function i(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:a}=o(e[i],t);[n[i],r[i]]=[s,a]}return[n,r]}t.fromBig=o,t.split=i;const s=(e,t)=>BigInt(e>>>0)<<r|BigInt(t>>>0);t.toBig=s;const a=(e,t,n)=>e>>>n;t.shrSH=a;const c=(e,t,n)=>e<<32-n|t>>>n;t.shrSL=c;const u=(e,t,n)=>e>>>n|t<<32-n;t.rotrSH=u;const l=(e,t,n)=>e<<32-n|t>>>n;t.rotrSL=l;const h=(e,t,n)=>e<<64-n|t>>>n-32;t.rotrBH=h;const f=(e,t,n)=>e>>>n-32|t<<64-n;t.rotrBL=f;const d=(e,t)=>t;t.rotr32H=d;const p=(e,t)=>e;t.rotr32L=p;const y=(e,t,n)=>e<<n|t>>>32-n;t.rotlSH=y;const w=(e,t,n)=>t<<n|e>>>32-n;t.rotlSL=w;const b=(e,t,n)=>t<<n-32|e>>>64-n;t.rotlBH=b;const g=(e,t,n)=>e<<n-32|t>>>64-n;function m(e,t,n,r){const o=(t>>>0)+(r>>>0);return{h:e+n+(o/2**32|0)|0,l:0|o}}t.rotlBL=g,t.add=m;const v=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0);t.add3L=v;const E=(e,t,n,r)=>t+n+r+(e/2**32|0)|0;t.add3H=E;const x=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0);t.add4L=x;const B=(e,t,n,r,o)=>t+n+r+o+(e/2**32|0)|0;t.add4H=B;const A=(e,t,n,r,o)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(o>>>0);t.add5L=A;const k=(e,t,n,r,o,i)=>t+n+r+o+i+(e/2**32|0)|0;t.add5H=k;const S={fromBig:o,split:i,toBig:s,shrSH:a,shrSL:c,rotrSH:u,rotrSL:l,rotrBH:h,rotrBL:f,rotr32H:d,rotr32L:p,rotlSH:y,rotlSL:w,rotlBH:b,rotlBL:g,add:m,add3L:v,add3H:E,add4L:x,add4H:B,add5H:k,add5L:A};t.default=S}));f(ge),ge.add5L,ge.add5H,ge.add4H,ge.add4L,ge.add3H,ge.add3L,ge.add,ge.rotlBL,ge.rotlBH,ge.rotlSL,ge.rotlSH,ge.rotr32L,ge.rotr32H,ge.rotrBL,ge.rotrBH,ge.rotrSL,ge.rotrSH,ge.shrSL,ge.shrSH,ge.toBig,ge.split,ge.fromBig;var me=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.sha384=t.sha512_256=t.sha512_224=t.sha512=t.SHA512=void 0;const[n,r]=(()=>ge.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),o=new Uint32Array(80),i=new Uint32Array(80);class s extends we.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:o,Cl:i,Dh:s,Dl:a,Eh:c,El:u,Fh:l,Fl:h,Gh:f,Gl:d,Hh:p,Hl:y}=this;return[e,t,n,r,o,i,s,a,c,u,l,h,f,d,p,y]}set(e,t,n,r,o,i,s,a,c,u,l,h,f,d,p,y){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|o,this.Cl=0|i,this.Dh=0|s,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|h,this.Gh=0|f,this.Gl=0|d,this.Hh=0|p,this.Hl=0|y}process(e,t){for(let n=0;n<16;n++,t+=4)o[n]=e.getUint32(t),i[n]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|o[e-15],n=0|i[e-15],r=ge.default.rotrSH(t,n,1)^ge.default.rotrSH(t,n,8)^ge.default.shrSH(t,n,7),s=ge.default.rotrSL(t,n,1)^ge.default.rotrSL(t,n,8)^ge.default.shrSL(t,n,7),a=0|o[e-2],c=0|i[e-2],u=ge.default.rotrSH(a,c,19)^ge.default.rotrBH(a,c,61)^ge.default.shrSH(a,c,6),l=ge.default.rotrSL(a,c,19)^ge.default.rotrBL(a,c,61)^ge.default.shrSL(a,c,6),h=ge.default.add4L(s,l,i[e-7],i[e-16]),f=ge.default.add4H(h,r,u,o[e-7],o[e-16]);o[e]=0|f,i[e]=0|h}let{Ah:s,Al:a,Bh:c,Bl:u,Ch:l,Cl:h,Dh:f,Dl:d,Eh:p,El:y,Fh:w,Fl:b,Gh:g,Gl:m,Hh:v,Hl:E}=this;for(let e=0;e<80;e++){const t=ge.default.rotrSH(p,y,14)^ge.default.rotrSH(p,y,18)^ge.default.rotrBH(p,y,41),x=ge.default.rotrSL(p,y,14)^ge.default.rotrSL(p,y,18)^ge.default.rotrBL(p,y,41),B=p&w^~p&g,A=y&b^~y&m,k=ge.default.add5L(E,x,A,r[e],i[e]),S=ge.default.add5H(k,v,t,B,n[e],o[e]),L=0|k,T=ge.default.rotrSH(s,a,28)^ge.default.rotrBH(s,a,34)^ge.default.rotrBH(s,a,39),O=ge.default.rotrSL(s,a,28)^ge.default.rotrBL(s,a,34)^ge.default.rotrBL(s,a,39),H=s&c^s&l^c&l,_=a&u^a&h^u&h;v=0|g,E=0|m,g=0|w,m=0|b,w=0|p,b=0|y,({h:p,l:y}=ge.default.add(0|f,0|d,0|S,0|L)),f=0|l,d=0|h,l=0|c,h=0|u,c=0|s,u=0|a;const I=ge.default.add3L(L,O,_);s=ge.default.add3H(I,S,T,H),a=0|I}({h:s,l:a}=ge.default.add(0|this.Ah,0|this.Al,0|s,0|a)),({h:c,l:u}=ge.default.add(0|this.Bh,0|this.Bl,0|c,0|u)),({h:l,l:h}=ge.default.add(0|this.Ch,0|this.Cl,0|l,0|h)),({h:f,l:d}=ge.default.add(0|this.Dh,0|this.Dl,0|f,0|d)),({h:p,l:y}=ge.default.add(0|this.Eh,0|this.El,0|p,0|y)),({h:w,l:b}=ge.default.add(0|this.Fh,0|this.Fl,0|w,0|b)),({h:g,l:m}=ge.default.add(0|this.Gh,0|this.Gl,0|g,0|m)),({h:v,l:E}=ge.default.add(0|this.Hh,0|this.Hl,0|v,0|E)),this.set(s,a,c,u,l,h,f,d,p,y,w,b,g,m,v,E)}roundClean(){o.fill(0),i.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}t.SHA512=s;class a extends s{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class c extends s{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class u extends s{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}t.sha512=(0,de.wrapConstructor)((()=>new s)),t.sha512_224=(0,de.wrapConstructor)((()=>new a)),t.sha512_256=(0,de.wrapConstructor)((()=>new c)),t.sha384=(0,de.wrapConstructor)((()=>new u))}));function ve(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function Ee(...e){const t=e=>e,n=(e,t)=>n=>e(t(n));return{encode:e.map((e=>e.encode)).reduceRight(n,t),decode:e.map((e=>e.decode)).reduce(n,t)}}function xe(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const n=e.indexOf(t);if(-1===n)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n}))}}}function Be(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function Ae(e,t="="){if("string"!=typeof t)throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!=typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!=typeof e)throw new Error(`padding.decode: non-string input=${e}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function ke(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function Se(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const o=[],i=Array.from(e);for(i.forEach((e=>{if(e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,s=!0;for(let o=r;o<i.length;o++){const a=i[o],c=t*e+a;if(!Number.isSafeInteger(c)||t*e/t!==e||c-a!=t*e)throw new Error("convertRadix: carry overflow");e=c%n;const u=Math.floor(c/n);if(i[o]=u,!Number.isSafeInteger(u)||u*n+e!==c)throw new Error("convertRadix: carry overflow");s&&(u?s=!1:r=o)}if(o.push(e),s)break}for(let t=0;t<e.length-1&&0===e[t];t++)o.push(0);return o.reverse()}f(me),me.sha384,me.sha512_256,me.sha512_224,me.sha512,me.SHA512;const Le=(e,t)=>t?Le(t,e%t):e,Te=(e,t)=>e+(t-Le(e,t));function Oe(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Te(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${Te(t,n)}`);let o=0,i=0;const s=2**n-1,a=[];for(const r of e){if(r>=2**t)throw new Error(`convertRadix2: invalid data word=${r} from=${t}`);if(o=o<<t|r,i+t>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${t}`);for(i+=t;i>=n;i-=n)a.push((o>>i-n&s)>>>0);o&=2**i-1}if(o=o<<n-i&s,!r&&i>=t)throw new Error("Excess padding");if(!r&&o)throw new Error(`Non-zero padding: ${o}`);return r&&i>0&&a.push(o>>>0),a}function He(e){return{encode:t=>{if(!ve(t))throw new Error("radix.encode input should be Uint8Array");return Se(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(Se(t,e,256))}}}function _e(e,t=!1){if(e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(Te(8,e)>32||Te(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!ve(n))throw new Error("radix2.encode input should be Uint8Array");return Oe(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(Oe(n,e,8,t))}}}function Ie(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(e){}}}function Ue(e,t){if("function"!=typeof t)throw new Error("checksum fn should be function");return{encode(n){if(!ve(n))throw new Error("checksum.encode: input should be Uint8Array");const r=t(n).slice(0,e),o=new Uint8Array(n.length+e);return o.set(n),o.set(r,n.length),o},decode(n){if(!ve(n))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-e),o=t(r).slice(0,e),i=n.slice(-e);for(let t=0;t<e;t++)if(o[t]!==i[t])throw new Error("Invalid checksum");return r}}}const Ce={alphabet:xe,chain:Ee,checksum:Ue,convertRadix:Se,convertRadix2:Oe,radix:He,radix2:_e,join:Be,padding:Ae},Ne=Ee(_e(4),xe("0123456789ABCDEF"),Be("")),Re=Ee(_e(5),xe("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Ae(5),Be("")),Pe=Ee(_e(5),xe("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Ae(5),Be("")),je=Ee(_e(5),xe("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Be(""),ke((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),Fe=Ee(_e(6),xe("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Ae(6),Be("")),qe=Ee(_e(6),xe("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Ae(6),Be("")),De=Ee(_e(6),xe("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Be("")),$e=e=>Ee(He(58),xe(e),Be("")),Me=$e("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Ke=$e("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),Ve=$e("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),ze=[0,2,3,5,6,7,9,10,11],We={encode(e){let t="";for(let n=0;n<e.length;n+=8){const r=e.subarray(n,n+8);t+=Me.encode(r).padStart(ze[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const r=e.slice(n,n+11),o=ze.indexOf(r.length),i=Me.decode(r);for(let e=0;e<i.length-o;e++)if(0!==i[e])throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(i.slice(i.length-o)))}return Uint8Array.from(t)}},Ge=e=>Ee(Ue(4,(t=>e(e(t)))),Me),Ze=Ge,Ye=Ee(xe("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Be("")),Je=[996825010,642813549,513874426,1027748829,705979059];function Xe(e){const t=e>>25;let n=(33554431&e)<<5;for(let e=0;e<Je.length;e++)1==(t>>e&1)&&(n^=Je[e]);return n}function Qe(e,t,n=1){const r=e.length;let o=1;for(let t=0;t<r;t++){const n=e.charCodeAt(t);if(n<33||n>126)throw new Error(`Invalid prefix (${e})`);o=Xe(o)^n>>5}o=Xe(o);for(let t=0;t<r;t++)o=Xe(o)^31&e.charCodeAt(t);for(let e of t)o=Xe(o)^e;for(let e=0;e<6;e++)o=Xe(o);return o^=n,Ye.encode(Oe([o%2**30],30,5,!1))}function et(e){const t="bech32"===e?1:734539939,n=_e(5),r=n.decode,o=n.encode,i=Ie(r);function s(e,n=90){if("string"!=typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==n&&e.length>n)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${n})`);const r=e.toLowerCase();if(e!==r&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const o=(e=r).lastIndexOf("1");if(0===o||-1===o)throw new Error('Letter "1" must be present between prefix and data only');const i=e.slice(0,o),s=e.slice(o+1);if(s.length<6)throw new Error("Data must be at least 6 characters long");const a=Ye.decode(s).slice(0,-6),c=Qe(i,a,t);if(!s.endsWith(c))throw new Error(`Invalid checksum in ${e}: expected "${c}"`);return{prefix:i,words:a}}return{encode:function(e,n,r=90){if("string"!=typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof n);const o=e.length+7+n.length;if(!1!==r&&o>r)throw new TypeError(`Length ${o} exceeds limit ${r}`);const i=e.toLowerCase(),s=Qe(i,n,t);return`${i}1${Ye.encode(n)}${s}`},decode:s,decodeToBytes:function(e){const{prefix:t,words:n}=s(e,!1);return{prefix:t,words:n,bytes:r(n)}},decodeUnsafe:Ie(s),fromWords:r,fromWordsUnsafe:i,toWords:o}}const tt=et("bech32"),nt=et("bech32m"),rt={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)},ot=Ee(_e(4),xe("0123456789abcdef"),Be(""),ke((e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}))),it={utf8:rt,hex:ot,base16:Ne,base32:Re,base64:Fe,base64url:qe,base58:Me,base58xmr:We},st="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr",at=(e,t)=>{if("string"!=typeof e||!it.hasOwnProperty(e))throw new TypeError(st);if(!ve(t))throw new TypeError("bytesToString() expects Uint8Array");return it[e].encode(t)},ct=at,ut=(e,t)=>{if(!it.hasOwnProperty(e))throw new TypeError(st);if("string"!=typeof t)throw new TypeError("stringToBytes() expects string");return it[e].decode(t)},lt=ut;var ht=Object.freeze({__proto__:null,assertNumber:
/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */
function(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)},base16:Ne,base32:Re,base32crockford:je,base32hex:Pe,base58:Me,base58check:Ze,base58flickr:Ke,base58xmr:We,base58xrp:Ve,base64:Fe,base64url:qe,base64urlnopad:De,bech32:tt,bech32m:nt,bytes:lt,bytesToString:at,createBase58check:Ge,hex:ot,str:ct,stringToBytes:ut,utf8:rt,utils:Ce}),ft=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.mnemonicToSeedSync=t.mnemonicToSeed=t.validateMnemonic=t.entropyToMnemonic=t.mnemonicToEntropy=t.generateMnemonic=void 0;
/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */
const n=e=>""===e[0];function r(e){if("string"!=typeof e)throw new TypeError("Invalid mnemonic type: "+typeof e);return e.normalize("NFKD")}function o(e){const t=r(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}function i(e){he.default.bytes(e,16,20,24,28,32)}t.generateMnemonic=function(e,t=128){if(he.default.number(t),t%32!=0||t>256)throw new TypeError("Invalid entropy");return u((0,de.randomBytes)(t/8),e)};const s=e=>{const t=8-e.length/4;return new Uint8Array([(0,be.sha256)(e)[0]>>t<<t])};function a(e){if(!Array.isArray(e)||2048!==e.length||"string"!=typeof e[0])throw new Error("Worlist: expected array of 2048 strings");return e.forEach((e=>{if("string"!=typeof e)throw new Error(`Wordlist: non-string element: ${e}`)})),ht.utils.chain(ht.utils.checksum(1,s),ht.utils.radix2(11,!0),ht.utils.alphabet(e))}function c(e,t){const{words:n}=o(e),r=a(t).decode(n);return i(r),r}function u(e,t){i(e);return a(t).encode(e).join(n(t)?"":" ")}t.mnemonicToEntropy=c,t.entropyToMnemonic=u,t.validateMnemonic=function(e,t){try{c(e,t)}catch(e){return!1}return!0};const l=e=>r(`mnemonic${e}`);t.mnemonicToSeed=function(e,t=""){return(0,ye.pbkdf2Async)(me.sha512,o(e).nfkd,l(t),{c:2048,dkLen:64})},t.mnemonicToSeedSync=function(e,t=""){return(0,ye.pbkdf2)(me.sha512,o(e).nfkd,l(t),{c:2048,dkLen:64})}}));f(ft);var dt=ft.mnemonicToSeedSync;ft.mnemonicToSeed;var pt=ft.validateMnemonic;ft.entropyToMnemonic,ft.mnemonicToEntropy;var yt=ft.generateMnemonic,wt=d((function(e,t){function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function r(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function o(e,...t){if(!((n=e)instanceof Uint8Array||null!=n&&"object"==typeof n&&"Uint8Array"===n.constructor.name))throw new Error("Expected Uint8Array");var n;if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function i(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function s(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function a(e,t){o(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(t,"__esModule",{value:!0}),t.output=t.exists=t.hash=t.bytes=t.bool=t.number=void 0,t.number=n,t.bool=r,t.bytes=o,t.hash=i,t.exists=s,t.output=a;const c={number:n,bool:r,bytes:o,hash:i,exists:s,output:a};t.default=c}));f(wt),wt.output,wt.exists,wt.hash;var bt=wt.bytes;wt.bool,wt.number;var gt=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=void 0,t.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0}));f(gt),gt.crypto;var mt=d((function(e,t){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.checkOpts=t.Hash=t.concatBytes=t.toBytes=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.isLE=t.rotr=t.createView=t.u32=t.u8=void 0;t.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);function n(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}t.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));t.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(t.rotr=(e,t)=>e<<32-t|e>>>t,t.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!t.isLE)throw new Error("Non little-endian hardware is not supported");const r=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));t.bytesToHex=function(e){if(!n(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=r[e[n]];return t};const o={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function i(e){return e>=o._0&&e<=o._9?e-o._0:e>=o._A&&e<=o._F?e-(o._A-10):e>=o._a&&e<=o._f?e-(o._a-10):void 0}t.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let t=0,o=0;t<n;t++,o+=2){const n=i(e.charCodeAt(o)),s=i(e.charCodeAt(o+1));if(void 0===n||void 0===s){const t=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+o)}r[t]=16*n+s}return r};function s(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function a(e){if("string"==typeof e&&(e=s(e)),!n(e))throw new Error("expected Uint8Array, got "+typeof e);return e}t.nextTick=async()=>{},t.asyncLoop=async function(e,n,r){let o=Date.now();for(let i=0;i<e;i++){r(i);const e=Date.now()-o;e>=0&&e<n||(await(0,t.nextTick)(),o+=e)}},t.utf8ToBytes=s,t.toBytes=a,t.concatBytes=function(...e){let t=0;for(let r=0;r<e.length;r++){const o=e[r];if(!n(o))throw new Error("Uint8Array expected");t+=o.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const o=e[t];r.set(o,n),n+=o.length}return r};t.Hash=class{clone(){return this._cloneInto()}};const c={}.toString;t.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==c.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)},t.wrapConstructor=function(e){const t=t=>e().update(a(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t},t.wrapConstructorWithOpts=function(e){const t=(t,n)=>e(n).update(a(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},t.wrapXOFConstructorWithOpts=function(e){const t=(t,n)=>e(n).update(a(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},t.randomBytes=function(e=32){if(gt.crypto&&"function"==typeof gt.crypto.getRandomValues)return gt.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}}));f(mt),mt.randomBytes,mt.wrapXOFConstructorWithOpts,mt.wrapConstructorWithOpts,mt.wrapConstructor,mt.checkOpts,mt.Hash;var vt=mt.concatBytes;mt.toBytes;var Et=mt.utf8ToBytes;mt.asyncLoop,mt.nextTick;var xt=mt.hexToBytes,Bt=mt.bytesToHex;mt.isLE,mt.rotr;var At=mt.createView;mt.u32,mt.u8;var kt=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;class n extends mt.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,wt.hash)(e);const n=(0,mt.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,o=new Uint8Array(r);o.set(n.length>r?e.create().update(n).digest():n);for(let e=0;e<o.length;e++)o[e]^=54;this.iHash.update(o),this.oHash=e.create();for(let e=0;e<o.length;e++)o[e]^=106;this.oHash.update(o),o.fill(0)}update(e){return(0,wt.exists)(this),this.iHash.update(e),this}digestInto(e){(0,wt.exists)(this),(0,wt.bytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:o,blockLen:i,outputLen:s}=this;return e.finished=r,e.destroyed=o,e.blockLen=i,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=n;t.hmac=(e,t,r)=>new n(e,t).update(r).digest(),t.hmac.create=(e,t)=>new n(e,t)}));f(kt);var St=kt.hmac;kt.HMAC;var Lt=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SHA2=void 0;class n extends mt.Hash{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,mt.createView)(this.buffer)}update(e){(0,wt.exists)(this);const{view:t,buffer:n,blockLen:r}=this,o=(e=(0,mt.toBytes)(e)).length;for(let i=0;i<o;){const s=Math.min(r-this.pos,o-i);if(s!==r)n.set(e.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=(0,mt.createView)(e);for(;r<=o-i;i+=r)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,wt.exists)(this),(0,wt.output)(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:o}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(n,0),i=0);for(let e=i;e<r;e++)t[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),a=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,s,r),e.setUint32(t+u,a,r)}(n,r-8,BigInt(8*this.length),o),this.process(n,0);const s=(0,mt.createView)(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)s.setUint32(4*e,u[e],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:o,destroyed:i,pos:s}=this;return e.length=r,e.pos=s,e.finished=o,e.destroyed=i,r%t&&e.buffer.set(n),e}}t.SHA2=n}));f(Lt),Lt.SHA2;var Tt=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ripemd160=t.RIPEMD160=void 0;const n=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),r=Uint8Array.from({length:16},((e,t)=>t));let o=[r],i=[r.map((e=>(9*e+5)%16))];for(let e=0;e<4;e++)for(let t of[o,i])t.push(t[e].map((e=>n[e])));const s=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((e=>new Uint8Array(e))),a=o.map(((e,t)=>e.map((e=>s[t][e])))),c=i.map(((e,t)=>e.map((e=>s[t][e])))),u=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),l=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),h=(e,t)=>e<<t|e>>>32-t;function f(e,t,n,r){return 0===e?t^n^r:1===e?t&n|~t&r:2===e?(t|~n)^r:3===e?t&r|n&~r:t^(n|~r)}const d=new Uint32Array(16);class p extends Lt.SHA2{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:n,h3:r,h4:o}=this;return[e,t,n,r,o]}set(e,t,n,r,o){this.h0=0|e,this.h1=0|t,this.h2=0|n,this.h3=0|r,this.h4=0|o}process(e,t){for(let n=0;n<16;n++,t+=4)d[n]=e.getUint32(t,!0);let n=0|this.h0,r=n,s=0|this.h1,p=s,y=0|this.h2,w=y,b=0|this.h3,g=b,m=0|this.h4,v=m;for(let e=0;e<5;e++){const t=4-e,E=u[e],x=l[e],B=o[e],A=i[e],k=a[e],S=c[e];for(let t=0;t<16;t++){const r=h(n+f(e,s,y,b)+d[B[t]]+E,k[t])+m|0;n=m,m=b,b=0|h(y,10),y=s,s=r}for(let e=0;e<16;e++){const n=h(r+f(t,p,w,g)+d[A[e]]+x,S[e])+v|0;r=v,v=g,g=0|h(w,10),w=p,p=n}}this.set(this.h1+y+g|0,this.h2+b+v|0,this.h3+m+r|0,this.h4+n+p|0,this.h0+s+w|0)}roundClean(){d.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}t.RIPEMD160=p,t.ripemd160=(0,mt.wrapConstructor)((()=>new p))}));f(Tt);var Ot=Tt.ripemd160;Tt.RIPEMD160;var Ht=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.sha224=t.sha256=void 0;const n=(e,t,n)=>e&t^e&n^t&n,r=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),o=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),i=new Uint32Array(64);class s extends Lt.SHA2{constructor(){super(64,32,8,!1),this.A=0|o[0],this.B=0|o[1],this.C=0|o[2],this.D=0|o[3],this.E=0|o[4],this.F=0|o[5],this.G=0|o[6],this.H=0|o[7]}get(){const{A:e,B:t,C:n,D:r,E:o,F:i,G:s,H:a}=this;return[e,t,n,r,o,i,s,a]}set(e,t,n,r,o,i,s,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|o,this.F=0|i,this.G=0|s,this.H=0|a}process(e,t){for(let n=0;n<16;n++,t+=4)i[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=i[e-15],n=i[e-2],r=(0,mt.rotr)(t,7)^(0,mt.rotr)(t,18)^t>>>3,o=(0,mt.rotr)(n,17)^(0,mt.rotr)(n,19)^n>>>10;i[e]=o+i[e-7]+r+i[e-16]|0}let{A:o,B:s,C:a,D:c,E:u,F:l,G:h,H:f}=this;for(let e=0;e<64;e++){const t=f+((0,mt.rotr)(u,6)^(0,mt.rotr)(u,11)^(0,mt.rotr)(u,25))+((d=u)&l^~d&h)+r[e]+i[e]|0,p=((0,mt.rotr)(o,2)^(0,mt.rotr)(o,13)^(0,mt.rotr)(o,22))+n(o,s,a)|0;f=h,h=l,l=u,u=c+t|0,c=a,a=s,s=o,o=t+p|0}var d;o=o+this.A|0,s=s+this.B|0,a=a+this.C|0,c=c+this.D|0,u=u+this.E|0,l=l+this.F|0,h=h+this.G|0,f=f+this.H|0,this.set(o,s,a,c,u,l,h,f)}roundClean(){i.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class a extends s{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}t.sha256=(0,mt.wrapConstructor)((()=>new s)),t.sha224=(0,mt.wrapConstructor)((()=>new a))}));f(Ht),Ht.sha224;var _t=Ht.sha256,It=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.add5L=t.add5H=t.add4H=t.add4L=t.add3H=t.add3L=t.add=t.rotlBL=t.rotlBH=t.rotlSL=t.rotlSH=t.rotr32L=t.rotr32H=t.rotrBL=t.rotrBH=t.rotrSL=t.rotrSH=t.shrSL=t.shrSH=t.toBig=t.split=t.fromBig=void 0;const n=BigInt(2**32-1),r=BigInt(32);function o(e,t=!1){return t?{h:Number(e&n),l:Number(e>>r&n)}:{h:0|Number(e>>r&n),l:0|Number(e&n)}}function i(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:a}=o(e[i],t);[n[i],r[i]]=[s,a]}return[n,r]}t.fromBig=o,t.split=i;const s=(e,t)=>BigInt(e>>>0)<<r|BigInt(t>>>0);t.toBig=s;const a=(e,t,n)=>e>>>n;t.shrSH=a;const c=(e,t,n)=>e<<32-n|t>>>n;t.shrSL=c;const u=(e,t,n)=>e>>>n|t<<32-n;t.rotrSH=u;const l=(e,t,n)=>e<<32-n|t>>>n;t.rotrSL=l;const h=(e,t,n)=>e<<64-n|t>>>n-32;t.rotrBH=h;const f=(e,t,n)=>e>>>n-32|t<<64-n;t.rotrBL=f;const d=(e,t)=>t;t.rotr32H=d;const p=(e,t)=>e;t.rotr32L=p;const y=(e,t,n)=>e<<n|t>>>32-n;t.rotlSH=y;const w=(e,t,n)=>t<<n|e>>>32-n;t.rotlSL=w;const b=(e,t,n)=>t<<n-32|e>>>64-n;t.rotlBH=b;const g=(e,t,n)=>e<<n-32|t>>>64-n;function m(e,t,n,r){const o=(t>>>0)+(r>>>0);return{h:e+n+(o/2**32|0)|0,l:0|o}}t.rotlBL=g,t.add=m;const v=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0);t.add3L=v;const E=(e,t,n,r)=>t+n+r+(e/2**32|0)|0;t.add3H=E;const x=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0);t.add4L=x;const B=(e,t,n,r,o)=>t+n+r+o+(e/2**32|0)|0;t.add4H=B;const A=(e,t,n,r,o)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(o>>>0);t.add5L=A;const k=(e,t,n,r,o,i)=>t+n+r+o+i+(e/2**32|0)|0;t.add5H=k;const S={fromBig:o,split:i,toBig:s,shrSH:a,shrSL:c,rotrSH:u,rotrSL:l,rotrBH:h,rotrBL:f,rotr32H:d,rotr32L:p,rotlSH:y,rotlSL:w,rotlBH:b,rotlBL:g,add:m,add3L:v,add3H:E,add4L:x,add4H:B,add5H:k,add5L:A};t.default=S}));f(It),It.add5L,It.add5H,It.add4H,It.add4L,It.add3H,It.add3L,It.add,It.rotlBL,It.rotlBH,It.rotlSL,It.rotlSH,It.rotr32L,It.rotr32H,It.rotrBL,It.rotrBH,It.rotrSL,It.rotrSH,It.shrSL,It.shrSH,It.toBig,It.split,It.fromBig;var Ut=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.sha384=t.sha512_256=t.sha512_224=t.sha512=t.SHA512=void 0;const[n,r]=(()=>It.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),o=new Uint32Array(80),i=new Uint32Array(80);class s extends Lt.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:o,Cl:i,Dh:s,Dl:a,Eh:c,El:u,Fh:l,Fl:h,Gh:f,Gl:d,Hh:p,Hl:y}=this;return[e,t,n,r,o,i,s,a,c,u,l,h,f,d,p,y]}set(e,t,n,r,o,i,s,a,c,u,l,h,f,d,p,y){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|o,this.Cl=0|i,this.Dh=0|s,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|h,this.Gh=0|f,this.Gl=0|d,this.Hh=0|p,this.Hl=0|y}process(e,t){for(let n=0;n<16;n++,t+=4)o[n]=e.getUint32(t),i[n]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|o[e-15],n=0|i[e-15],r=It.default.rotrSH(t,n,1)^It.default.rotrSH(t,n,8)^It.default.shrSH(t,n,7),s=It.default.rotrSL(t,n,1)^It.default.rotrSL(t,n,8)^It.default.shrSL(t,n,7),a=0|o[e-2],c=0|i[e-2],u=It.default.rotrSH(a,c,19)^It.default.rotrBH(a,c,61)^It.default.shrSH(a,c,6),l=It.default.rotrSL(a,c,19)^It.default.rotrBL(a,c,61)^It.default.shrSL(a,c,6),h=It.default.add4L(s,l,i[e-7],i[e-16]),f=It.default.add4H(h,r,u,o[e-7],o[e-16]);o[e]=0|f,i[e]=0|h}let{Ah:s,Al:a,Bh:c,Bl:u,Ch:l,Cl:h,Dh:f,Dl:d,Eh:p,El:y,Fh:w,Fl:b,Gh:g,Gl:m,Hh:v,Hl:E}=this;for(let e=0;e<80;e++){const t=It.default.rotrSH(p,y,14)^It.default.rotrSH(p,y,18)^It.default.rotrBH(p,y,41),x=It.default.rotrSL(p,y,14)^It.default.rotrSL(p,y,18)^It.default.rotrBL(p,y,41),B=p&w^~p&g,A=y&b^~y&m,k=It.default.add5L(E,x,A,r[e],i[e]),S=It.default.add5H(k,v,t,B,n[e],o[e]),L=0|k,T=It.default.rotrSH(s,a,28)^It.default.rotrBH(s,a,34)^It.default.rotrBH(s,a,39),O=It.default.rotrSL(s,a,28)^It.default.rotrBL(s,a,34)^It.default.rotrBL(s,a,39),H=s&c^s&l^c&l,_=a&u^a&h^u&h;v=0|g,E=0|m,g=0|w,m=0|b,w=0|p,b=0|y,({h:p,l:y}=It.default.add(0|f,0|d,0|S,0|L)),f=0|l,d=0|h,l=0|c,h=0|u,c=0|s,u=0|a;const I=It.default.add3L(L,O,_);s=It.default.add3H(I,S,T,H),a=0|I}({h:s,l:a}=It.default.add(0|this.Ah,0|this.Al,0|s,0|a)),({h:c,l:u}=It.default.add(0|this.Bh,0|this.Bl,0|c,0|u)),({h:l,l:h}=It.default.add(0|this.Ch,0|this.Cl,0|l,0|h)),({h:f,l:d}=It.default.add(0|this.Dh,0|this.Dl,0|f,0|d)),({h:p,l:y}=It.default.add(0|this.Eh,0|this.El,0|p,0|y)),({h:w,l:b}=It.default.add(0|this.Fh,0|this.Fl,0|w,0|b)),({h:g,l:m}=It.default.add(0|this.Gh,0|this.Gl,0|g,0|m)),({h:v,l:E}=It.default.add(0|this.Hh,0|this.Hl,0|v,0|E)),this.set(s,a,c,u,l,h,f,d,p,y,w,b,g,m,v,E)}roundClean(){o.fill(0),i.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}t.SHA512=s;class a extends s{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class c extends s{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class u extends s{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}t.sha512=(0,mt.wrapConstructor)((()=>new s)),t.sha512_224=(0,mt.wrapConstructor)((()=>new a)),t.sha512_256=(0,mt.wrapConstructor)((()=>new c)),t.sha384=(0,mt.wrapConstructor)((()=>new u))}));f(Ut),Ut.sha384,Ut.sha512_256,Ut.sha512_224;var Ct=Ut.sha512;Ut.SHA512;var Nt=d((function(e,t){function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function r(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function o(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function i(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function s(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function a(e,t){o(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(t,"__esModule",{value:!0}),t.output=t.exists=t.hash=t.bytes=t.bool=t.number=void 0,t.number=n,t.bool=r,t.bytes=o,t.hash=i,t.exists=s,t.output=a;const c={number:n,bool:r,bytes:o,hash:i,exists:s,output:a};t.default=c}));f(Nt),Nt.output,Nt.exists,Nt.hash,Nt.bytes,Nt.bool,Nt.number;var Rt=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=void 0,t.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0}));f(Rt),Rt.crypto;var Pt=d((function(e,t){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.checkOpts=t.Hash=t.concatBytes=t.toBytes=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.isLE=t.rotr=t.createView=t.u32=t.u8=void 0;const n=e=>e instanceof Uint8Array;t.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);t.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));t.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(t.rotr=(e,t)=>e<<32-t|e>>>t,t.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!t.isLE)throw new Error("Non little-endian hardware is not supported");const r=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));t.bytesToHex=function(e){if(!n(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=r[e[n]];return t},t.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let t=0;t<n.length;t++){const r=2*t,o=e.slice(r,r+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");n[t]=i}return n};function o(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function i(e){if("string"==typeof e&&(e=o(e)),!n(e))throw new Error("expected Uint8Array, got "+typeof e);return e}t.nextTick=async()=>{},t.asyncLoop=async function(e,n,r){let o=Date.now();for(let i=0;i<e;i++){r(i);const e=Date.now()-o;e>=0&&e<n||(await(0,t.nextTick)(),o+=e)}},t.utf8ToBytes=o,t.toBytes=i,t.concatBytes=function(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let r=0;return e.forEach((e=>{if(!n(e))throw new Error("Uint8Array expected");t.set(e,r),r+=e.length})),t};t.Hash=class{clone(){return this._cloneInto()}};t.checkOpts=function(e,t){if(void 0!==t&&("object"!=typeof t||(n=t,"[object Object]"!==Object.prototype.toString.call(n)||n.constructor!==Object)))throw new Error("Options should be object or undefined");var n;return Object.assign(e,t)},t.wrapConstructor=function(e){const t=t=>e().update(i(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t},t.wrapConstructorWithOpts=function(e){const t=(t,n)=>e(n).update(i(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},t.wrapXOFConstructorWithOpts=function(e){const t=(t,n)=>e(n).update(i(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},t.randomBytes=function(e=32){if(Rt.crypto&&"function"==typeof Rt.crypto.getRandomValues)return Rt.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}}));f(Pt),Pt.randomBytes,Pt.wrapXOFConstructorWithOpts,Pt.wrapConstructorWithOpts,Pt.wrapConstructor,Pt.checkOpts,Pt.Hash,Pt.concatBytes,Pt.toBytes,Pt.utf8ToBytes,Pt.asyncLoop,Pt.nextTick,Pt.hexToBytes,Pt.bytesToHex,Pt.isLE,Pt.rotr,Pt.createView,Pt.u32,Pt.u8;var jt=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SHA2=void 0;class n extends Pt.Hash{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,Pt.createView)(this.buffer)}update(e){Nt.default.exists(this);const{view:t,buffer:n,blockLen:r}=this,o=(e=(0,Pt.toBytes)(e)).length;for(let i=0;i<o;){const s=Math.min(r-this.pos,o-i);if(s!==r)n.set(e.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=(0,Pt.createView)(e);for(;r<=o-i;i+=r)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Nt.default.exists(this),Nt.default.output(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:o}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(n,0),i=0);for(let e=i;e<r;e++)t[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),a=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,s,r),e.setUint32(t+u,a,r)}(n,r-8,BigInt(8*this.length),o),this.process(n,0);const s=(0,Pt.createView)(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)s.setUint32(4*e,u[e],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:o,destroyed:i,pos:s}=this;return e.length=r,e.pos=s,e.finished=o,e.destroyed=i,r%t&&e.buffer.set(n),e}}t.SHA2=n}));f(jt),jt.SHA2;var Ft=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.sha224=t.sha256=void 0;const n=(e,t,n)=>e&t^e&n^t&n,r=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),o=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),i=new Uint32Array(64);class s extends jt.SHA2{constructor(){super(64,32,8,!1),this.A=0|o[0],this.B=0|o[1],this.C=0|o[2],this.D=0|o[3],this.E=0|o[4],this.F=0|o[5],this.G=0|o[6],this.H=0|o[7]}get(){const{A:e,B:t,C:n,D:r,E:o,F:i,G:s,H:a}=this;return[e,t,n,r,o,i,s,a]}set(e,t,n,r,o,i,s,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|o,this.F=0|i,this.G=0|s,this.H=0|a}process(e,t){for(let n=0;n<16;n++,t+=4)i[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=i[e-15],n=i[e-2],r=(0,Pt.rotr)(t,7)^(0,Pt.rotr)(t,18)^t>>>3,o=(0,Pt.rotr)(n,17)^(0,Pt.rotr)(n,19)^n>>>10;i[e]=o+i[e-7]+r+i[e-16]|0}let{A:o,B:s,C:a,D:c,E:u,F:l,G:h,H:f}=this;for(let e=0;e<64;e++){const t=f+((0,Pt.rotr)(u,6)^(0,Pt.rotr)(u,11)^(0,Pt.rotr)(u,25))+((d=u)&l^~d&h)+r[e]+i[e]|0,p=((0,Pt.rotr)(o,2)^(0,Pt.rotr)(o,13)^(0,Pt.rotr)(o,22))+n(o,s,a)|0;f=h,h=l,l=u,u=c+t|0,c=a,a=s,s=o,o=t+p|0}var d;o=o+this.A|0,s=s+this.B|0,a=a+this.C|0,c=c+this.D|0,u=u+this.E|0,l=l+this.F|0,h=h+this.G|0,f=f+this.H|0,this.set(o,s,a,c,u,l,h,f)}roundClean(){i.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class a extends s{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}t.sha256=(0,Pt.wrapConstructor)((()=>new s)),t.sha224=(0,Pt.wrapConstructor)((()=>new a))}));f(Ft),Ft.sha224,Ft.sha256;var qt=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateObject=t.createHmacDrbg=t.bitMask=t.bitSet=t.bitGet=t.bitLen=t.utf8ToBytes=t.equalBytes=t.concatBytes=t.ensureBytes=t.numberToVarBytesBE=t.numberToBytesLE=t.numberToBytesBE=t.bytesToNumberLE=t.bytesToNumberBE=t.hexToBytes=t.hexToNumber=t.numberToHexUnpadded=t.bytesToHex=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const n=BigInt(0),r=BigInt(1),o=BigInt(2),i=e=>e instanceof Uint8Array,s=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function a(e){if(!i(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=s[e[n]];return t}function c(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function u(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function l(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let t=0;t<n.length;t++){const r=2*t,o=e.slice(r,r+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");n[t]=i}return n}function h(e,t){return l(e.toString(16).padStart(2*t,"0"))}function f(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let n=0;return e.forEach((e=>{if(!i(e))throw new Error("Uint8Array expected");t.set(e,n),n+=e.length})),t}t.bytesToHex=a,t.numberToHexUnpadded=c,t.hexToNumber=u,t.hexToBytes=l,t.bytesToNumberBE=function(e){return u(a(e))},t.bytesToNumberLE=function(e){if(!i(e))throw new Error("Uint8Array expected");return u(a(Uint8Array.from(e).reverse()))},t.numberToBytesBE=h,t.numberToBytesLE=function(e,t){return h(e,t).reverse()},t.numberToVarBytesBE=function(e){return l(c(e))},t.ensureBytes=function(e,t,n){let r;if("string"==typeof t)try{r=l(t)}catch(n){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${n}`)}else{if(!i(t))throw new Error(`${e} must be hex string or Uint8Array`);r=Uint8Array.from(t)}const o=r.length;if("number"==typeof n&&o!==n)throw new Error(`${e} expected ${n} bytes, got ${o}`);return r},t.concatBytes=f,t.equalBytes=function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},t.utf8ToBytes=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))},t.bitLen=function(e){let t;for(t=0;e>n;e>>=r,t+=1);return t},t.bitGet=function(e,t){return e>>BigInt(t)&r};t.bitSet=(e,t,o)=>e|(o?r:n)<<BigInt(t);t.bitMask=e=>(o<<BigInt(e-1))-r;const d=e=>new Uint8Array(e),p=e=>Uint8Array.from(e);t.createHmacDrbg=function(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=d(e),o=d(e),i=0;const s=()=>{r.fill(1),o.fill(0),i=0},a=(...e)=>n(o,r,...e),c=(e=d())=>{o=a(p([0]),e),r=a(),0!==e.length&&(o=a(p([1]),e),r=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=a();const t=r.slice();n.push(t),e+=r.length}return f(...n)};return(e,t)=>{let n;for(s(),c(e);!(n=t(u()));)c();return s(),n}};const y={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};t.validateObject=function(e,t,n={}){const r=(t,n,r)=>{const o=y[n];if("function"!=typeof o)throw new Error(`Invalid validator "${n}", expected function`);const i=e[t];if(!(r&&void 0===i||o(i,e)))throw new Error(`Invalid param ${String(t)}=${i} (${typeof i}), expected ${n}`)};for(const[e,n]of Object.entries(t))r(e,n,!1);for(const[e,t]of Object.entries(n))r(e,t,!0);return e}}));f(qt),qt.validateObject,qt.createHmacDrbg,qt.bitMask,qt.bitSet,qt.bitGet,qt.bitLen,qt.utf8ToBytes,qt.equalBytes,qt.concatBytes,qt.ensureBytes,qt.numberToVarBytesBE,qt.numberToBytesLE,qt.numberToBytesBE,qt.bytesToNumberLE,qt.bytesToNumberBE,qt.hexToBytes,qt.hexToNumber,qt.numberToHexUnpadded,qt.bytesToHex;var Dt=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.hashToPrivateScalar=t.FpSqrtEven=t.FpSqrtOdd=t.Field=t.nLength=t.FpIsSquare=t.FpDiv=t.FpInvertBatch=t.FpPow=t.validateField=t.isNegativeLE=t.FpSqrt=t.tonelliShanks=t.invert=t.pow2=t.pow=t.mod=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const n=BigInt(0),r=BigInt(1),o=BigInt(2),i=BigInt(3),s=BigInt(4),a=BigInt(5),c=BigInt(8);function u(e,t){const r=e%t;return r>=n?r:t+r}function l(e,t,o){if(o<=n||t<n)throw new Error("Expected power/modulo > 0");if(o===r)return n;let i=r;for(;t>n;)t&r&&(i=i*e%o),e=e*e%o,t>>=r;return i}function h(e,t){if(e===n||t<=n)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let o=u(e,t),i=t,s=n,a=r;for(;o!==n;){const e=i%o,t=s-a*(i/o);i=o,o=e,s=a,a=t}if(i!==r)throw new Error("invert: does not exist");return u(s,t)}function f(e){const t=(e-r)/o;let i,a,c;for(i=e-r,a=0;i%o===n;i/=o,a++);for(c=o;c<e&&l(c,t,e)!==e-r;c++);if(1===a){const t=(e+r)/s;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}const u=(i+r)/o;return function(e,n){if(e.pow(n,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let o=a,s=e.pow(e.mul(e.ONE,c),i),l=e.pow(n,u),h=e.pow(n,i);for(;!e.eql(h,e.ONE);){if(e.eql(h,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(h);t<o&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const n=e.pow(s,r<<BigInt(o-t-1));s=e.sqr(n),l=e.mul(l,n),h=e.mul(h,s),o=t}return l}}function d(e){if(e%s===i){const t=(e+r)/s;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%c===a){const t=(e-a)/c;return function(e,n){const r=e.mul(n,o),i=e.pow(r,t),s=e.mul(n,i),a=e.mul(e.mul(s,o),i),c=e.mul(s,e.sub(a,e.ONE));if(!e.eql(e.sqr(c),n))throw new Error("Cannot find square root");return c}}return f(e)}BigInt(9),BigInt(16),t.mod=u,t.pow=l,t.pow2=function(e,t,r){let o=e;for(;t-- >n;)o*=o,o%=r;return o},t.invert=h,t.tonelliShanks=f,t.FpSqrt=d;t.isNegativeLE=(e,t)=>(u(e,t)&r)===r;const p=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function y(e,t,o){if(o<n)throw new Error("Expected power > 0");if(o===n)return e.ONE;if(o===r)return t;let i=e.ONE,s=t;for(;o>n;)o&r&&(i=e.mul(i,s)),s=e.sqr(s),o>>=r;return i}function w(e,t){const n=new Array(t.length),r=t.reduce(((t,r,o)=>e.is0(r)?t:(n[o]=t,e.mul(t,r))),e.ONE),o=e.inv(r);return t.reduceRight(((t,r,o)=>e.is0(r)?t:(n[o]=e.mul(t,n[o]),e.mul(t,r))),o),n}function b(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}t.validateField=function(e){const t=p.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,qt.validateObject)(e,t)},t.FpPow=y,t.FpInvertBatch=w,t.FpDiv=function(e,t,n){return e.mul(t,"bigint"==typeof n?h(n,e.ORDER):e.inv(n))},t.FpIsSquare=function(e){const t=(e.ORDER-r)/o;return n=>{const r=e.pow(n,t);return e.eql(r,e.ZERO)||e.eql(r,e.ONE)}},t.nLength=b,t.Field=function(e,t,o=!1,i={}){if(e<=n)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:s,nByteLength:a}=b(e,t);if(a>2048)throw new Error("Field lengths over 2048 bytes are not supported");const c=d(e),l=Object.freeze({ORDER:e,BITS:s,BYTES:a,MASK:(0,qt.bitMask)(s),ZERO:n,ONE:r,create:t=>u(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return n<=t&&t<e},is0:e=>e===n,isOdd:e=>(e&r)===r,neg:t=>u(-t,e),eql:(e,t)=>e===t,sqr:t=>u(t*t,e),add:(t,n)=>u(t+n,e),sub:(t,n)=>u(t-n,e),mul:(t,n)=>u(t*n,e),pow:(e,t)=>y(l,e,t),div:(t,n)=>u(t*h(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>h(t,e),sqrt:i.sqrt||(e=>c(l,e)),invertBatch:e=>w(l,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>o?(0,qt.numberToBytesLE)(e,a):(0,qt.numberToBytesBE)(e,a),fromBytes:e=>{if(e.length!==a)throw new Error(`Fp.fromBytes: expected ${a}, got ${e.length}`);return o?(0,qt.bytesToNumberLE)(e):(0,qt.bytesToNumberBE)(e)}});return Object.freeze(l)},t.FpSqrtOdd=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const n=e.sqrt(t);return e.isOdd(n)?n:e.neg(n)},t.FpSqrtEven=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const n=e.sqrt(t);return e.isOdd(n)?e.neg(n):n},t.hashToPrivateScalar=function(e,t,n=!1){const o=(e=(0,qt.ensureBytes)("privateHash",e)).length,i=b(t).nByteLength+8;if(i<24||o<i||o>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${o}`);return u(n?(0,qt.bytesToNumberLE)(e):(0,qt.bytesToNumberBE)(e),t-r)+r}}));f(Dt),Dt.hashToPrivateScalar,Dt.FpSqrtEven,Dt.FpSqrtOdd,Dt.Field,Dt.nLength,Dt.FpIsSquare,Dt.FpDiv,Dt.FpInvertBatch,Dt.FpPow,Dt.validateField,Dt.isNegativeLE,Dt.FpSqrt,Dt.tonelliShanks,Dt.invert,Dt.pow2,Dt.pow;var $t=Dt.mod,Mt=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateBasic=t.wNAF=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const n=BigInt(0),r=BigInt(1);t.wNAF=function(e,t){const o=(e,t)=>{const n=t.negate();return e?n:t},i=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:o,unsafeLadder(t,o){let i=e.ZERO,s=t;for(;o>n;)o&r&&(i=i.add(s)),s=s.double(),o>>=r;return i},precomputeWindow(e,t){const{windows:n,windowSize:r}=i(t),o=[];let s=e,a=s;for(let e=0;e<n;e++){a=s,o.push(a);for(let e=1;e<r;e++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(t,n,s){const{windows:a,windowSize:c}=i(t);let u=e.ZERO,l=e.BASE;const h=BigInt(2**t-1),f=2**t,d=BigInt(t);for(let e=0;e<a;e++){const t=e*c;let i=Number(s&h);s>>=d,i>c&&(i-=f,s+=r);const a=t,p=t+Math.abs(i)-1,y=e%2!=0,w=i<0;0===i?l=l.add(o(y,n[a])):u=u.add(o(w,n[p]))}return{p:u,f:l}},wNAFCached(e,t,n,r){const o=e._WINDOW_SIZE||1;let i=t.get(e);return i||(i=this.precomputeWindow(e,o),1!==o&&t.set(e,r(i))),this.wNAF(o,i,n)}}},t.validateBasic=function(e){return(0,Dt.validateField)(e.Fp),(0,qt.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,Dt.nLength)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}}));f(Mt),Mt.validateBasic,Mt.wNAF;var Kt=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.mapToCurveSimpleSWU=t.SWUFpSqrtRatio=t.weierstrass=t.weierstrassPoints=t.DER=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const n=qt;const{bytesToNumberBE:r,hexToBytes:o}=qt;t.DER={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){const{Err:n}=t.DER;if(e.length<2||2!==e[0])throw new n("Invalid signature integer tag");const o=e[1],i=e.subarray(2,o+2);if(!o||i.length!==o)throw new n("Invalid signature integer: wrong length");if(128&i[0])throw new n("Invalid signature integer: negative");if(0===i[0]&&!(128&i[1]))throw new n("Invalid signature integer: unnecessary leading zero");return{d:r(i),l:e.subarray(o+2)}},toSig(e){const{Err:n}=t.DER,r="string"==typeof e?o(e):e;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let i=r.length;if(i<2||48!=r[0])throw new n("Invalid signature tag");if(r[1]!==i-2)throw new n("Invalid signature: incorrect length");const{d:s,l:a}=t.DER._parseInt(r.subarray(2)),{d:c,l:u}=t.DER._parseInt(a);if(u.length)throw new n("Invalid signature: left bytes after parsing");return{r:s,s:c}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,n=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},r=t(n(e.s)),o=t(n(e.r)),i=r.length/2,s=o.length/2,a=n(i),c=n(s);return`30${n(s+i+4)}02${c}${o}02${a}${r}`}};const i=BigInt(0),s=BigInt(1),a=BigInt(2),c=BigInt(3),u=BigInt(4);function l(e){const t=function(e){const t=(0,Mt.validateBasic)(e);qt.validateObject(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:o}=t;if(n){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,o=t.toBytes||((e,t,n)=>{const o=t.toAffine();return qt.concatBytes(Uint8Array.from([4]),r.toBytes(o.x),r.toBytes(o.y))}),a=t.fromBytes||(e=>{const t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function u(e){const{a:n,b:o}=t,i=r.sqr(e),s=r.mul(i,e);return r.add(r.add(s,r.mul(e,n)),o)}if(!r.eql(r.sqr(t.Gy),u(t.Gx)))throw new Error("bad generator point: equation left != right");function l(e){return"bigint"==typeof e&&i<e&&e<t.n}function h(e){if(!l(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function f(e){const{allowedPrivateKeyLengths:r,nByteLength:o,wrapPrivateKey:i,n:s}=t;if(r&&"bigint"!=typeof e){if(e instanceof Uint8Array&&(e=qt.bytesToHex(e)),"string"!=typeof e||!r.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*o,"0")}let a;try{a="bigint"==typeof e?e:qt.bytesToNumberBE((0,n.ensureBytes)("private key",e,o))}catch(t){throw new Error(`private key must be ${o} bytes, hex or bigint, not ${typeof e}`)}return i&&(a=Dt.mod(a,s)),h(a),a}const d=new Map;function p(e){if(!(e instanceof y))throw new Error("ProjectivePoint expected")}class y{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required")}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof y)throw new Error("projective point not allowed");const o=e=>r.eql(e,r.ZERO);return o(t)&&o(n)?y.ZERO:new y(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(y.fromAffine)}static fromHex(e){const t=y.fromAffine(a((0,n.ensureBytes)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return y.BASE.multiply(f(e))}_setWindowSize(e){this._WINDOW_SIZE=e,d.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:e,y:n}=this.toAffine();if(!r.isValid(e)||!r.isValid(n))throw new Error("bad point: x or y not FE");const o=r.sqr(n),i=u(e);if(!r.eql(o,i))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){p(e);const{px:t,py:n,pz:o}=this,{px:i,py:s,pz:a}=e,c=r.eql(r.mul(t,a),r.mul(i,o)),u=r.eql(r.mul(n,a),r.mul(s,o));return c&&u}negate(){return new y(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,o=r.mul(n,c),{px:i,py:s,pz:a}=this;let u=r.ZERO,l=r.ZERO,h=r.ZERO,f=r.mul(i,i),d=r.mul(s,s),p=r.mul(a,a),w=r.mul(i,s);return w=r.add(w,w),h=r.mul(i,a),h=r.add(h,h),u=r.mul(e,h),l=r.mul(o,p),l=r.add(u,l),u=r.sub(d,l),l=r.add(d,l),l=r.mul(u,l),u=r.mul(w,u),h=r.mul(o,h),p=r.mul(e,p),w=r.sub(f,p),w=r.mul(e,w),w=r.add(w,h),h=r.add(f,f),f=r.add(h,f),f=r.add(f,p),f=r.mul(f,w),l=r.add(l,f),p=r.mul(s,a),p=r.add(p,p),f=r.mul(p,w),u=r.sub(u,f),h=r.mul(p,d),h=r.add(h,h),h=r.add(h,h),new y(u,l,h)}add(e){p(e);const{px:n,py:o,pz:i}=this,{px:s,py:a,pz:u}=e;let l=r.ZERO,h=r.ZERO,f=r.ZERO;const d=t.a,w=r.mul(t.b,c);let b=r.mul(n,s),g=r.mul(o,a),m=r.mul(i,u),v=r.add(n,o),E=r.add(s,a);v=r.mul(v,E),E=r.add(b,g),v=r.sub(v,E),E=r.add(n,i);let x=r.add(s,u);return E=r.mul(E,x),x=r.add(b,m),E=r.sub(E,x),x=r.add(o,i),l=r.add(a,u),x=r.mul(x,l),l=r.add(g,m),x=r.sub(x,l),f=r.mul(d,E),l=r.mul(w,m),f=r.add(l,f),l=r.sub(g,f),f=r.add(g,f),h=r.mul(l,f),g=r.add(b,b),g=r.add(g,b),m=r.mul(d,m),E=r.mul(w,E),g=r.add(g,m),m=r.sub(b,m),m=r.mul(d,m),E=r.add(E,m),b=r.mul(g,E),h=r.add(h,b),b=r.mul(x,E),l=r.mul(v,l),l=r.sub(l,b),b=r.mul(v,g),f=r.mul(x,f),f=r.add(f,b),new y(l,h,f)}subtract(e){return this.add(e.negate())}is0(){return this.equals(y.ZERO)}wNAF(e){return b.wNAFCached(this,d,e,(e=>{const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(y.fromAffine)}))}multiplyUnsafe(e){const n=y.ZERO;if(e===i)return n;if(h(e),e===s)return this;const{endo:o}=t;if(!o)return b.unsafeLadder(this,e);let{k1neg:a,k1:c,k2neg:u,k2:l}=o.splitScalar(e),f=n,d=n,p=this;for(;c>i||l>i;)c&s&&(f=f.add(p)),l&s&&(d=d.add(p)),p=p.double(),c>>=s,l>>=s;return a&&(f=f.negate()),u&&(d=d.negate()),d=new y(r.mul(d.px,o.beta),d.py,d.pz),f.add(d)}multiply(e){h(e);let n,o,i=e;const{endo:s}=t;if(s){const{k1neg:e,k1:t,k2neg:a,k2:c}=s.splitScalar(i);let{p:u,f:l}=this.wNAF(t),{p:h,f:f}=this.wNAF(c);u=b.constTimeNegate(e,u),h=b.constTimeNegate(a,h),h=new y(r.mul(h.px,s.beta),h.py,h.pz),n=u.add(h),o=l.add(f)}else{const{p:e,f:t}=this.wNAF(i);n=e,o=t}return y.normalizeZ([n,o])[0]}multiplyAndAddUnsafe(e,t,n){const r=y.BASE,o=(e,t)=>t!==i&&t!==s&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),a=o(this,t).add(o(e,n));return a.is0()?void 0:a}toAffine(e){const{px:t,py:n,pz:o}=this,i=this.is0();null==e&&(e=i?r.ONE:r.inv(o));const s=r.mul(t,e),a=r.mul(n,e),c=r.mul(o,e);if(i)return{x:r.ZERO,y:r.ZERO};if(!r.eql(c,r.ONE))throw new Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===s)return!0;if(n)return n(y,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===s?this:n?n(y,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),o(y,this,e)}toHex(e=!0){return qt.bytesToHex(this.toRawBytes(e))}}y.BASE=new y(t.Gx,t.Gy,r.ONE),y.ZERO=new y(r.ZERO,r.ONE,r.ZERO);const w=t.nBitLength,b=(0,Mt.wNAF)(y,t.endo?Math.ceil(w/2):w);return{CURVE:t,ProjectivePoint:y,normPrivateKeyToScalar:f,weierstrassEquation:u,isWithinCurveOrder:l}}function h(e,t){const n=e.ORDER;let r=i;for(let e=n-s;e%a===i;e/=a)r+=s;const o=r,l=a<<o-s-s,h=l*a,f=(n-s)/h,d=(f-s)/a,p=h-s,y=l,w=e.pow(t,f),b=e.pow(t,(f+s)/a);let g=(t,n)=>{let r=w,i=e.pow(n,p),c=e.sqr(i);c=e.mul(c,n);let u=e.mul(t,c);u=e.pow(u,d),u=e.mul(u,i),i=e.mul(u,n),c=e.mul(u,t);let l=e.mul(c,i);u=e.pow(l,y);let h=e.eql(u,e.ONE);i=e.mul(c,b),u=e.mul(l,r),c=e.cmov(i,c,h),l=e.cmov(u,l,h);for(let t=o;t>s;t--){let n=t-a;n=a<<n-s;let o=e.pow(l,n);const u=e.eql(o,e.ONE);i=e.mul(c,r),r=e.mul(r,r),o=e.mul(l,r),c=e.cmov(i,c,u),l=e.cmov(o,l,u)}return{isValid:h,value:c}};if(e.ORDER%u===c){const n=(e.ORDER-c)/u,r=e.sqrt(e.neg(t));g=(t,o)=>{let i=e.sqr(o);const s=e.mul(t,o);i=e.mul(i,s);let a=e.pow(i,n);a=e.mul(a,s);const c=e.mul(a,r),u=e.mul(e.sqr(a),o),l=e.eql(u,t);return{isValid:l,value:e.cmov(c,a,l)}}}return g}t.weierstrassPoints=l,t.weierstrass=function(e){const r=function(e){const t=(0,Mt.validateBasic)(e);return qt.validateObject(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:o,n:a}=r,c=o.BYTES+1,u=2*o.BYTES+1;function h(e){return Dt.mod(e,a)}function f(e){return Dt.invert(e,a)}const{ProjectivePoint:d,normPrivateKeyToScalar:p,weierstrassEquation:y,isWithinCurveOrder:w}=l({...r,toBytes(e,t,n){const r=t.toAffine(),i=o.toBytes(r.x),s=qt.concatBytes;return n?s(Uint8Array.from([t.hasEvenY()?2:3]),i):s(Uint8Array.from([4]),i,o.toBytes(r.y))},fromBytes(e){const t=e.length,n=e[0],r=e.subarray(1);if(t!==c||2!==n&&3!==n){if(t===u&&4===n){return{x:o.fromBytes(r.subarray(0,o.BYTES)),y:o.fromBytes(r.subarray(o.BYTES,2*o.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${c} compressed bytes or ${u} uncompressed bytes`)}{const e=qt.bytesToNumberBE(r);if(!(i<(a=e)&&a<o.ORDER))throw new Error("Point is not on curve");const t=y(e);let c=o.sqrt(t);return 1==(1&n)!==((c&s)===s)&&(c=o.neg(c)),{x:e,y:c}}var a}}),b=e=>qt.bytesToHex(qt.numberToBytesBE(e,r.nByteLength));function g(e){return e>a>>s}const m=(e,t,n)=>qt.bytesToNumberBE(e.slice(t,n));class v{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){const t=r.nByteLength;return e=(0,n.ensureBytes)("compactSignature",e,2*t),new v(m(e,0,t),m(e,t,2*t))}static fromDER(e){const{r:r,s:o}=t.DER.toSig((0,n.ensureBytes)("DER",e));return new v(r,o)}assertValidity(){if(!w(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!w(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new v(this.r,this.s,e)}recoverPublicKey(e){const{r:t,s:i,recovery:s}=this,a=A((0,n.ensureBytes)("msgHash",e));if(null==s||![0,1,2,3].includes(s))throw new Error("recovery id invalid");const c=2===s||3===s?t+r.n:t;if(c>=o.ORDER)throw new Error("recovery id 2 or 3 invalid");const u=0==(1&s)?"02":"03",l=d.fromHex(u+b(c)),p=f(c),y=h(-a*p),w=h(i*p),g=d.BASE.multiplyAndAddUnsafe(l,y,w);if(!g)throw new Error("point at infinify");return g.assertValidity(),g}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new v(this.r,h(-this.s),this.recovery):this}toDERRawBytes(){return qt.hexToBytes(this.toDERHex())}toDERHex(){return t.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return qt.hexToBytes(this.toCompactHex())}toCompactHex(){return b(this.r)+b(this.s)}}const E={isValidPrivateKey(e){try{return p(e),!0}catch(e){return!1}},normPrivateKeyToScalar:p,randomPrivateKey:()=>{const e=r.randomBytes(o.BYTES+8),t=Dt.hashToPrivateScalar(e,a);return qt.numberToBytesBE(t,r.nByteLength)},precompute:(e=8,t=d.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function x(e){const t=e instanceof Uint8Array,n="string"==typeof e,r=(t||n)&&e.length;return t?r===c||r===u:n?r===2*c||r===2*u:e instanceof d}const B=r.bits2int||function(e){const t=qt.bytesToNumberBE(e),n=8*e.length-r.nBitLength;return n>0?t>>BigInt(n):t},A=r.bits2int_modN||function(e){return h(B(e))},k=qt.bitMask(r.nBitLength);function S(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(!(i<=e&&e<k))throw new Error(`bigint expected < 2^${r.nBitLength}`);return qt.numberToBytesBE(e,r.nByteLength)}function L(e,t,a=T){if(["recovered","canonical"].some((e=>e in a)))throw new Error("sign() legacy options not supported");const{hash:c,randomBytes:u}=r;let{lowS:l,prehash:y,extraEntropy:b}=a;null==l&&(l=!0),e=(0,n.ensureBytes)("msgHash",e),y&&(e=(0,n.ensureBytes)("prehashed msgHash",c(e)));const m=A(e),E=p(t),x=[S(E),S(m)];if(null!=b){const e=!0===b?u(o.BYTES):b;x.push((0,n.ensureBytes)("extraEntropy",e,o.BYTES))}const k=qt.concatBytes(...x),L=m;return{seed:k,k2sig:function(e){const t=B(e);if(!w(t))return;const n=f(t),r=d.BASE.multiply(t).toAffine(),o=h(r.x);if(o===i)return;const a=h(n*h(L+o*E));if(a===i)return;let c=(r.x===o?0:2)|Number(r.y&s),u=a;return l&&g(a)&&(u=function(e){return g(e)?h(-e):e}(a),c^=1),new v(o,u,c)}}}const T={lowS:r.lowS,prehash:!1},O={lowS:r.lowS,prehash:!1};return d.BASE._setWindowSize(8),{CURVE:r,getPublicKey:function(e,t=!0){return d.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,n=!0){if(x(e))throw new Error("first arg must be private key");if(!x(t))throw new Error("second arg must be public key");return d.fromHex(t).multiply(p(e)).toRawBytes(n)},sign:function(e,t,n=T){const{seed:o,k2sig:i}=L(e,t,n),s=r;return qt.createHmacDrbg(s.hash.outputLen,s.nByteLength,s.hmac)(o,i)},verify:function(e,o,i,s=O){const a=e;if(o=(0,n.ensureBytes)("msgHash",o),i=(0,n.ensureBytes)("publicKey",i),"strict"in s)throw new Error("options.strict was renamed to lowS");const{lowS:c,prehash:u}=s;let l,p;try{if("string"==typeof a||a instanceof Uint8Array)try{l=v.fromDER(a)}catch(e){if(!(e instanceof t.DER.Err))throw e;l=v.fromCompact(a)}else{if("object"!=typeof a||"bigint"!=typeof a.r||"bigint"!=typeof a.s)throw new Error("PARSE");{const{r:e,s:t}=a;l=new v(e,t)}}p=d.fromHex(i)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(c&&l.hasHighS())return!1;u&&(o=r.hash(o));const{r:y,s:w}=l,b=A(o),g=f(w),m=h(b*g),E=h(y*g),x=d.BASE.multiplyAndAddUnsafe(p,m,E)?.toAffine();return!!x&&h(x.x)===y},ProjectivePoint:d,Signature:v,utils:E}},t.SWUFpSqrtRatio=h,t.mapToCurveSimpleSWU=function(e,t){if(Dt.validateField(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=h(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let o,i,s,a,c,u,l,h;o=e.sqr(r),o=e.mul(o,t.Z),i=e.sqr(o),i=e.add(i,o),s=e.add(i,e.ONE),s=e.mul(s,t.B),a=e.cmov(t.Z,e.neg(i),!e.eql(i,e.ZERO)),a=e.mul(a,t.A),i=e.sqr(s),u=e.sqr(a),c=e.mul(u,t.A),i=e.add(i,c),i=e.mul(i,s),u=e.mul(u,a),c=e.mul(u,t.B),i=e.add(i,c),l=e.mul(o,s);const{isValid:f,value:d}=n(i,u);h=e.mul(o,r),h=e.mul(h,d),l=e.cmov(l,s,f),h=e.cmov(h,d,f);const p=e.isOdd(r)===e.isOdd(h);return h=e.cmov(e.neg(h),h,p),l=e.div(l,a),{x:l,y:h}}}}));f(Kt),Kt.mapToCurveSimpleSWU,Kt.SWUFpSqrtRatio,Kt.weierstrass,Kt.weierstrassPoints,Kt.DER;var Vt=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.createHasher=t.isogenyMap=t.hash_to_field=t.expand_message_xof=t.expand_message_xmd=void 0;const n=qt.bytesToNumberBE;function r(e,t){if(e<0||e>=1<<8*t)throw new Error(`bad I2OSP call: value=${e} length=${t}`);const n=Array.from({length:t}).fill(0);for(let r=t-1;r>=0;r--)n[r]=255&e,e>>>=8;return new Uint8Array(n)}function o(e,t){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]^t[r];return n}function i(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected")}function s(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function a(e,t,n,a){i(e),i(t),s(n),t.length>255&&(t=a((0,qt.concatBytes)((0,qt.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));const{outputLen:c,blockLen:u}=a,l=Math.ceil(n/c);if(l>255)throw new Error("Invalid xmd length");const h=(0,qt.concatBytes)(t,r(t.length,1)),f=r(0,u),d=r(n,2),p=new Array(l),y=a((0,qt.concatBytes)(f,e,d,r(0,1),h));p[0]=a((0,qt.concatBytes)(y,r(1,1),h));for(let e=1;e<=l;e++){const t=[o(y,p[e-1]),r(e+1,1),h];p[e]=a((0,qt.concatBytes)(...t))}return(0,qt.concatBytes)(...p).slice(0,n)}function c(e,t,n,o,a){if(i(e),i(t),s(n),t.length>255){const e=Math.ceil(2*o/8);t=a.create({dkLen:e}).update((0,qt.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(n>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return a.create({dkLen:n}).update(e).update(r(n,2)).update(t).update(r(t.length,1)).digest()}function u(e,t,r){(0,qt.validateObject)(r,{DST:"string",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:o,k:u,m:l,hash:h,expand:f,DST:d}=r;i(e),s(t);const p=function(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return(0,qt.utf8ToBytes)(e);throw new Error("DST must be Uint8Array or string")}(d),y=o.toString(2).length,w=Math.ceil((y+u)/8),b=t*l*w;let g;if("xmd"===f)g=a(e,p,b,h);else if("xof"===f)g=c(e,p,b,u,h);else{if("_internal_pass"!==f)throw new Error('expand must be "xmd" or "xof"');g=e}const m=new Array(t);for(let e=0;e<t;e++){const t=new Array(l);for(let r=0;r<l;r++){const i=w*(r+e*l),s=g.subarray(i,i+w);t[r]=(0,Dt.mod)(n(s),o)}m[e]=t}return m}t.expand_message_xmd=a,t.expand_message_xof=c,t.hash_to_field=u,t.isogenyMap=function(e,t){const n=t.map((e=>Array.from(e).reverse()));return(t,r)=>{const[o,i,s,a]=n.map((n=>n.reduce(((n,r)=>e.add(e.mul(n,t),r)))));return t=e.div(o,i),r=e.mul(r,e.div(s,a)),{x:t,y:r}}},t.createHasher=function(e,t,n){if("function"!=typeof t)throw new Error("mapToCurve() must be defined");return{hashToCurve(r,o){const i=u(r,2,{...n,DST:n.DST,...o}),s=e.fromAffine(t(i[0])),a=e.fromAffine(t(i[1])),c=s.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,o){const i=u(r,1,{...n,DST:n.encodeDST,...o}),s=e.fromAffine(t(i[0])).clearCofactor();return s.assertValidity(),s}}}}));f(Vt),Vt.createHasher,Vt.isogenyMap,Vt.hash_to_field,Vt.expand_message_xof,Vt.expand_message_xmd;var zt=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;class n extends Pt.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Nt.default.hash(e);const n=(0,Pt.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,o=new Uint8Array(r);o.set(n.length>r?e.create().update(n).digest():n);for(let e=0;e<o.length;e++)o[e]^=54;this.iHash.update(o),this.oHash=e.create();for(let e=0;e<o.length;e++)o[e]^=106;this.oHash.update(o),o.fill(0)}update(e){return Nt.default.exists(this),this.iHash.update(e),this}digestInto(e){Nt.default.exists(this),Nt.default.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:o,blockLen:i,outputLen:s}=this;return e.finished=r,e.destroyed=o,e.blockLen=i,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=n;t.hmac=(e,t,r)=>new n(e,t).update(r).digest(),t.hmac.create=(e,t)=>new n(e,t)}));f(zt),zt.hmac,zt.HMAC;var Wt=d((function(e,t){
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
function n(e){return{hash:e,hmac:(t,...n)=>(0,zt.hmac)(e,t,(0,Pt.concatBytes)(...n)),randomBytes:Pt.randomBytes}}Object.defineProperty(t,"__esModule",{value:!0}),t.createCurve=t.getHash=void 0,t.getHash=n,t.createCurve=function(e,t){const r=t=>(0,Kt.weierstrass)({...e,...n(t)});return Object.freeze({...r(t),create:r})}}));f(Wt),Wt.createCurve,Wt.getHash;var Gt=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.encodeToCurve=t.hashToCurve=t.schnorr=t.secp256k1=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const n=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),r=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),o=BigInt(1),i=BigInt(2),s=(e,t)=>(e+t/i)/t;function a(e){const t=n,r=BigInt(3),o=BigInt(6),s=BigInt(11),a=BigInt(22),u=BigInt(23),l=BigInt(44),h=BigInt(88),f=e*e*e%t,d=f*f*e%t,p=(0,Dt.pow2)(d,r,t)*d%t,y=(0,Dt.pow2)(p,r,t)*d%t,w=(0,Dt.pow2)(y,i,t)*f%t,b=(0,Dt.pow2)(w,s,t)*w%t,g=(0,Dt.pow2)(b,a,t)*b%t,m=(0,Dt.pow2)(g,l,t)*g%t,v=(0,Dt.pow2)(m,h,t)*m%t,E=(0,Dt.pow2)(v,l,t)*g%t,x=(0,Dt.pow2)(E,r,t)*d%t,B=(0,Dt.pow2)(x,u,t)*b%t,A=(0,Dt.pow2)(B,o,t)*f%t,k=(0,Dt.pow2)(A,i,t);if(!c.eql(c.sqr(k),e))throw new Error("Cannot find square root");return k}const c=(0,Dt.Field)(n,void 0,void 0,{sqrt:a});t.secp256k1=(0,Wt.createCurve)({a:BigInt(0),b:BigInt(7),Fp:c,n:r,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=r,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),i=-o*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),a=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),c=n,u=BigInt("0x100000000000000000000000000000000"),l=s(c*e,t),h=s(-i*e,t);let f=(0,Dt.mod)(e-l*n-h*a,t),d=(0,Dt.mod)(-l*i-h*c,t);const p=f>u,y=d>u;if(p&&(f=t-f),y&&(d=t-d),f>u||d>u)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:p,k1:f,k2neg:y,k2:d}}}},Ft.sha256);const u=BigInt(0),l=e=>"bigint"==typeof e&&u<e&&e<n,h=e=>"bigint"==typeof e&&u<e&&e<r,f={};function d(e,...t){let n=f[e];if(void 0===n){const t=(0,Ft.sha256)(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=(0,qt.concatBytes)(t,t),f[e]=n}return(0,Ft.sha256)((0,qt.concatBytes)(n,...t))}const p=e=>e.toRawBytes(!0).slice(1),y=e=>(0,qt.numberToBytesBE)(e,32),w=e=>(0,Dt.mod)(e,n),b=e=>(0,Dt.mod)(e,r),g=t.secp256k1.ProjectivePoint,m=(e,t,n)=>g.BASE.multiplyAndAddUnsafe(e,t,n);function v(e){let n=t.secp256k1.utils.normPrivateKeyToScalar(e),r=g.fromPrivateKey(n);return{scalar:r.hasEvenY()?n:b(-n),bytes:p(r)}}function E(e){if(!l(e))throw new Error("bad x: need 0 < x < p");const t=w(e*e);let n=a(w(t*e+BigInt(7)));n%i!==u&&(n=w(-n));const r=new g(e,n,o);return r.assertValidity(),r}function x(...e){return b((0,qt.bytesToNumberBE)(d("BIP0340/challenge",...e)))}function B(e){return v(e).bytes}function A(e,t,n=(0,Pt.randomBytes)(32)){const r=(0,qt.ensureBytes)("message",e),{bytes:o,scalar:i}=v(t),s=(0,qt.ensureBytes)("auxRand",n,32),a=y(i^(0,qt.bytesToNumberBE)(d("BIP0340/aux",s))),c=d("BIP0340/nonce",a,o,r),l=b((0,qt.bytesToNumberBE)(c));if(l===u)throw new Error("sign failed: k is zero");const{bytes:h,scalar:f}=v(l),p=x(h,o,r),w=new Uint8Array(64);if(w.set(h,0),w.set(y(b(f+p*i)),32),!k(w,r,o))throw new Error("sign: Invalid signature produced");return w}function k(e,t,n){const r=(0,qt.ensureBytes)("signature",e,64),o=(0,qt.ensureBytes)("message",t),i=(0,qt.ensureBytes)("publicKey",n,32);try{const e=E((0,qt.bytesToNumberBE)(i)),t=(0,qt.bytesToNumberBE)(r.subarray(0,32));if(!l(t))return!1;const n=(0,qt.bytesToNumberBE)(r.subarray(32,64));if(!h(n))return!1;const s=x(y(t),p(e),o),a=m(e,n,b(-s));return!(!a||!a.hasEvenY()||a.toAffine().x!==t)}catch(e){return!1}}t.schnorr={getPublicKey:B,sign:A,verify:k,utils:{randomPrivateKey:t.secp256k1.utils.randomPrivateKey,lift_x:E,pointToBytes:p,numberToBytesBE:qt.numberToBytesBE,bytesToNumberBE:qt.bytesToNumberBE,taggedHash:d,mod:Dt.mod}};const S=(()=>(0,Vt.isogenyMap)(c,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map((e=>e.map((e=>BigInt(e)))))))(),L=(()=>(0,Kt.mapToCurveSimpleSWU)(c,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:c.create(BigInt("-11"))}))(),T=(()=>(0,Vt.createHasher)(t.secp256k1.ProjectivePoint,(e=>{const{x:t,y:n}=L(c.create(e[0]));return S(t,n)}),{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:c.ORDER,m:1,k:128,expand:"xmd",hash:Ft.sha256}))();t.hashToCurve=T.hashToCurve,t.encodeToCurve=T.encodeToCurve}));f(Gt),Gt.encodeToCurve,Gt.hashToCurve,Gt.schnorr;var Zt=Gt.secp256k1;const Yt=Zt.ProjectivePoint,Jt=Ze(_t);function Xt(e){return BigInt(`0x${Bt(e)}`)}const Qt=Et("Bitcoin seed"),en={private:76066276,public:76067358},tn=2147483648,nn=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error(`Invalid number=${e}. Should be from 0 to 2 ** 32 - 1`);const t=new Uint8Array(4);return At(t).setUint32(0,e,!1),t};class rn{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return e=this.pubHash,At(e).getUint32(0,!1);var e}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const e=this.privateKey;if(!e)throw new Error("No private key");return Jt.encode(this.serialize(this.versions.private,vt(new Uint8Array([0]),e)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return Jt.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(e,t=en){if(bt(e),8*e.length<128||8*e.length>512)throw new Error(`HDKey: wrong seed length=${e.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const n=St(Ct,Qt,e);return new rn({versions:t,chainCode:n.slice(32),privateKey:n.slice(0,32)})}static fromExtendedKey(e,t=en){const n=Jt.decode(e),r=At(n),o=r.getUint32(0,!1),i={versions:t,depth:n[4],parentFingerprint:r.getUint32(5,!1),index:r.getUint32(9,!1),chainCode:n.slice(13,45)},s=n.slice(45),a=0===s[0];if(o!==t[a?"private":"public"])throw new Error("Version mismatch");return new rn(a?{...i,privateKey:s.slice(1)}:{...i,publicKey:s})}static fromJSON(e){return rn.fromExtendedKey(e.xpriv)}constructor(e){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!e||"object"!=typeof e)throw new Error("HDKey.constructor must not be called directly");if(this.versions=e.versions||en,this.depth=e.depth||0,this.chainCode=e.chainCode,this.index=e.index||0,this.parentFingerprint=e.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(e.publicKey&&e.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(e.privateKey){if(!Zt.utils.isValidPrivateKey(e.privateKey))throw new Error("Invalid private key");this.privKey="bigint"==typeof e.privateKey?e.privateKey:Xt(e.privateKey),this.privKeyBytes=(t=this.privKey,xt(t.toString(16).padStart(64,"0"))),this.pubKey=Zt.getPublicKey(e.privateKey,!0)}else{if(!e.publicKey)throw new Error("HDKey: no public or private key provided");this.pubKey=Yt.fromHex(e.publicKey).toRawBytes(!0)}var t,n;this.pubHash=(n=this.pubKey,Ot(_t(n)))}derive(e){if(!/^[mM]'?/.test(e))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return this;const t=e.replace(/^[mM]'?\//,"").split("/");let n=this;for(const e of t){const t=/^(\d+)('?)$/.exec(e);if(!t||3!==t.length)throw new Error(`Invalid child index: ${e}`);let r=+t[1];if(!Number.isSafeInteger(r)||r>=tn)throw new Error("Invalid index");"'"===t[2]&&(r+=tn),n=n.deriveChild(r)}return n}deriveChild(e){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let t=nn(e);if(e>=tn){const e=this.privateKey;if(!e)throw new Error("Could not derive hardened child key");t=vt(new Uint8Array([0]),e,t)}else t=vt(this.pubKey,t);const n=St(Ct,this.chainCode,t),r=Xt(n.slice(0,32)),o=n.slice(32);if(!Zt.utils.isValidPrivateKey(r))throw new Error("Tweak bigger than curve order");const i={versions:this.versions,chainCode:o,depth:this.depth+1,parentFingerprint:this.fingerprint,index:e};try{if(this.privateKey){const e=$t(this.privKey+r,Zt.CURVE.n);if(!Zt.utils.isValidPrivateKey(e))throw new Error("The tweak was out of range or the resulted private key is invalid");i.privateKey=e}else{const e=Yt.fromHex(this.pubKey).add(Yt.fromPrivateKey(r));if(e.equals(Yt.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");i.publicKey=e.toRawBytes(!0)}return new rn(i)}catch(t){return this.deriveChild(e+1)}}sign(e){if(!this.privateKey)throw new Error("No privateKey set!");return bt(e,32),Zt.sign(e,this.privKey).toCompactRawBytes()}verify(e,t){if(bt(e,32),bt(t,64),!this.publicKey)throw new Error("No publicKey set!");let n;try{n=Zt.Signature.fromCompact(t)}catch(e){return!1}return Zt.verify(n,e,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(e,t){if(!this.chainCode)throw new Error("No chainCode set");return bt(t,33),vt(nn(e),new Uint8Array([this.depth]),nn(this.parentFingerprint),nn(this.index),this.chainCode,t)}}var on=d((function(e,t){
/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */
Object.defineProperty(t,"__esModule",{value:!0}),t.setBigUint64=t.Hash=t.equalBytes=t.ensureBytes=t.checkOpts=t.concatBytes=t.toBytes=t.bytesToUtf8=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.isLE=t.createView=t.u32=t.u16=t.u8=void 0;const n=e=>e instanceof Uint8Array;t.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);t.u16=e=>new Uint16Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/2));t.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));if(t.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),t.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!t.isLE)throw new Error("Non little-endian hardware is not supported");const r=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));t.bytesToHex=function(e){if(!n(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=r[e[n]];return t},t.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let t=0;t<n.length;t++){const r=2*t,o=e.slice(r,r+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");n[t]=i}return n};function o(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}t.nextTick=async()=>{},t.asyncLoop=async function(e,n,r){let o=Date.now();for(let i=0;i<e;i++){r(i);const e=Date.now()-o;e>=0&&e<n||(await(0,t.nextTick)(),o+=e)}},t.utf8ToBytes=o,t.bytesToUtf8=function(e){return(new TextDecoder).decode(e)},t.toBytes=function(e){if("string"==typeof e&&(e=o(e)),!n(e))throw new Error("expected Uint8Array, got "+typeof e);return e},t.concatBytes=function(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let r=0;return e.forEach((e=>{if(!n(e))throw new Error("Uint8Array expected");t.set(e,r),r+=e.length})),t};t.checkOpts=function(e,t){if(void 0!==t&&("object"!=typeof t||(n=t,"[object Object]"!==Object.prototype.toString.call(n)||n.constructor!==Object)))throw new Error("options must be object or undefined");var n;return Object.assign(e,t)},t.ensureBytes=function(e,t){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");if("number"==typeof t&&e.length!==t)throw new Error(`Uint8Array length ${t} expected`)},t.equalBytes=function(e,t){if(e.length!==t.length)throw new Error("equalBytes: Different size of Uint8Arrays");let n=!0;for(let r=0;r<e.length;r++)n&&(n=e[r]===t[r]);return n};t.Hash=class{},t.setBigUint64=function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),a=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,s,r),e.setUint32(t+u,a,r)}}));f(on),on.setBigUint64,on.Hash;var sn=on.equalBytes,an=on.ensureBytes;on.checkOpts,on.concatBytes,on.toBytes,on.bytesToUtf8,on.utf8ToBytes,on.asyncLoop,on.nextTick,on.hexToBytes,on.bytesToHex,on.isLE,on.createView,on.u32,on.u16,on.u8;var cn=d((function(e,t){function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function r(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function o(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function i(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("hash must be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function s(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function a(e,t){o(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(t,"__esModule",{value:!0}),t.output=t.exists=t.hash=t.bytes=t.bool=t.number=void 0,t.number=n,t.bool=r,t.bytes=o,t.hash=i,t.exists=s,t.output=a;const c={number:n,bool:r,bytes:o,hash:i,exists:s,output:a};t.default=c}));f(cn),cn.output,cn.exists,cn.hash,cn.bytes,cn.bool,cn.number;var un=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.poly1305=t.wrapConstructorWithKey=void 0;const n=(e,t)=>255&e[t++]|(255&e[t++])<<8;class r{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=(0,on.toBytes)(e),(0,on.ensureBytes)(e,32);const t=n(e,0),r=n(e,2),o=n(e,4),i=n(e,6),s=n(e,8),a=n(e,10),c=n(e,12),u=n(e,14);this.r[0]=8191&t,this.r[1]=8191&(t>>>13|r<<3),this.r[2]=7939&(r>>>10|o<<6),this.r[3]=8191&(o>>>7|i<<9),this.r[4]=255&(i>>>4|s<<12),this.r[5]=s>>>1&8190,this.r[6]=8191&(s>>>14|a<<2),this.r[7]=8065&(a>>>11|c<<5),this.r[8]=8191&(c>>>8|u<<8),this.r[9]=u>>>5&127;for(let t=0;t<8;t++)this.pad[t]=n(e,16+2*t)}process(e,t,r=!1){const o=r?0:2048,{h:i,r:s}=this,a=s[0],c=s[1],u=s[2],l=s[3],h=s[4],f=s[5],d=s[6],p=s[7],y=s[8],w=s[9],b=n(e,t+0),g=n(e,t+2),m=n(e,t+4),v=n(e,t+6),E=n(e,t+8),x=n(e,t+10),B=n(e,t+12),A=n(e,t+14);let k=i[0]+(8191&b),S=i[1]+(8191&(b>>>13|g<<3)),L=i[2]+(8191&(g>>>10|m<<6)),T=i[3]+(8191&(m>>>7|v<<9)),O=i[4]+(8191&(v>>>4|E<<12)),H=i[5]+(E>>>1&8191),_=i[6]+(8191&(E>>>14|x<<2)),I=i[7]+(8191&(x>>>11|B<<5)),U=i[8]+(8191&(B>>>8|A<<8)),C=i[9]+(A>>>5|o),N=0,R=N+k*a+S*(5*w)+L*(5*y)+T*(5*p)+O*(5*d);N=R>>>13,R&=8191,R+=H*(5*f)+_*(5*h)+I*(5*l)+U*(5*u)+C*(5*c),N+=R>>>13,R&=8191;let P=N+k*c+S*a+L*(5*w)+T*(5*y)+O*(5*p);N=P>>>13,P&=8191,P+=H*(5*d)+_*(5*f)+I*(5*h)+U*(5*l)+C*(5*u),N+=P>>>13,P&=8191;let j=N+k*u+S*c+L*a+T*(5*w)+O*(5*y);N=j>>>13,j&=8191,j+=H*(5*p)+_*(5*d)+I*(5*f)+U*(5*h)+C*(5*l),N+=j>>>13,j&=8191;let F=N+k*l+S*u+L*c+T*a+O*(5*w);N=F>>>13,F&=8191,F+=H*(5*y)+_*(5*p)+I*(5*d)+U*(5*f)+C*(5*h),N+=F>>>13,F&=8191;let q=N+k*h+S*l+L*u+T*c+O*a;N=q>>>13,q&=8191,q+=H*(5*w)+_*(5*y)+I*(5*p)+U*(5*d)+C*(5*f),N+=q>>>13,q&=8191;let D=N+k*f+S*h+L*l+T*u+O*c;N=D>>>13,D&=8191,D+=H*a+_*(5*w)+I*(5*y)+U*(5*p)+C*(5*d),N+=D>>>13,D&=8191;let $=N+k*d+S*f+L*h+T*l+O*u;N=$>>>13,$&=8191,$+=H*c+_*a+I*(5*w)+U*(5*y)+C*(5*p),N+=$>>>13,$&=8191;let M=N+k*p+S*d+L*f+T*h+O*l;N=M>>>13,M&=8191,M+=H*u+_*c+I*a+U*(5*w)+C*(5*y),N+=M>>>13,M&=8191;let K=N+k*y+S*p+L*d+T*f+O*h;N=K>>>13,K&=8191,K+=H*l+_*u+I*c+U*a+C*(5*w),N+=K>>>13,K&=8191;let V=N+k*w+S*y+L*p+T*d+O*f;N=V>>>13,V&=8191,V+=H*h+_*l+I*u+U*c+C*a,N+=V>>>13,V&=8191,N=(N<<2)+N|0,N=N+R|0,R=8191&N,N>>>=13,P+=N,i[0]=R,i[1]=P,i[2]=j,i[3]=F,i[4]=q,i[5]=D,i[6]=$,i[7]=M,i[8]=K,i[9]=V}finalize(){const{h:e,pad:t}=this,n=new Uint16Array(10);let r=e[1]>>>13;e[1]&=8191;for(let t=2;t<10;t++)e[t]+=r,r=e[t]>>>13,e[t]&=8191;e[0]+=5*r,r=e[0]>>>13,e[0]&=8191,e[1]+=r,r=e[1]>>>13,e[1]&=8191,e[2]+=r,n[0]=e[0]+5,r=n[0]>>>13,n[0]&=8191;for(let t=1;t<10;t++)n[t]=e[t]+r,r=n[t]>>>13,n[t]&=8191;n[9]-=8192;let o=(1^r)-1;for(let e=0;e<10;e++)n[e]&=o;o=~o;for(let t=0;t<10;t++)e[t]=e[t]&o|n[t];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let i=e[0]+t[0];e[0]=65535&i;for(let n=1;n<8;n++)i=(e[n]+t[n]|0)+(i>>>16)|0,e[n]=65535&i}update(e){cn.default.exists(this);const{buffer:t,blockLen:n}=this,r=(e=(0,on.toBytes)(e)).length;for(let o=0;o<r;){const i=Math.min(n-this.pos,r-o);if(i!==n)t.set(e.subarray(o,o+i),this.pos),this.pos+=i,o+=i,this.pos===n&&(this.process(t,0,!1),this.pos=0);else for(;n<=r-o;o+=n)this.process(e,o)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){cn.default.exists(this),cn.default.output(e,this),this.finished=!0;const{buffer:t,h:n}=this;let{pos:r}=this;if(r){for(t[r++]=1;r<16;r++)t[r]=0;this.process(t,0,!0)}this.finalize();let o=0;for(let t=0;t<8;t++)e[o++]=n[t]>>>0,e[o++]=n[t]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}}function o(e){const t=(t,n)=>e(n).update((0,on.toBytes)(t)).digest(),n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t}t.wrapConstructorWithKey=o,t.poly1305=o((e=>new r(e)))}));f(un),un.poly1305,un.wrapConstructorWithKey;var ln=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.salsaBasic=void 0;const n=(0,on.utf8ToBytes)("expand 16-byte k"),r=(0,on.utf8ToBytes)("expand 32-byte k"),o=(0,on.u32)(n),i=(0,on.u32)(r),s=e=>!(e.byteOffset%4);t.salsaBasic=e=>{const{core:t,rounds:n,counterRight:r,counterLen:a,allow128bitKeys:c,extendNonceFn:u,blockLen:l}=(0,on.checkOpts)({rounds:20,counterRight:!1,counterLen:8,allow128bitKeys:!0,blockLen:64},e);cn.default.number(a),cn.default.number(n),cn.default.number(l),cn.default.bool(r),cn.default.bool(c);const h=l/4;if(l%4!=0)throw new Error("Salsa/ChaCha: blockLen must be aligned to 4 bytes");return(e,f,d,p,y=0)=>{if(cn.default.bytes(e),cn.default.bytes(f),cn.default.bytes(d),p||(p=new Uint8Array(d.length)),cn.default.bytes(p),cn.default.number(y),y<0||y>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");if(p.length<d.length)throw new Error(`Salsa/ChaCha: output (${p.length}) is shorter than data (${d.length})`);const w=[];let b,g;if(32===e.length)b=e,g=i;else{if(16!==e.length||!c)throw new Error(`Salsa/ChaCha: invalid 32-byte key, got length=${e.length}`);b=new Uint8Array(32),b.set(e),b.set(e,16),g=o,w.push(b)}if(u){if(f.length<=16)throw new Error("Salsa/ChaCha: extended nonce must be bigger than 16 bytes");b=u(g,b,f.subarray(0,16),new Uint8Array(32)),w.push(b),f=f.subarray(16)}const m=16-a;if(f.length!==m)throw new Error(`Salsa/ChaCha: nonce must be ${m} or 16 bytes`);if(12!==m){const e=new Uint8Array(12);e.set(f,r?0:12-f.length),w.push(f=e)}const v=new Uint8Array(l),E=(0,on.u32)(v),x=(0,on.u32)(b),B=(0,on.u32)(f),A=s(d)&&(0,on.u32)(d),k=s(p)&&(0,on.u32)(p);w.push(E);const S=d.length;for(let e=0,r=y;e<S;r++){if(t(g,x,B,E,r,n),r>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");const o=Math.min(l,S-e);if(o===l&&k&&A){const t=e/4;if(e%4!=0)throw new Error("Salsa/ChaCha: invalid block position");for(let e=0;e<h;e++)k[t+e]=A[t+e]^E[e];e+=l}else{for(let t=0;t<o;t++)p[e+t]=d[e+t]^v[t];e+=o}}for(let e=0;e<w.length;e++)w[e].fill(0);return p}}}));f(ln),ln.salsaBasic;var hn=d((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.xchacha20poly1305=t.chacha20poly1305=t._poly1305_aead=t.chacha12=t.chacha8=t.xchacha20=t.chacha20=t.chacha20orig=t.hchacha=void 0;const n=(e,t)=>e<<t|e>>>32-t;function r(e,t,r,o,i,s=20){let a=e[0],c=e[1],u=e[2],l=e[3],h=t[0],f=t[1],d=t[2],p=t[3],y=t[4],w=t[5],b=t[6],g=t[7],m=i,v=r[0],E=r[1],x=r[2],B=a,A=c,k=u,S=l,L=h,T=f,O=d,H=p,_=y,I=w,U=b,C=g,N=m,R=v,P=E,j=x;for(let e=0;e<s;e+=2)B=B+L|0,N=n(N^B,16),_=_+N|0,L=n(L^_,12),B=B+L|0,N=n(N^B,8),_=_+N|0,L=n(L^_,7),A=A+T|0,R=n(R^A,16),I=I+R|0,T=n(T^I,12),A=A+T|0,R=n(R^A,8),I=I+R|0,T=n(T^I,7),k=k+O|0,P=n(P^k,16),U=U+P|0,O=n(O^U,12),k=k+O|0,P=n(P^k,8),U=U+P|0,O=n(O^U,7),S=S+H|0,j=n(j^S,16),C=C+j|0,H=n(H^C,12),S=S+H|0,j=n(j^S,8),C=C+j|0,H=n(H^C,7),B=B+T|0,j=n(j^B,16),U=U+j|0,T=n(T^U,12),B=B+T|0,j=n(j^B,8),U=U+j|0,T=n(T^U,7),A=A+O|0,N=n(N^A,16),C=C+N|0,O=n(O^C,12),A=A+O|0,N=n(N^A,8),C=C+N|0,O=n(O^C,7),k=k+H|0,R=n(R^k,16),_=_+R|0,H=n(H^_,12),k=k+H|0,R=n(R^k,8),_=_+R|0,H=n(H^_,7),S=S+L|0,P=n(P^S,16),I=I+P|0,L=n(L^I,12),S=S+L|0,P=n(P^S,8),I=I+P|0,L=n(L^I,7);let F=0;o[F++]=a+B|0,o[F++]=c+A|0,o[F++]=u+k|0,o[F++]=l+S|0,o[F++]=h+L|0,o[F++]=f+T|0,o[F++]=d+O|0,o[F++]=p+H|0,o[F++]=y+_|0,o[F++]=w+I|0,o[F++]=b+U|0,o[F++]=g+C|0,o[F++]=m+N|0,o[F++]=v+R|0,o[F++]=E+P|0,o[F++]=x+j|0}function o(e,t,r,o){const i=(0,on.u32)(t),s=(0,on.u32)(r),a=(0,on.u32)(o);let c=e[0],u=e[1],l=e[2],h=e[3],f=i[0],d=i[1],p=i[2],y=i[3],w=i[4],b=i[5],g=i[6],m=i[7],v=s[0],E=s[1],x=s[2],B=s[3];for(let e=0;e<20;e+=2)c=c+f|0,v=n(v^c,16),w=w+v|0,f=n(f^w,12),c=c+f|0,v=n(v^c,8),w=w+v|0,f=n(f^w,7),u=u+d|0,E=n(E^u,16),b=b+E|0,d=n(d^b,12),u=u+d|0,E=n(E^u,8),b=b+E|0,d=n(d^b,7),l=l+p|0,x=n(x^l,16),g=g+x|0,p=n(p^g,12),l=l+p|0,x=n(x^l,8),g=g+x|0,p=n(p^g,7),h=h+y|0,B=n(B^h,16),m=m+B|0,y=n(y^m,12),h=h+y|0,B=n(B^h,8),m=m+B|0,y=n(y^m,7),c=c+d|0,B=n(B^c,16),g=g+B|0,d=n(d^g,12),c=c+d|0,B=n(B^c,8),g=g+B|0,d=n(d^g,7),u=u+p|0,v=n(v^u,16),m=m+v|0,p=n(p^m,12),u=u+p|0,v=n(v^u,8),m=m+v|0,p=n(p^m,7),l=l+y|0,E=n(E^l,16),w=w+E|0,y=n(y^w,12),l=l+y|0,E=n(E^l,8),w=w+E|0,y=n(y^w,7),h=h+f|0,x=n(x^h,16),b=b+x|0,f=n(f^b,12),h=h+f|0,x=n(x^h,8),b=b+x|0,f=n(f^b,7);return a[0]=c,a[1]=u,a[2]=l,a[3]=h,a[4]=v,a[5]=E,a[6]=x,a[7]=B,o}t.hchacha=o,t.chacha20orig=(0,ln.salsaBasic)({core:r,counterRight:!1,counterLen:8}),t.chacha20=(0,ln.salsaBasic)({core:r,counterRight:!1,counterLen:4,allow128bitKeys:!1}),t.xchacha20=(0,ln.salsaBasic)({core:r,counterRight:!1,counterLen:8,extendNonceFn:o,allow128bitKeys:!1}),t.chacha8=(0,ln.salsaBasic)({core:r,counterRight:!1,counterLen:4,rounds:8}),t.chacha12=(0,ln.salsaBasic)({core:r,counterRight:!1,counterLen:4,rounds:12});const i=new Uint8Array(16),s=(e,t)=>{e.update(t);const n=t.length%16;n&&e.update(i.subarray(n))},a=(e,t,n,r,o)=>{const i=e(t,n,new Uint8Array(32)),a=un.poly1305.create(i);o&&s(a,o),s(a,r);const c=new Uint8Array(16),u=(0,on.createView)(c);(0,on.setBigUint64)(u,0,BigInt(o?o.length:0),!0),(0,on.setBigUint64)(u,8,BigInt(r.length),!0),a.update(c);const l=a.digest();return i.fill(0),l};t._poly1305_aead=e=>(t,n,r)=>{const o=16;return(0,on.ensureBytes)(t,32),(0,on.ensureBytes)(n),{tagLength:o,encrypt:(i,s)=>{const c=i.length,u=c+o;s?(0,on.ensureBytes)(s,u):s=new Uint8Array(u),e(t,n,i,s,1);const l=a(e,t,n,s.subarray(0,-16),r);return s.set(l,c),s},decrypt:(i,s)=>{const c=i.length,u=c-o;if(c<o)throw new Error("encrypted data must be at least 16 bytes");s?(0,on.ensureBytes)(s,u):s=new Uint8Array(u);const l=i.subarray(0,-16),h=i.subarray(-16),f=a(e,t,n,l,r);if(!(0,on.equalBytes)(h,f))throw new Error("invalid tag");return e(t,n,l,s,1),s}}},t.chacha20poly1305=(0,t._poly1305_aead)(t.chacha20),t.xchacha20poly1305=(0,t._poly1305_aead)(t.xchacha20)}));f(hn),hn.xchacha20poly1305,hn.chacha20poly1305,hn._poly1305_aead,hn.chacha12,hn.chacha8,hn.xchacha20;var fn=hn.chacha20;hn.chacha20orig,hn.hchacha;var dn=d((function(e,t){function n(e,t,n){return p.default.hash(e),void 0===n&&(n=new Uint8Array(e.outputLen)),(0,O.hmac)(e,(0,w.toBytes)(n),(0,w.toBytes)(t))}Object.defineProperty(t,"__esModule",{value:!0}),t.hkdf=t.expand=t.extract=void 0,t.extract=n;const r=new Uint8Array([0]),o=new Uint8Array;function i(e,t,n,i=32){if(p.default.hash(e),p.default.number(i),i>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(i/e.outputLen);void 0===n&&(n=o);const a=new Uint8Array(s*e.outputLen),c=O.hmac.create(e,t),u=c._cloneInto(),l=new Uint8Array(c.outputLen);for(let t=0;t<s;t++)r[0]=t+1,u.update(0===t?o:l).update(n).update(r).digestInto(l),a.set(l,e.outputLen*t),c._cloneInto(u);return c.destroy(),u.destroy(),l.fill(0),r.fill(0),a.slice(0,i)}t.expand=i;t.hkdf=(e,t,r,o,s)=>i(e,n(e,t,r),o,s)}));f(dn);var pn=dn.hkdf;dn.expand,dn.extract;var yn=Object.defineProperty,wn=(e,t)=>{for(var n in t)yn(e,n,{get:t[n],enumerable:!0})};function bn(){return v(U.utils.randomPrivateKey())}function gn(e){return v(U.getPublicKey(e))}wn({},{MessageNode:()=>An,MessageQueue:()=>kn,insertEventIntoAscendingList:()=>Bn,insertEventIntoDescendingList:()=>xn,normalizeURL:()=>En,utf8Decoder:()=>mn,utf8Encoder:()=>vn});var mn=new TextDecoder("utf-8"),vn=new TextEncoder;function En(e){let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),("80"===t.port&&"ws:"===t.protocol||"443"===t.port&&"wss:"===t.protocol)&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}function xn(e,t){let n,r=0,o=e.length-1,i=r;if(o<0)i=0;else if(t.created_at<e[o].created_at)i=o+1;else if(t.created_at>=e[r].created_at)i=r;else for(;;){if(o<=r+1){i=o;break}if(n=Math.floor(r+(o-r)/2),e[n].created_at>t.created_at)r=n;else{if(!(e[n].created_at<t.created_at)){i=n;break}o=n}}return e[i]?.id!==t.id?[...e.slice(0,i),t,...e.slice(i)]:e}function Bn(e,t){let n,r=0,o=e.length-1,i=r;if(o<0)i=0;else if(t.created_at>e[o].created_at)i=o+1;else if(t.created_at<=e[r].created_at)i=r;else for(;;){if(o<=r+1){i=o;break}if(n=Math.floor(r+(o-r)/2),e[n].created_at<t.created_at)r=n;else{if(!(e[n].created_at>t.created_at)){i=n;break}o=n}}return e[i]?.id!==t.id?[...e.slice(0,i),t,...e.slice(i)]:e}var An=class{_value;_next;get value(){return this._value}set value(e){this._value=e}get next(){return this._next}set next(e){this._next=e}constructor(e){this._value=e,this._next=null}},kn=class{_first;_last;get first(){return this._first}set first(e){this._first=e}get last(){return this._last}set last(e){this._last=e}_size;get size(){return this._size}set size(e){this._size=e}constructor(){this._first=null,this._last=null,this._size=0}enqueue(e){const t=new An(e);return 0!==this._size&&this._last?(this._last.next=t,this._last=t):(this._first=t,this._last=t),this._size++,!0}dequeue(){if(0===this._size||!this._first)return null;let e=this._first;return this._first=e.next,e.next=null,this._size--,e.value}},Sn=Symbol("verified");function Ln(e,t){const n=e;return n.pubkey=gn(t),n.id=Tn(n),n.sig=In(n,t),n[Sn]=!0,n}function Tn(e){let t=B(vn.encode(function(e){if(!Hn(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}(e)));return v(t)}var On=e=>e instanceof Object;function Hn(e){if(!On(e))return!1;if("number"!=typeof e.kind)return!1;if("string"!=typeof e.content)return!1;if("number"!=typeof e.created_at)return!1;if("string"!=typeof e.pubkey)return!1;if(!e.pubkey.match(/^[a-f0-9]{64}$/))return!1;if(!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let e=0;e<n.length;e++)if("object"==typeof n[e])return!1}return!0}function _n(e){if("boolean"==typeof e[Sn])return e[Sn];const t=Tn(e);if(t!==e.id)return e[Sn]=!1;try{return e[Sn]=U.verify(e.sig,t,e.pubkey)}catch(t){return e[Sn]=!1}}function In(e,t){return v(U.sign(Tn(e),t))}function Un(e,t){if(e.ids&&-1===e.ids.indexOf(t.id)&&!e.ids.some((e=>t.id.startsWith(e))))return!1;if(e.kinds&&-1===e.kinds.indexOf(t.kind))return!1;if(e.authors&&-1===e.authors.indexOf(t.pubkey)&&!e.authors.some((e=>t.pubkey.startsWith(e))))return!1;for(let n in e)if("#"===n[0]){let r=e[`#${n.slice(1)}`];if(r&&!t.tags.find((([e,t])=>e===n.slice(1)&&-1!==r.indexOf(t))))return!1}return!(e.since&&t.created_at<e.since)&&!(e.until&&t.created_at>e.until)}function Cn(e,t){for(let n=0;n<e.length;n++)if(Un(e[n],t))return!0;return!1}function Nn(...e){let t={};for(let n=0;n<e.length;n++){let r=e[n];Object.entries(r).forEach((([e,n])=>{if("kinds"===e||"ids"===e||"authors"===e||"#"===e[0]){t[e]=t[e]||[];for(let r=0;r<n.length;r++){let o=n[r];t[e].includes(o)||t[e].push(o)}}})),r.limit&&(!t.limit||r.limit>t.limit)&&(t.limit=r.limit),r.until&&(!t.until||r.until>t.until)&&(t.until=r.until),r.since&&(!t.since||r.since<t.since)&&(t.since=r.since)}return t}function Rn(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,o=e.slice(r).indexOf('"')+r+1;return e.slice(o,o+64)}function Pn(e,t){let n=t.length,r=e.indexOf(`"${t}":`)+n+3,o=e.slice(r),i=Math.min(o.indexOf(","),o.indexOf("}"));return parseInt(o.slice(0,i),10)}function jn(e){let t=e.slice(0,22).indexOf('"EVENT"');if(-1===t)return null;let n=e.slice(t+7+1).indexOf('"');if(-1===n)return null;let r=t+7+1+n,o=e.slice(r+1,80).indexOf('"');if(-1===o)return null;let i=r+1+o;return e.slice(r+1,i)}function Fn(e,t){return t===Rn(e,"id")}function qn(e,t){return t===Rn(e,"pubkey")}function Dn(e,t){return t===Pn(e,"kind")}wn({},{getHex64:()=>Rn,getInt:()=>Pn,getSubscriptionId:()=>jn,matchEventId:()=>Fn,matchEventKind:()=>Dn,matchEventPubkey:()=>qn});function $n(e,t={}){let{listTimeout:n=3e3,getTimeout:r=3e3,countTimeout:o=3e3}=t;var i,s,a={},c={connect:[],disconnect:[],error:[],notice:[],auth:[]},u={},l={};function h(){return 1===i?.readyState}async function f(e){let t=JSON.stringify(e);if(h()||(await new Promise((e=>setTimeout(e,1e3))),h()))try{i.send(t)}catch(e){console.log(e)}}const d=(e,{verb:t="REQ",skipVerification:n=!1,alreadyHaveEvent:r=null,id:o=Math.random().toString().slice(2)}={})=>{let i=o;a[i]={id:i,filters:e,skipVerification:n,alreadyHaveEvent:r},f([t,i,...e]);let s={sub:(t,o={})=>d(t||e,{skipVerification:o.skipVerification||n,alreadyHaveEvent:o.alreadyHaveEvent||r,id:i}),unsub:()=>{delete a[i],delete u[i],f(["CLOSE",i])},on:(e,t)=>{u[i]=u[i]||{event:[],count:[],eose:[]},u[i][e].push(t)},off:(e,t)=>{let n=u[i],r=n[e].indexOf(t);r>=0&&n[e].splice(r,1)},get events(){return Mn(s)}};return s};function p(e,t){return new Promise(((n,r)=>{if(!e.id)return void r(new Error(`event ${e} has no id`));let o=e.id;f([t,e]),l[o]={resolve:n,reject:r}}))}return{url:e,sub:d,on:(e,t)=>{c[e].push(t),"connect"===e&&1===i?.readyState&&t()},off:(e,t)=>{let n=c[e].indexOf(t);-1!==n&&c[e].splice(n,1)},list:(e,t)=>new Promise((r=>{let o=d(e,t),i=[],s=setTimeout((()=>{o.unsub(),r(i)}),n);o.on("eose",(()=>{o.unsub(),clearTimeout(s),r(i)})),o.on("event",(e=>{i.push(e)}))})),get:(e,t)=>new Promise((n=>{let o=d([e],t),i=setTimeout((()=>{o.unsub(),n(null)}),r);o.on("event",(e=>{o.unsub(),clearTimeout(i),n(e)}))})),count:e=>new Promise((t=>{let n=d(e,{...d,verb:"COUNT"}),r=setTimeout((()=>{n.unsub(),t(null)}),o);n.on("count",(e=>{n.unsub(),clearTimeout(r),t(e)}))})),async publish(e){await p(e,"EVENT")},async auth(e){await p(e,"AUTH")},connect:async function(){h()||await async function(){return s||(s=new Promise(((t,n)=>{try{i=new WebSocket(e)}catch(e){n(e)}i.onopen=()=>{c.connect.forEach((e=>e())),t()},i.onerror=()=>{s=void 0,c.error.forEach((e=>e())),n()},i.onclose=async()=>{s=void 0,c.disconnect.forEach((e=>e()))};let r,o=new kn;function h(){if(0===o.size)return clearInterval(r),void(r=null);var t=o.dequeue();if(!t)return;let n=jn(t);if(n){let r=a[n];if(r&&r.alreadyHaveEvent&&r.alreadyHaveEvent(Rn(t,"id"),e))return}try{let e=JSON.parse(t);switch(e[0]){case"EVENT":{let t=e[1],n=e[2];return void(Hn(n)&&a[t]&&(a[t].skipVerification||_n(n))&&Cn(a[t].filters,n)&&(a[t],(u[t]?.event||[]).forEach((e=>e(n)))))}case"COUNT":let t=e[1],n=e[2];return void(a[t]&&(u[t]?.count||[]).forEach((e=>e(n))));case"EOSE":{let t=e[1];return void(t in u&&(u[t].eose.forEach((e=>e())),u[t].eose=[]))}case"OK":{let t=e[1],n=e[2],r=e[3]||"";if(t in l){let{resolve:e,reject:o}=l[t];n?e(null):o(new Error(r))}return}case"NOTICE":let r=e[1];return void c.notice.forEach((e=>e(r)));case"AUTH":{let t=e[1];return void c.auth?.forEach((e=>e(t)))}}}catch(e){return}}i.onmessage=e=>{o.enqueue(e.data),r||(r=setInterval(h,0))}})))}()},close(){c={connect:[],disconnect:[],error:[],notice:[],auth:[]},u={},l={},i?.readyState===WebSocket.OPEN&&i.close()},get status(){return i?.readyState??3}}}async function*Mn(e){let t;const n=[],r=e=>{t?(t(e),t=void 0):n.push(e)};e.on("event",r);try{for(;;)if(n.length>0)yield n.shift();else{const e=await new Promise((e=>{t=e}));yield e}}finally{e.off("event",r)}}var Kn=class{_conn;_seenOn={};batchedByKey={};eoseSubTimeout;getTimeout;seenOnEnabled=!0;batchInterval=100;constructor(e={}){this._conn={},this.eoseSubTimeout=e.eoseSubTimeout||3400,this.getTimeout=e.getTimeout||3400,this.seenOnEnabled=!1!==e.seenOnEnabled,this.batchInterval=e.batchInterval||100}close(e){e.forEach((e=>{let t=this._conn[En(e)];t&&t.close()}))}async ensureRelay(e){const t=En(e);this._conn[t]||(this._conn[t]=$n(t,{getTimeout:.9*this.getTimeout,listTimeout:.9*this.getTimeout}));const n=this._conn[t];return await n.connect(),n}sub(e,t,n){let r=new Set,o={...n||{}};o.alreadyHaveEvent=(e,t)=>{if(n?.alreadyHaveEvent?.(e,t))return!0;if(this.seenOnEnabled){let n=this._seenOn[e]||new Set;n.add(t),this._seenOn[e]=n}return r.has(e)};let i=[],s=new Set,a=new Set,c=e.length,u=!1,l=setTimeout((()=>{u=!0;for(let e of a.values())e()}),n?.eoseSubTimeout||this.eoseSubTimeout);e.filter(((e,t,n)=>n.indexOf(e)===t)).forEach((async e=>{let n;try{n=await this.ensureRelay(e)}catch(e){return void f()}if(!n)return;let h=n.sub(t,o);function f(){if(c--,0===c){clearTimeout(l);for(let e of a.values())e()}}h.on("event",(e=>{r.add(e.id);for(let t of s.values())t(e)})),h.on("eose",(()=>{u||f()})),i.push(h)}));let h={sub:(e,t)=>(i.forEach((n=>n.sub(e,t))),h),unsub(){i.forEach((e=>e.unsub()))},on(e,t){"event"===e?s.add(t):"eose"===e&&a.add(t)},off(e,t){"event"===e?s.delete(t):"eose"===e&&a.delete(t)},get events(){return Mn(h)}};return h}get(e,t,n){return new Promise((r=>{let o=this.sub(e,[t],n),i=setTimeout((()=>{o.unsub(),r(null)}),this.getTimeout);o.on("event",(e=>{r(e),clearTimeout(i),o.unsub()}))}))}list(e,t,n){return new Promise((r=>{let o=[],i=this.sub(e,t,n);i.on("event",(e=>{o.push(e)})),i.on("eose",(()=>{i.unsub(),r(o)}))}))}batchedList(e,t,n){return new Promise((r=>{this.batchedByKey[e]?this.batchedByKey[e].push({filters:n,relays:t,resolve:r,events:[]}):(this.batchedByKey[e]=[{filters:n,relays:t,resolve:r,events:[]}],setTimeout((()=>{Object.keys(this.batchedByKey).forEach((async e=>{const t=this.batchedByKey[e],n=[],r=[];t.forEach((e=>{n.push(...e.filters),r.push(...e.relays)}));const o=this.sub(r,[Nn(...n)]);o.on("event",(e=>{t.forEach((t=>Cn(t.filters,e)&&t.events.push(e)))})),o.on("eose",(()=>{o.unsub(),t.forEach((e=>e.resolve(e.events)))})),delete this.batchedByKey[e]}))}),this.batchInterval))}))}publish(e,t){return e.map((async e=>(await this.ensureRelay(e)).publish(t)))}seenOn(e){return Array.from(this._seenOn[e]?.values?.()||[])}},Vn={};wn(Vn,{BECH32_REGEX:()=>Wn,decode:()=>Gn,naddrEncode:()=>rr,neventEncode:()=>nr,noteEncode:()=>Xn,nprofileEncode:()=>tr,npubEncode:()=>Jn,nrelayEncode:()=>or,nsecEncode:()=>Yn});var zn=5e3,Wn=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function Gn(e){let{prefix:t,words:n}=se.decode(e,zn),r=new Uint8Array(se.fromWords(n));switch(t){case"nprofile":{let e=Zn(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for nprofile");if(32!==e[0][0].length)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:v(e[0][0]),relays:e[1]?e[1].map((e=>mn.decode(e))):[]}}}case"nevent":{let e=Zn(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for nevent");if(32!==e[0][0].length)throw new Error("TLV 0 should be 32 bytes");if(e[2]&&32!==e[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(e[3]&&4!==e[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:v(e[0][0]),relays:e[1]?e[1].map((e=>mn.decode(e))):[],author:e[2]?.[0]?v(e[2][0]):void 0,kind:e[3]?.[0]?parseInt(v(e[3][0]),16):void 0}}}case"naddr":{let e=Zn(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for naddr");if(!e[2]?.[0])throw new Error("missing TLV 2 for naddr");if(32!==e[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(!e[3]?.[0])throw new Error("missing TLV 3 for naddr");if(4!==e[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:mn.decode(e[0][0]),pubkey:v(e[2][0]),kind:parseInt(v(e[3][0]),16),relays:e[1]?e[1].map((e=>mn.decode(e))):[]}}}case"nrelay":{let e=Zn(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:mn.decode(e[0][0])}}case"nsec":case"npub":case"note":return{type:t,data:v(r)};default:throw new Error(`unknown prefix ${t}`)}}function Zn(e){let t={},n=e;for(;n.length>0;){let e=n[0],r=n[1];if(!r)throw new Error(`malformed TLV ${e}`);let o=n.slice(2,2+r);if(n=n.slice(2+r),o.length<r)throw new Error(`not enough data to read on TLV ${e}`);t[e]=t[e]||[],t[e].push(o)}return t}function Yn(e){return er("nsec",e)}function Jn(e){return er("npub",e)}function Xn(e){return er("note",e)}function Qn(e,t){let n=se.toWords(t);return se.encode(e,n,zn)}function er(e,t){return Qn(e,m(t))}function tr(e){return Qn("nprofile",ir({0:[m(e.pubkey)],1:(e.relays||[]).map((e=>vn.encode(e)))}))}function nr(e){let t;return null!=e.kind&&(t=function(e){const t=new Uint8Array(4);return t[0]=e>>24&255,t[1]=e>>16&255,t[2]=e>>8&255,t[3]=255&e,t}(e.kind)),Qn("nevent",ir({0:[m(e.id)],1:(e.relays||[]).map((e=>vn.encode(e))),2:e.author?[m(e.author)]:[],3:t?[new Uint8Array(t)]:[]}))}function rr(e){let t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e.kind,!1),Qn("naddr",ir({0:[vn.encode(e.identifier)],1:(e.relays||[]).map((e=>vn.encode(e))),2:[m(e.pubkey)],3:[new Uint8Array(t)]}))}function or(e){return Qn("nrelay",ir({0:[vn.encode(e)]}))}function ir(e){let t=[];return Object.entries(e).forEach((([e,n])=>{n.forEach((n=>{let r=new Uint8Array(n.length+2);r.set([parseInt(e)],0),r.set([n.length],1),r.set(n,2),t.push(r)}))})),g(...t)}var sr={};async function ar(e,t,n){const r=ur(C.getSharedSecret(e,"02"+t));let o=Uint8Array.from(b(16)),i=vn.encode(n),s=await crypto.subtle.importKey("raw",r,{name:"AES-CBC"},!1,["encrypt"]),a=await crypto.subtle.encrypt({name:"AES-CBC",iv:o},s,i);return`${Z.encode(new Uint8Array(a))}?iv=${Z.encode(new Uint8Array(o.buffer))}`}async function cr(e,t,n){let[r,o]=n.split("?iv="),i=ur(C.getSharedSecret(e,"02"+t)),s=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["decrypt"]),a=Z.decode(r),c=Z.decode(o),u=await crypto.subtle.decrypt({name:"AES-CBC",iv:c},s,a);return mn.decode(u)}function ur(e){return e.slice(1,33)}wn(sr,{decrypt:()=>cr,encrypt:()=>ar}),"undefined"!=typeof crypto&&!crypto.subtle&&crypto.webcrypto&&(crypto.subtle=crypto.webcrypto.subtle);wn({},{NIP05_REGEX:()=>hr,queryProfile:()=>pr,searchDomain:()=>dr,useFetchImplementation:()=>fr});var lr,hr=/^(?:([\w.+-]+)@)?([\w.-]+)$/;try{lr=fetch}catch{}function fr(e){lr=e}async function dr(e,t=""){try{return(await(await lr(`https://${e}/.well-known/nostr.json?name=${t}`)).json()).names}catch(e){return{}}}async function pr(e){const t=e.match(hr);if(!t)return null;const[n,r="_",o]=t;try{const e=await lr(`https://${o}/.well-known/nostr.json?name=${r}`),{names:t,relays:n}=function(e){const t={names:{}};for(const[n,r]of Object.entries(e.names))"string"==typeof n&&"string"==typeof r&&(t.names[n]=r);if(e.relays){t.relays={};for(const[n,r]of Object.entries(e.relays))"string"==typeof n&&Array.isArray(r)&&(t.relays[n]=r.filter((e=>"string"==typeof e)))}return t}(await e.json()),i=t[r];return i?{pubkey:i,relays:n?.[i]}:null}catch(e){return null}}function yr(e,t){let n=rn.fromMasterSeed(dt(e,t)).derive("m/44'/1237'/0'/0/0").privateKey;if(!n)throw new Error("could not derive private key");return v(n)}function wr(){return yt(le)}function br(e){return pt(e,le)}wn({},{generateSeedWords:()=>wr,privateKeyFromSeedWords:()=>yr,validateWords:()=>br});function gr(e){const t={reply:void 0,root:void 0,mentions:[],profiles:[]},n=[];for(const r of e.tags)"e"===r[0]&&r[1]&&n.push(r),"p"===r[0]&&r[1]&&t.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let e=0;e<n.length;e++){const r=n[e],[o,i,s,a]=r,c={id:i,relays:s?[s]:[]},u=0===e,l=e===n.length-1;"root"!==a?"reply"!==a?"mention"!==a?u?t.root=c:l?t.reply=c:t.mentions.push(c):t.mentions.push(c):t.reply=c:t.root=c}return t}wn({},{parse:()=>gr});function mr(e){let t=0;for(let n=0;n<e.length;n++){const r=parseInt(e[n],16);if(0!==r){t+=Math.clz32(r)-28;break}t+=4}return t}function vr(e,t){let n=0;const r=e,o=["nonce",n.toString(),t.toString()];for(r.tags.push(o);;){const e=Math.floor((new Date).getTime()/1e3);if(e!==r.created_at&&(n=0,r.created_at=e),o[1]=(++n).toString(),r.id=Tn(r),mr(r.id)>=t)break}return r}wn({},{getPow:()=>mr,minePow:()=>vr});function Er(e,t,n,r){return Ln({kind:6,tags:[...e.tags??[],["e",t.id,n],["p",t.pubkey]],content:""===e.content?"":JSON.stringify(t),created_at:e.created_at},r)}function xr(e){if(6!==e.kind)return;let t,n;for(let r=e.tags.length-1;r>=0&&(void 0===t||void 0===n);r--){const o=e.tags[r];o.length>=2&&("e"===o[0]&&void 0===t?t=o:"p"===o[0]&&void 0===n&&(n=o))}return void 0!==t?{id:t[1],relays:[t[2],n?.[2]].filter((e=>"string"==typeof e)),author:n?.[1]}:void 0}function Br(e,{skipVerification:t}={}){const n=xr(e);if(void 0===n||""===e.content)return;let r;try{r=JSON.parse(e.content)}catch(e){return}return r.id===n.id&&(t||_n(r))?r:void 0}wn({},{finishRepostEvent:()=>Er,getRepostedEvent:()=>Br,getRepostedEventPointer:()=>xr});wn({},{NOSTR_URI_REGEX:()=>Ar,parse:()=>Sr,test:()=>kr});var Ar=new RegExp(`nostr:(${Wn.source})`);function kr(e){return"string"==typeof e&&new RegExp(`^${Ar.source}$`).test(e)}function Sr(e){const t=e.match(new RegExp(`^${Ar.source}$`));if(!t)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:t[0],value:t[1],decoded:Gn(t[1])}}function Lr(e,t,n){const r=t.tags.filter((e=>e.length>=2&&("e"===e[0]||"p"===e[0])));return Ln({...e,kind:7,tags:[...e.tags??[],...r,["e",t.id],["p",t.pubkey]],content:e.content??"+"},n)}function Tr(e){if(7!==e.kind)return;let t,n;for(let r=e.tags.length-1;r>=0&&(void 0===t||void 0===n);r--){const o=e.tags[r];o.length>=2&&("e"===o[0]&&void 0===t?t=o:"p"===o[0]&&void 0===n&&(n=o))}return void 0!==t&&void 0!==n?{id:t[1],relays:[t[2],n[2]].filter((e=>void 0!==e)),author:n[1]}:void 0}wn({},{finishReactionEvent:()=>Lr,getReactedEventPointer:()=>Tr});function Or(e,t){let n=[];(t.kind||-1)>=0&&n.push(`kind=${t.kind}`),t.until&&n.push(`created_at<${t.until}`),t.since&&n.push(`created_at>${t.since}`);let r=n.join("&");if(""===r)throw new Error("refusing to create a delegation without any conditions");let o=B(vn.encode(`nostr:delegation:${t.pubkey}:${r}`)),i=v(U.sign(o,e));return{from:gn(e),to:t.pubkey,cond:r,sig:i}}function Hr(e){let t=e.tags.find((e=>"delegation"===e[0]&&e.length>=4));if(!t)return null;let n=t[1],r=t[2],o=t[3],i=r.split("&");for(let t=0;t<i.length;t++){let[n,r,o]=i[t].split(/\b/);if(("kind"!==n||"="!==r||e.kind!==parseInt(o))&&!("created_at"===n&&"<"===r&&e.created_at<parseInt(o)||"created_at"===n&&">"===r&&e.created_at>parseInt(o)))return null}let s=B(vn.encode(`nostr:delegation:${e.pubkey}:${r}`));return U.verify(o,s,n)?n:null}wn({},{createDelegation:()=>Or,getDelegator:()=>Hr});wn({},{matchAll:()=>Ir,regex:()=>_r,replaceAll:()=>Ur});var _r=()=>new RegExp(`\\b${Ar.source}\\b`,"g");function*Ir(e){const t=e.matchAll(_r());for(const e of t)try{const[t,n]=e;yield{uri:t,value:n,decoded:Gn(n),start:e.index,end:e.index+t.length}}catch(e){}}function Ur(e,t){return e.replaceAll(_r(),((e,n)=>t({uri:e,value:n,decoded:Gn(n)})))}wn({},{channelCreateEvent:()=>Nr,channelHideMessageEvent:()=>jr,channelMessageEvent:()=>Pr,channelMetadataEvent:()=>Rr,channelMuteUserEvent:()=>Fr});var Cr,Nr=(e,t)=>{let n;if("object"==typeof e.content)n=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;n=e.content}return Ln({kind:40,tags:[...e.tags??[]],content:n,created_at:e.created_at},t)},Rr=(e,t)=>{let n;if("object"==typeof e.content)n=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;n=e.content}return Ln({kind:41,tags:[["e",e.channel_create_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},Pr=(e,t)=>{const n=[["e",e.channel_create_event_id,e.relay_url,"root"]];return e.reply_to_channel_message_event_id&&n.push(["e",e.reply_to_channel_message_event_id,e.relay_url,"reply"]),Ln({kind:42,tags:[...n,...e.tags??[]],content:e.content,created_at:e.created_at},t)},jr=(e,t)=>{let n;if("object"==typeof e.content)n=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;n=e.content}return Ln({kind:43,tags:[["e",e.channel_message_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},Fr=(e,t)=>{let n;if("object"==typeof e.content)n=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;n=e.content}return Ln({kind:44,tags:[["p",e.pubkey_to_mute],...e.tags??[]],content:n,created_at:e.created_at},t)};wn({},{useFetchImplementation:()=>qr,validateGithub:()=>Dr});try{Cr=fetch}catch{}function qr(e){Cr=e}async function Dr(e,t,n){try{return await(await Cr(`https://gist.github.com/${t}/${n}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch(e){return!1}}wn({},{authenticate:()=>$r});var $r=async({challenge:e,relay:t,sign:n})=>{const r={kind:22242,created_at:Math.floor(Date.now()/1e3),tags:[["relay",t.url],["challenge",e]],content:""};return t.auth(await n(r))};wn({},{decrypt:()=>Vr,encrypt:()=>Kr,utils:()=>Mr});var Mr={v2:{maxPlaintextSize:65408,minCiphertextSize:100,maxCiphertextSize:102400,getConversationKey:(e,t)=>C.getSharedSecret(e,"02"+t).subarray(1,33),getMessageKeys(e,t){const n=pn(B,e,t,"nip44-v2",76);return{encryption:n.subarray(0,32),nonce:n.subarray(32,44),auth:n.subarray(44,76)}},calcPadding(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("expected positive integer");if(e<=32)return 32;const t=1<<Math.floor(Math.log2(e-1))+1,n=t<=256?32:t/8;return n*(Math.floor((e-1)/n)+1)},pad(e){const t=vn.encode(e),n=t.length;if(n<1||n>=Mr.v2.maxPlaintextSize)throw new Error("invalid plaintext length: must be between 1b and 64KB");const r=Mr.v2.calcPadding(n),o=new Uint8Array(r-n),i=new Uint8Array(2);return new DataView(i.buffer).setUint16(0,n),g(i,t,o)},unpad(e){const t=new DataView(e.buffer).getUint16(0),n=e.subarray(2,2+t);if(0===t||n.length!==t||e.length!==2+Mr.v2.calcPadding(t))throw new Error("invalid padding");return mn.decode(n)}}};function Kr(e,t,n={}){const r=n.version??2;if(2!==r)throw new Error("unknown encryption version "+r);const o=n.salt??b(32);an(o,32);const i=Mr.v2.getMessageKeys(e,o),s=Mr.v2.pad(t),a=fn(i.encryption,i.nonce,s),c=H(B,i.auth,a);return Z.encode(g(new Uint8Array([r]),o,a,c))}function Vr(e,t){const n=Mr.v2;an(e,32);const r=t.length;if(r<n.minCiphertextSize||r>=n.maxCiphertextSize)throw new Error("invalid ciphertext length: "+r);if("#"===t[0])throw new Error("unknown encryption version");let o;try{o=Z.decode(t)}catch(e){throw new Error("invalid base64: "+e.message)}const i=o.subarray(0,1)[0];if(2!==i)throw new Error("unknown encryption version "+i);const s=o.subarray(1,33),a=o.subarray(33,-32),c=o.subarray(-32),u=n.getMessageKeys(e,s),l=H(B,u.auth,a);if(!sn(l,c))throw new Error("invalid MAC");const h=fn(u.encryption,u.nonce,a);return n.unpad(h)}function zr(e){const{pathname:t,searchParams:n}=new URL(e),r=t,o=n.get("relay"),i=n.get("secret");if(!r||!o||!i)throw new Error("invalid connection string");return{pubkey:r,relay:o,secret:i}}async function Wr({pubkey:e,secret:t,invoice:n}){const r={method:"pay_invoice",params:{invoice:n}},o=await ar(t,e,JSON.stringify(r));return Ln({kind:23194,created_at:Math.round(Date.now()/1e3),content:o,tags:[["p",e]]},t)}wn({},{makeNwcRequestEvent:()=>Wr,parseConnectionString:()=>zr});var Gr;wn({},{getZapEndpoint:()=>Yr,makeZapReceipt:()=>Qr,makeZapRequest:()=>Jr,useFetchImplementation:()=>Zr,validateZapRequest:()=>Xr});try{Gr=fetch}catch{}function Zr(e){Gr=e}async function Yr(e){try{let t="",{lud06:n,lud16:r}=JSON.parse(e.content);if(n){let{words:e}=se.decode(n,1e3),r=se.fromWords(e);t=mn.decode(r)}else{if(!r)return null;{let[e,n]=r.split("@");t=`https://${n}/.well-known/lnurlp/${e}`}}let o=await Gr(t),i=await o.json();if(i.allowsNostr&&i.nostrPubkey)return i.callback}catch(e){}return null}function Jr({profile:e,event:t,amount:n,relays:r,comment:o=""}){if(!n)throw new Error("amount not given");if(!e)throw new Error("profile not given");let i={kind:9734,created_at:Math.round(Date.now()/1e3),content:o,tags:[["p",e],["amount",n.toString()],["relays",...r]]};return t&&i.tags.push(["e",t]),i}function Xr(e){let t;try{t=JSON.parse(e)}catch(e){return"Invalid zap request JSON."}if(!Hn(t))return"Zap request is not a valid Nostr event.";if(!_n(t))return"Invalid signature on zap request.";let n=t.tags.find((([e,t])=>"p"===e&&t));if(!n)return"Zap request doesn't have a 'p' tag.";if(!n[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=t.tags.find((([e,t])=>"e"===e&&t));return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":t.tags.find((([e,t])=>"relays"===e&&t))?null:"Zap request doesn't have a 'relays' tag."}function Qr({zapRequest:e,preimage:t,bolt11:n,paidAt:r}){let o=JSON.parse(e).tags.filter((([e])=>"e"===e||"p"===e||"a"===e)),i={kind:9735,created_at:Math.round(r.getTime()/1e3),content:"",tags:[...o,["bolt11",n],["description",e]]};return t&&i.tags.push(["preimage",t]),i}wn({},{getToken:()=>to,unpackEventFromToken:()=>ro,validateEvent:()=>oo,validateToken:()=>no});var eo="Nostr ";async function to(e,t,n,r=!1){if(!e||!t)throw new Error("Missing loginUrl or httpMethod");const o=function(e=255){return{kind:e,content:"",tags:[],created_at:0}}(27235);o.tags=[["u",e],["method",t]],o.created_at=Math.round((new Date).getTime()/1e3);const i=await n(o);return(r?eo:"")+Z.encode(vn.encode(JSON.stringify(i)))}async function no(e,t,n){const r=await ro(e).catch((e=>{throw e}));return await oo(r,t,n).catch((e=>{throw e}))}async function ro(e){if(!e)throw new Error("Missing token");e=e.replace(eo,"");const t=mn.decode(Z.decode(e));if(!t||0===t.length||!t.startsWith("{"))throw new Error("Invalid token");return JSON.parse(t)}async function oo(e,t,n){if(!e)throw new Error("Invalid nostr event");if(!_n(e))throw new Error("Invalid nostr event, signature invalid");if(27235!==e.kind)throw new Error("Invalid nostr event, kind invalid");if(!e.created_at)throw new Error("Invalid nostr event, created_at invalid");if(Math.round((new Date).getTime()/1e3)-e.created_at>60)throw new Error("Invalid nostr event, expired");const r=e.tags.find((e=>"u"===e[0]));if(1!==r?.length&&r?.[1]!==t)throw new Error("Invalid nostr event, url tag invalid");const o=e.tags.find((e=>"method"===e[0]));if(1!==o?.length&&o?.[1].toLowerCase()!==n.toLowerCase())throw new Error("Invalid nostr event, method tag invalid");return!0}var io=a((function e(){i(this,e),this.nip04=sr,this.nip19=Vn,this.generatePrivateKey=bn,this.getPublicKey=gn,this.SimplePool=Kn,this.getEventHash=Tn,this.getSignature=In})),so=function(){function e(t,n){i(this,e),this.options=Object.keys(t).length>0?t:{getTimeout:6e3},this.pool=new Kn(this.options),this.relays=n}var n,r;return a(e,[{key:"getSignedEvent",value:(r=o(t().mark((function e(n){var r,o,i,s,a,c,u,l,h,f,d,p,y;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.message,o=n.kind,i=void 0===o?4:o,s=n.targetPubkey,a=n.privateKey,c=n.tags,r){e.next=3;break}throw new Error("No message provided.");case 3:if(u="",l="",4!==i||!s){e.next=25;break}if(!a){e.next=13;break}return e.next=9,sr.encrypt(a,s,r);case 9:u=e.sent,l=gn(a),e.next=23;break;case 13:if(null!==(h=window)&&void 0!==h&&null!==(h=h.nostrasset)&&void 0!==h&&h.nostr){e.next=15;break}throw new Error("Please call setNostrProvider to set provider first.");case 15:if(null!==(f=window)&&void 0!==f&&null!==(f=f.nostrasset)&&void 0!==f&&null!==(f=f.nostr)&&void 0!==f&&f.nip04){e.next=17;break}throw new Error("Your wallet does not support nip04.");case 17:return e.next=19,window.nostrasset.nostr.getPublicKey();case 19:return l=e.sent,e.next=22,window.nostrasset.nostr.nip04.encrypt(s,r);case 22:u=e.sent;case 23:e.next=26;break;case 25:u=r;case 26:if(d=parseInt(Date.now()/1e3),(p={content:u,kind:i,tags:c,created_at:d,pubkey:l}).id=Tn(p),a){e.next=36;break}return e.next=32,window.nostrasset.nostr.signEvent(p);case 32:y=e.sent,p=y,e.next=37;break;case 36:p.sig=In(p,a);case 37:return e.abrupt("return",p);case 38:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"execCommand",value:(n=o(t().mark((function e(n){var r,o,i,s,a,c,u,l,h,f,d,p,y,w,b,g,m,v,E;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.command,o=n.sendTo,i=n.privateKey,s=n.queryOnly,a=void 0!==s&&s,"undefined"==typeof window){e.next=6;break}sessionStorage.getItem("tempNostrPrivateKey")||(u=bn(),sessionStorage.setItem("tempNostrPrivateKey",u)),c=sessionStorage.getItem("tempNostrPrivateKey"),e.next=10;break;case 6:if("undefined"==typeof global){e.next=10;break}if(i){e.next=9;break}throw new Error("No privateKey provided.");case 9:c=i;case 10:return l=Vn.decode(o).data,h=gn(c),f=null,d=4,p=[["p",l],["r","json"]],a||p.push(["a",h]),e.next=18,this.getSignedEvent({message:r,kind:d,targetPubkey:l,privateKey:a||"undefined"!=typeof global?c:"",tags:p});case 18:return y=e.sent,w=parseInt(Date.now()/1e3),b={kinds:[d],since:w,"#e":[y.id],"#p":[h]},g=this.relays,e.next=24,Promise.any(this.pool.publish(g,y));case 24:return e.next=26,this.pool.get(g,b);case 26:if(m=e.sent){e.next=29;break}return e.abrupt("return",{code:400,data:"timeout",message:"timeout"});case 29:return v=m.content,e.next=32,sr.decrypt(c,l,v);case 32:if(!(E=e.sent)){e.next=36;break}return f=JSON.parse(E),e.abrupt("return",f);case 36:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}]),e}(),ao={development:{RELAYS:["wss://dev-relay.nostrassets.com"],TOKEN_ROBOT_ADDR:"npub196ms9l8z22at9s4dgqwvhtm5umh5a0lrpavyv2yv5mcjhvvxy5xs4qlpcs",MARKET_ROBOT_ADDR:"npub14gdjypgqm6gzrkj0emnl4z0pks3605mkc9q28vnsqwxk2znvw23s9d5g29"},production:{RELAYS:["wss://relay.nostrassets.com"],TOKEN_ROBOT_ADDR:"npub1dy7n73dcrs0n24ec87u4tuagevkpjnzyl7aput69vmn8saemgnuq0a4n6y",MARKET_ROBOT_ADDR:"npub1zl7exeul3py65wt9ux243r0e3pukt8jza28xmpu844mj5wqpncaq0s2tyw"}},co=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.env,o=n.relays,s=n.privateKey,a=n.poolOptions;i(this,t),this.env=r||"development",this.config=ao[this.env],this.privateKey=s,this.relays=o||ao[this.env].RELAYS,this.nostrPool=new so(function(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},a),this.relays)}return a(t,[{key:"getConfig",value:function(){return this.config}},{key:"getNostrPool",value:function(){return this.nostrPool}},{key:"provider",get:function(){if("undefined"!=typeof window)return new h}},{key:"market",get:function(){return new u(this.nostrPool,this.config,this.runCommand.bind(this))}},{key:"token",get:function(){return new l(this.nostrPool,this.config,this.runCommand.bind(this))}},{key:"utils",get:function(){return new io}},{key:"runCommand",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.nostrPool.execCommand({command:e,sendTo:t,privateKey:this.privateKey,queryOnly:n})}}]),t}();module.exports=co;
